
<!doctype html>
<html lang="de" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Lehrmaterial, Übungen, Aufgaben und Hilfen für WebTech">
      
      
      
        <meta name="author" content="Jörn Freiheit">
      
      
        <link rel="canonical" href="http://freiheit.f4.htw-berlin.de/webtech/fe-be-anbindung/">
      
      <link rel="icon" href="../img/favicon.png">
      <meta name="generator" content="mkdocs-1.2.2, mkdocs-material-7.2.6">
    
    
      
        <title>Frontend-Backend-Anbindung - WebTech</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.802231af.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.3f5d1f46.min.css">
        
          
          
          <meta name="theme-color" content="#757575">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>:root{--md-text-font-family:"Roboto";--md-code-font-family:"Roboto Mono"}</style>
      
    
    
    
      <link rel="stylesheet" href="../extra.css">
    
    
      


    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="grey" data-md-color-accent="indigo">
  
    
    <script>function __prefix(e){return new URL("..",location).pathname+"."+e}function __get(e,t=localStorage){return JSON.parse(t.getItem(__prefix(e)))}</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#frontend-backend-anbindung" class="md-skip">
          Zum Inhalt
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="WebTech" class="md-header__button md-logo" aria-label="WebTech" data-md-component="logo">
      
  <img src="../img/fiw.jpg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            WebTech
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Frontend-Backend-Anbindung
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Suche" placeholder="Suche" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Suche">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Zurücksetzen" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Suche wird initialisiert
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        
<a href="https://github.com/jfreiheit/webtech/" title="Quellcode" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    webtech
  </div>
</a>
      </div>
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="WebTech" class="md-nav__button md-logo" aria-label="WebTech" data-md-component="logo">
      
  <img src="../img/fiw.jpg" alt="logo">

    </a>
    WebTech
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/jfreiheit/webtech/" title="Quellcode" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    webtech
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../einfuehrung/" class="md-nav__link">
        Einführung
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../html/" class="md-nav__link">
        HTML
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../css/" class="md-nav__link">
        CSS
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../rwd/" class="md-nav__link">
        RWD
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../javascript/" class="md-nav__link">
        JavaScript
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../angular/" class="md-nav__link">
        Angular
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../angular2/" class="md-nav__link">
        JSON und Direktiven
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../routing/" class="md-nav__link">
        Routing und Services
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../backend/" class="md-nav__link">
        Backend (MongoDB)
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../backend_pg/" class="md-nav__link">
        Backend (PostgreSQL)
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Frontend-Backend-Anbindung
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Frontend-Backend-Anbindung
      </a>
      
        
<nav class="md-nav md-nav--secondary" aria-label="Inhaltsverzeichnis">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Inhaltsverzeichnis
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#navigation-und-routing" class="md-nav__link">
    Navigation und Routing
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#service-fur-http" class="md-nav__link">
    Service für HTTP
  </a>
  
    <nav class="md-nav" aria-label="Service für HTTP">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#get-funktion-von-httpclient" class="md-nav__link">
    get()-Funktion von HttpClient
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#subscribe" class="md-nav__link">
    subscribe()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#backend-starten" class="md-nav__link">
    Backend starten
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#frontend-starten" class="md-nav__link">
    Frontend starten
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#r-ead-tablecomponent" class="md-nav__link">
    R-ead -- TableComponent
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#u-pdate-detailcomponent" class="md-nav__link">
    U-pdate -- DetailComponent
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#formulare-in-angular" class="md-nav__link">
    Formulare in Angular
  </a>
  
    <nav class="md-nav" aria-label="Formulare in Angular">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#reactive-forms-in-componentts" class="md-nav__link">
    Reactive Forms in *.component.ts
  </a>
  
    <nav class="md-nav" aria-label="Reactive Forms in *.component.ts">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#safe-navigation-operator" class="md-nav__link">
    Safe navigation operator
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#reactive-forms-in-componenthtml" class="md-nav__link">
    Reactive Forms in *.component.html
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#asynchrones-abarbeiten" class="md-nav__link">
    Asynchrones Abarbeiten
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#submit-und-cancel-ereignisbehandlung" class="md-nav__link">
    Submit- und Cancel-Ereignisbehandlung
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#d-elete-tablecomponent" class="md-nav__link">
    D-elete -- TableComponent
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../material/" class="md-nav__link">
        Nutzerverwaltung und Material
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../dateiupload/" class="md-nav__link">
        Dateiupload
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../promises/" class="md-nav__link">
        Callbacks und Promises
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../uebungen/" class="md-nav__link">
        Übungen
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../tools/" class="md-nav__link">
        Werkzeuge
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Inhaltsverzeichnis">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Inhaltsverzeichnis
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#navigation-und-routing" class="md-nav__link">
    Navigation und Routing
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#service-fur-http" class="md-nav__link">
    Service für HTTP
  </a>
  
    <nav class="md-nav" aria-label="Service für HTTP">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#get-funktion-von-httpclient" class="md-nav__link">
    get()-Funktion von HttpClient
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#subscribe" class="md-nav__link">
    subscribe()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#backend-starten" class="md-nav__link">
    Backend starten
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#frontend-starten" class="md-nav__link">
    Frontend starten
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#r-ead-tablecomponent" class="md-nav__link">
    R-ead -- TableComponent
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#u-pdate-detailcomponent" class="md-nav__link">
    U-pdate -- DetailComponent
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#formulare-in-angular" class="md-nav__link">
    Formulare in Angular
  </a>
  
    <nav class="md-nav" aria-label="Formulare in Angular">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#reactive-forms-in-componentts" class="md-nav__link">
    Reactive Forms in *.component.ts
  </a>
  
    <nav class="md-nav" aria-label="Reactive Forms in *.component.ts">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#safe-navigation-operator" class="md-nav__link">
    Safe navigation operator
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#reactive-forms-in-componenthtml" class="md-nav__link">
    Reactive Forms in *.component.html
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#asynchrones-abarbeiten" class="md-nav__link">
    Asynchrones Abarbeiten
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#submit-und-cancel-ereignisbehandlung" class="md-nav__link">
    Submit- und Cancel-Ereignisbehandlung
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#d-elete-tablecomponent" class="md-nav__link">
    D-elete -- TableComponent
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/jfreiheit/webtech/edit/master/docs/fe-be-anbindung.md" title="Seite editieren" class="md-content__button md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
                  </a>
                
                
                <h1 id="frontend-backend-anbindung">Frontend-Backend-Anbindung<a class="headerlink" href="#frontend-backend-anbindung" title="Permanent link">&para;</a></h1>
<p>Wir haben jetzt ein Backend, das als REST-Server funngiert. Über die Endpunkte der REST-API können wir auf die einzelnen Funktionen des Backends zugreifen, um die Daten in der <a href="../backend/#rest-api">MongoDB</a> (oder der <a href="../backend_pg/#rest-api-postgresql">PostgreSQL</a>) zu manipulieren (erzeugen, lesen, ändern und löschen - CRUD). Unser <a href="../routing/#routing-und-services">Frontend</a> stellt zur Zeit nur einen <a href="../routing/#services">Daten-Service</a> zur Verfügung, der die Daten client-seitig verwaltet. Dies wollen wir jetzt ändern. Das Frontend soll mit dem Backend kommunizieren, um die Daten zu nutzen, die das Backend zur Verfügung stellt. </p>
<details><summary>Video aus der Vorlesung am 20.12.2021</summary><p><iframe src="https://mediathek.htw-berlin.de/media/embed?key=492b1bd45d825a2278ea364096780f54&width=720&height=420&autoplay=false&autolightsoff=false&loop=false&chapters=false&related=false&responsive=false&t=0" data-src="" class="iframeLoaded" width="720" height="420" frameborder="0" allowfullscreen="allowfullscreen" allowtransparency="true" scrolling="no" aria-label="media embed code" style=""></iframe></p>
</details>
<p>Wir werden uns ein <strong>neues</strong> Frontend erstellen und dabei die einzelnen Schritte genauer untersuchen (bzw. wiederholen). Das hat folgende Vorteile:</p>
<ul>
<li>wir werden sicherer bei der Erstellung von Frontends mithilfe von Angular,</li>
<li>wir müssen nicht auf bestehende Frontends aufsetzen, die evtl. bei einigen von Ihnen nicht richtig funktionieren,</li>
<li>wir haben die Möglichkeit, tiefer in die Prinzipien von Angular einzutauchen und wesentliche Prinzipien ausführlicher zu diskutieren. </li>
</ul>
<p>Ich werde das Frontend, das ich hier erstelle, <code>frontend</code> nennen. Der Name bleibt natürlich Ihnen überlassen. Wir erstellen uns also neben unserem alten Frontend, neben dem Backend usw. in unserem Repository mithilfe von </p>
<div class="highlight"><pre><span></span><code>ng new frontend --routing
</code></pre></div>
<p>ein neues Angular-Projekt und wählen CSS. Wir wechseln in den <code>frontend</code>-Ordner und erzeugen uns dort 6 neue Komponenten:</p>
<div class="highlight"><pre><span></span><code><span class="nb">cd</span> frontend 
ng g c nav
ng g c footer
ng g c home
ng g c table
ng g c create
ng g c detail
</code></pre></div>
<p>Außerdem fügen wir Bootstrap hinzu. Da es mit dem anderen Bootstrap-Projekt bei einigen von Ihnen Kompatibilitätsprobleme gab, verwenden wir nun einmal <a href="https://valor-software.com/ngx-bootstrap/#/">ngx-bootstrap</a>. Ich hoffe, das klappt besser. </p>
<div class="highlight"><pre><span></span><code>ng add ngx-bootstrap
</code></pre></div>
<p>Die Ausgabe sollte ungefähr so aussehen:</p>
<div class="highlight"><pre><span></span><code>ℹ Using package manager: npm
✔ Found compatible package version: ngx-bootstrap@7.1.0.
✔ Package information loaded.

The package ngx-bootstrap@7.1.0 will be installed and executed.
Would you like to proceed? Yes
✔ Package successfully installed.
    ✅️ Added <span class="s2">&quot;bootstrap</span>
<span class="s2">    ✅️ Added &quot;</span>ngx-bootstrap
UPDATE package.json <span class="o">(</span><span class="m">1127</span> bytes<span class="o">)</span>
UPDATE angular.json <span class="o">(</span><span class="m">3194</span> bytes<span class="o">)</span>
UPDATE src/app/app.module.ts <span class="o">(</span><span class="m">732</span> bytes<span class="o">)</span>
✔ Packages installed successfully.
</code></pre></div>
<p>und in der <code>angular.json</code> sollte irgendwo der folgende Eintrag zu finden sein:</p>
<div class="highlight"><pre><span></span><code><span class="nt">&quot;styles&quot;</span><span class="p">:</span> <span class="p">[</span>
  <span class="s2">&quot;./node_modules/ngx-bootstrap/datepicker/bs-datepicker.css&quot;</span><span class="p">,</span>
  <span class="s2">&quot;./node_modules/bootstrap/dist/css/bootstrap.min.css&quot;</span><span class="p">,</span>
  <span class="s2">&quot;src/styles.css&quot;</span>
<span class="p">],</span>
</code></pre></div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Sollte es bei der Installation von Bootstrap Probleme geben, dann bleibt Ihnen immernoch die einfache Variante, Bootstrap über ein CDN direkt in die <code>index.html</code> einzubinden, mit z.B. <code>&lt;link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous"&gt;</code> (siehe <a href="https://getbootstrap.com/docs/5.1/getting-started/introduction/">Bootstrap</a>)</p>
</div>
<h3 id="navigation-und-routing">Navigation und Routing<a class="headerlink" href="#navigation-und-routing" title="Permanent link">&para;</a></h3>
<p>Wir passen unsere <code>nav</code>-Komponente an und können dabei gleich mal überprüfen, ob Bootstrap funktioniert. Den Code habe ich von <a href="https://getbootstrap.com/docs/5.0/components/navbar/#nav">hier</a> entnommen. Außerdem erstellen wir noch einen <code>footer</code> und die <code>home</code>-Seite und legen die Routen fest:</p>
<div class="tabbed-set" data-tabs="1:4"><input checked="checked" id="__tabbed_1_1" name="__tabbed_1" type="radio" /><label for="__tabbed_1_1">nav.component.html</label><div class="tabbed-content">
<div class="highlight"><pre><span></span><code><span class="p">&lt;</span><span class="nt">nav</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;navbar navbar-expand-lg navbar-light bg-light&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;container-fluid&quot;</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">a</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;navbar-brand&quot;</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;http://freiheit.f4.htw-berlin.de/webtech/fe-be-anbindung/&quot;</span><span class="p">&gt;</span>WebTech<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">button</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;navbar-toggler&quot;</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;button&quot;</span> <span class="na">data-bs-toggle</span><span class="o">=</span><span class="s">&quot;collapse&quot;</span> <span class="na">data-bs-target</span><span class="o">=</span><span class="s">&quot;#navbarNavAltMarkup&quot;</span> <span class="na">aria-controls</span><span class="o">=</span><span class="s">&quot;navbarNavAltMarkup&quot;</span> <span class="na">aria-expanded</span><span class="o">=</span><span class="s">&quot;false&quot;</span> <span class="na">aria-label</span><span class="o">=</span><span class="s">&quot;Toggle navigation&quot;</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">span</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;navbar-toggler-icon&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;collapse navbar-collapse&quot;</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;navbarNavAltMarkup&quot;</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;navbar-nav&quot;</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">a</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;nav-link&quot;</span> <span class="na">aria-current</span><span class="o">=</span><span class="s">&quot;page&quot;</span> <span class="err">[</span><span class="na">routerLink</span><span class="err">]=&quot;&#39;/&#39;&quot;</span><span class="p">&gt;</span>Home<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">a</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;nav-link&quot;</span> <span class="err">[</span><span class="na">routerLink</span><span class="err">]=&quot;&#39;/</span><span class="na">table</span><span class="err">&#39;&quot;</span><span class="p">&gt;</span>Table<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">a</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;nav-link&quot;</span> <span class="err">[</span><span class="na">routerLink</span><span class="err">]=&quot;&#39;/</span><span class="na">member</span><span class="err">&#39;&quot;</span><span class="p">&gt;</span>New<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
            <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
        <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">nav</span><span class="p">&gt;</span>
</code></pre></div>
</div>
<input id="__tabbed_1_2" name="__tabbed_1" type="radio" /><label for="__tabbed_1_2">footer.component.html</label><div class="tabbed-content">
<div class="highlight"><pre><span></span><code><span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;fixed-bottom text-white-50 bg-dark p-3 text-center&quot;</span><span class="p">&gt;</span>
    Frontendanbindung an das Backend
<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>    
</code></pre></div>
</div>
<input id="__tabbed_1_3" name="__tabbed_1" type="radio" /><label for="__tabbed_1_3">home.component.html</label><div class="tabbed-content">
<div class="highlight"><pre><span></span><code><span class="p">&lt;</span><span class="nt">main</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;d-flex align-items-center min-vh-100&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;container text-center&quot;</span><span class="p">&gt;</span>
        Welcome home!
    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">main</span><span class="p">&gt;</span>  
</code></pre></div>
</div>
<input id="__tabbed_1_4" name="__tabbed_1" type="radio" /><label for="__tabbed_1_4">home.component.css</label><div class="tabbed-content">
<div class="highlight"><pre><span></span><code><span class="nt">main</span> <span class="p">{</span>
    <span class="k">background-color</span><span class="p">:</span> <span class="kc">grey</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
</div>
</div>
<p>Hier die Routendefinitionen und das Einbinden der Komponenten:</p>
<div class="tabbed-set" data-tabs="2:2"><input checked="checked" id="__tabbed_2_1" name="__tabbed_2" type="radio" /><label for="__tabbed_2_1">app-routing.module.ts</label><div class="tabbed-content">
<div class="highlight"><pre><span></span><code><span class="k">import</span> <span class="p">{</span> <span class="nx">NgModule</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;@angular/core&#39;</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">RouterModule</span><span class="p">,</span> <span class="nx">Routes</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;@angular/router&#39;</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">CreateComponent</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;./create/create.component&#39;</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">DetailComponent</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;./detail/detail.component&#39;</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">HomeComponent</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;./home/home.component&#39;</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">TableComponent</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;./table/table.component&#39;</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">routes</span><span class="o">:</span> <span class="nx">Routes</span> <span class="o">=</span> <span class="p">[{</span>
    <span class="nx">path</span><span class="o">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="nx">component</span><span class="o">:</span> <span class="nx">HomeComponent</span><span class="p">,</span>
    <span class="nx">pathMatch</span><span class="o">:</span> <span class="s1">&#39;full&#39;</span>
  <span class="p">},</span>
  <span class="p">{</span>
    <span class="nx">path</span><span class="o">:</span> <span class="s2">&quot;table&quot;</span><span class="p">,</span>
    <span class="nx">component</span><span class="o">:</span> <span class="nx">TableComponent</span>
  <span class="p">},</span>
  <span class="p">{</span>
    <span class="nx">path</span><span class="o">:</span> <span class="s2">&quot;member&quot;</span><span class="p">,</span>
    <span class="nx">component</span><span class="o">:</span> <span class="nx">CreateComponent</span>
  <span class="p">},</span>
  <span class="p">{</span>
    <span class="nx">path</span><span class="o">:</span> <span class="s2">&quot;member/:id&quot;</span><span class="p">,</span>
    <span class="nx">component</span><span class="o">:</span> <span class="nx">DetailComponent</span>
  <span class="p">}];</span>

<span class="err">@</span><span class="nx">NgModule</span><span class="p">({</span>
  <span class="nx">imports</span><span class="o">:</span> <span class="p">[</span><span class="nx">RouterModule</span><span class="p">.</span><span class="nx">forRoot</span><span class="p">(</span><span class="nx">routes</span><span class="p">)],</span>
  <span class="nx">exports</span><span class="o">:</span> <span class="p">[</span><span class="nx">RouterModule</span><span class="p">]</span>
<span class="p">})</span>
<span class="k">export</span> <span class="kd">class</span> <span class="nx">AppRoutingModule</span> <span class="p">{</span> <span class="p">}</span>
</code></pre></div>
</div>
<input id="__tabbed_2_2" name="__tabbed_2" type="radio" /><label for="__tabbed_2_2">app.component.html</label><div class="tabbed-content">
<div class="highlight"><pre><span></span><code><span class="p">&lt;</span><span class="nt">app-nav</span><span class="p">&gt;&lt;/</span><span class="nt">app-nav</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">router-outlet</span><span class="p">&gt;&lt;/</span><span class="nt">router-outlet</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">app-footer</span><span class="p">&gt;&lt;/</span><span class="nt">app-footer</span><span class="p">&gt;</span>
</code></pre></div>
</div>
</div>
<h2 id="service-fur-http">Service für HTTP<a class="headerlink" href="#service-fur-http" title="Permanent link">&para;</a></h2>
<p>Wir bereits beim <a href="../routing/#routing-und-services">Routing</a>-Thema eingeführt, erstellen wir auch nun wieder einen <a href="../routing/#services">Service</a> zur Verwaltung der Daten. Dieses Mal sind die Daten aber nicht direkt im Code, sondern wir greifen mit dem Service auf das Backend zu, vielmehr auf die Endpunkte des Backends:</p>
<table>
<thead>
<tr>
<th>Methode</th>
<th>URL</th>
<th>Bedeutung</th>
</tr>
</thead>
<tbody>
<tr>
<td>GET</td>
<td>/members</td>
<td>hole alle Datensätze</td>
</tr>
<tr>
<td>GET</td>
<td>/members/11</td>
<td>hole den Datensatz mit der id=11</td>
</tr>
<tr>
<td>POST</td>
<td>/members</td>
<td>füge einen neuen Datensatz hinzu</td>
</tr>
<tr>
<td>PATCH</td>
<td>/members/11</td>
<td>ändere den Datensatz mit der id=11</td>
</tr>
<tr>
<td>DELETE</td>
<td>/members/11</td>
<td>lösche den Datensatz mit der id=11</td>
</tr>
<tr>
<td>DELETE</td>
<td>/members</td>
<td>lösche alle Datensätze</td>
</tr>
</tbody>
</table>
<p>Wobei der Wert der <code>id</code> nur ein Beispiel ist.  </p>
<p>Wir erstellen uns im Ordner <code>shared</code> einen <code>backend</code>-Service:</p>
<div class="highlight"><pre><span></span><code>ng g service shared/backend
</code></pre></div>
<p>In diesem Service wollen wir ein Modul verwenden, dass die Kommunikation mit dem Backend per HTTP ermöglicht. Diese Modul heißt <code>HttpClientModule</code> und muss zunächst für die Anwendung in <code>app.module.ts</code> importiert werden:</p>
<div class="tabbed-set" data-tabs="3:1"><input checked="checked" id="__tabbed_3_1" name="__tabbed_3" type="radio" /><label for="__tabbed_3_1">app.module.ts</label><div class="tabbed-content">
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="k">import</span> <span class="p">{</span> <span class="nx">NgModule</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;@angular/core&#39;</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">BrowserModule</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;@angular/platform-browser&#39;</span><span class="p">;</span>

<span class="k">import</span> <span class="p">{</span> <span class="nx">AppRoutingModule</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;./app-routing.module&#39;</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">AppComponent</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;./app.component&#39;</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">NavComponent</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;./nav/nav.component&#39;</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">FooterComponent</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;./footer/footer.component&#39;</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">TableComponent</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;./table/table.component&#39;</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">BrowserAnimationsModule</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;@angular/platform-browser/animations&#39;</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">HomeComponent</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;./home/home.component&#39;</span><span class="p">;</span>
<span class="hll"><span class="k">import</span> <span class="p">{</span> <span class="nx">HttpClientModule</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;@angular/common/http&#39;</span><span class="p">;</span>
</span><span class="k">import</span> <span class="p">{</span> <span class="nx">DetailComponent</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;./detail/detail.component&#39;</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">CreateComponent</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;./create/create.component&#39;</span><span class="p">;</span>

<span class="kd">@NgModule</span><span class="p">({</span>
  <span class="nx">declarations</span><span class="o">:</span> <span class="p">[</span>
    <span class="nx">AppComponent</span><span class="p">,</span>
    <span class="nx">NavComponent</span><span class="p">,</span>
    <span class="nx">FooterComponent</span><span class="p">,</span>
    <span class="nx">TableComponent</span><span class="p">,</span>
    <span class="nx">HomeComponent</span><span class="p">,</span>
    <span class="nx">DetailComponent</span><span class="p">,</span>
    <span class="nx">CreateComponent</span>
  <span class="p">],</span>
  <span class="nx">imports</span><span class="o">:</span> <span class="p">[</span>
    <span class="nx">BrowserModule</span><span class="p">,</span>
    <span class="nx">AppRoutingModule</span><span class="p">,</span>
    <span class="nx">BrowserAnimationsModule</span><span class="p">,</span>
<span class="hll">    <span class="nx">HttpClientModule</span>
</span>  <span class="p">],</span>
  <span class="nx">providers</span><span class="o">:</span> <span class="p">[],</span>
  <span class="nx">bootstrap</span><span class="o">:</span> <span class="p">[</span><span class="nx">AppComponent</span><span class="p">]</span>
<span class="p">})</span>
<span class="k">export</span> <span class="kd">class</span> <span class="nx">AppModule</span> <span class="p">{</span> <span class="p">}</span>
</code></pre></div>
</td></tr></table>
</div>
</div>
<p>Das <code>HttpClientModule</code> enthält einen Service <code>HttpClient</code>, der alle HTTP-Anfragemethoden, also <code>GET</code>, <code>POST</code>, <code>PUT</code>, <code>PATCH</code>, <code>DELETE</code> usw. als Funktionen bereitstellt. Diesen Service wollen wir in unserem <code>backend</code>-Service verwenden und binden ihn deshalb dort per <em>dependency injection</em> ein:</p>
<div class="tabbed-set" data-tabs="4:1"><input checked="checked" id="__tabbed_4_1" name="__tabbed_4" type="radio" /><label for="__tabbed_4_1">shared/backend.service.ts</label><div class="tabbed-content">
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="hll"><span class="k">import</span> <span class="p">{</span> <span class="nx">HttpClient</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;@angular/common/http&#39;</span><span class="p">;</span>
</span><span class="k">import</span> <span class="p">{</span> <span class="nx">Injectable</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;@angular/core&#39;</span><span class="p">;</span>

<span class="kd">@Injectable</span><span class="p">({</span>
  <span class="nx">providedIn</span><span class="o">:</span> <span class="s1">&#39;root&#39;</span>
<span class="p">})</span>
<span class="k">export</span> <span class="kd">class</span> <span class="nx">BackendService</span> <span class="p">{</span>

<span class="hll">  <span class="kr">constructor</span><span class="p">(</span><span class="k">private</span> <span class="nx">http</span>: <span class="kt">HttpClient</span><span class="p">)</span> <span class="p">{</span> <span class="p">}</span>
</span><span class="p">}</span>
</code></pre></div>
</td></tr></table>
</div>
</div>
<p>Im Sinne der Typsicherheit erstellen wir uns auch hier wieder ein Interface für unsere Daten, um diesen als Typ zu verwenden. Beim letzten Mal hatten wir das Interface generisch <code>Data</code> genannt. Wir nennen es nun konkreter <code>Member</code> und erstellen es ebenfalls im <code>shared</code>-Ordner:</p>
<div class="highlight"><pre><span></span><code>ng g interface shared/member
</code></pre></div>
<p>Wir übernehmen hier das Datenmodell, das wir für die MongoDB gewählt hatten. Bei der PostgreSQL hatten die Eigenschaften andere Namen (<code>id</code>, <code>firstname</code>, <code>lastname</code>)! Das sollte dann entsprechend angepasst werden - je nachdem, welches Backend verwendet wird. </p>
<div class="tabbed-set" data-tabs="5:1"><input checked="checked" id="__tabbed_5_1" name="__tabbed_5" type="radio" /><label for="__tabbed_5_1">shared/member.ts</label><div class="tabbed-content">
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4
5
6</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="k">export</span> <span class="kd">interface</span> <span class="nx">Member</span> <span class="p">{</span>
  <span class="nx">_id</span>: <span class="kt">string</span><span class="p">;</span>
  <span class="nx">forename</span>: <span class="kt">string</span><span class="p">;</span>
  <span class="nx">surname</span>: <span class="kt">string</span><span class="p">;</span>
  <span class="nx">email</span>: <span class="kt">string</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
</td></tr></table>
</div>
</div>
<h3 id="get-funktion-von-httpclient"><code>get()</code>-Funktion von <code>HttpClient</code><a class="headerlink" href="#get-funktion-von-httpclient" title="Permanent link">&para;</a></h3>
<p>Wir erstellen nun die erste "Verknüpfung" mit dem Backend und implementieren ein <code>GET</code>-Request an das Backend, um alle <code>members</code> abzufragen. Dazu verwenden wir die <code>get()</code>-Funktion des <code>HttpClient</code>-Services. </p>
<p>Die einfachste Form der Anwendung der <code>get()</code>-Funktion besteht darin, dieser Funktion die entsprechende URL des Backends zu übergeben. In unserem Fall also </p>
<div class="highlight"><pre><span></span><code><span class="nx">http</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;http://localhost:3000/members&#39;</span><span class="p">);</span>
</code></pre></div>
<p>Diese Funktion gibt ein sogenanntes <em>Observable</em> zurück. <em>Observables</em> implementieren das <em>Observer Pattern</em> - ein Design Pattern zur Kommunikation zwischen einem sogenannte <em>subject</em>, das einen oder mehrere <em>observers</em> beobachtet und das immer dann informiert wird, sobald sich der Zustand eines <em>observers</em> geändert hat. Eine typische Implementierung des <em>Observer Patterns</em> findet durch Ereignis-Listener statt. Jemand (das <em>subject</em>) meldet sich an einem <em>observer</em> an, z.B. einem Button (genauer gesagt, an das Click-Ereignis des Buttons) und wird informiert, sobald der Button gecklickt wurde. </p>
<p>Die Grundidee bei <em>Observables</em> in TypeScript ist die, dass es eine Funktion gibt, die Werte ermittelt (z.B. <code>http.get()</code>), aber diese Funktion nur ausgeführt wird, wenn sie jemand <code>subscribe</code>d. <code>subscribe()</code> ist also wie eine Anmeldung an den zu beobachtenden Wert. </p>
<p>Wir schauen uns dieses Prinzip mal mit der <code>get()</code>-Funktion des <code>HttpClient</code>s an:</p>
<div class="tabbed-set" data-tabs="6:1"><input checked="checked" id="__tabbed_6_1" name="__tabbed_6" type="radio" /><label for="__tabbed_6_1">src/app/shared/backend.service.ts</label><div class="tabbed-content"></div>
</div>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="k">import</span> <span class="p">{</span> <span class="nx">HttpClient</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;@angular/common/http&#39;</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">Injectable</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;@angular/core&#39;</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">Observable</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;rxjs&#39;</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">Member</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;./member&#39;</span><span class="p">;</span>

<span class="err">@</span><span class="nx">Injectable</span><span class="p">({</span>
  <span class="nx">providedIn</span><span class="o">:</span> <span class="s1">&#39;root&#39;</span>
<span class="p">})</span>
<span class="k">export</span> <span class="kd">class</span> <span class="nx">BackendService</span> <span class="p">{</span>
<span class="hll">  <span class="nx">baseUrl</span> <span class="o">=</span> <span class="s1">&#39;http://localhost:3000/members&#39;</span><span class="p">;</span>
</span>
  <span class="nx">constructor</span><span class="p">(</span><span class="kr">private</span> <span class="nx">http</span><span class="o">:</span> <span class="nx">HttpClient</span><span class="p">)</span> <span class="p">{</span> <span class="p">}</span>

  <span class="nx">getAll</span><span class="p">()</span><span class="o">:</span> <span class="nx">Observable</span><span class="o">&lt;</span><span class="nx">Member</span><span class="p">[]</span><span class="o">&gt;</span><span class="p">{</span>
<span class="hll">    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">http</span><span class="p">.</span><span class="nx">get</span><span class="o">&lt;</span><span class="nx">Member</span><span class="p">[]</span><span class="o">&gt;</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">baseUrl</span><span class="p">);</span>
</span>  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
</td></tr></table>
<p>Zunächst einmal sehen wir in Zeile <code>15</code> den Aufruf der <code>get()</code>-Funktion von <code>HttpClient</code>. Der <code>get()</code>-Funktion wird als Parameter die URL des Backends übergeben. Diese ist in der Eigenschaft <code>baseUrl</code> in Zeile <code>10</code> definiert. </p>
<p>Die Rückgabe der <code>get()</code>-Funktion ist, wie gesagt, ein <code>Observable</code>. Wir erzeugen den Aufruf der <code>get()</code>-Funktion in einer von uns erstellten Funktion <code>getAll()</code>deren Rückgabetyp dieses <code>Obervable</code> ist (Zeile <code>14</code>). Dieses <code>Observable</code> ist sogar typisiert, nämlich mit unserem Datenmodell-Typ <code>Member</code>. Vielmehr bekommen wir ein Array von <code>Member</code>-Objekten zurück, deshalb <code>Observable&lt;Member[]&gt;</code> als Rückgabetyp der <code>getAll()</code>-Funktion. Da wir diesen Rückgabetyp so konkret angeben (und nicht einfach nur <code>Observable</code> oder <code>Observable&lt;any&gt;</code>, erfordert TypeScript auch, dass wir die <code>get()</code>-Funktion typisieren - deshalb <code>get&lt;Member[]&gt;()</code>.</p>
<p>Wir müssen sowohl <code>Observable</code> (aus <code>rxjs</code>) als auch <code>Member</code> (aus unserer <code>member.ts</code>) importieren (Zeilen <code>3</code> und <code>4</code>). Nun müssen wir uns noch an dieses <code>Observable</code> mittels <code>subscribe()</code> anmelden. Das machen wir in unserer <code>TableComponent</code>.</p>
<h3 id="subscribe"><code>subscribe()</code><a class="headerlink" href="#subscribe" title="Permanent link">&para;</a></h3>
<p>In unserer <code>TableComponent</code> wollen wir die <code>getAll()</code>-Funktion unseres Backend-Services nutzen, um uns alle <code>members</code>-Datensätze vom Backend anfragen und anzeigen zu lassen. Wir öffnen dazu die <code>table.component.ts</code>:</p>
<div class="tabbed-set" data-tabs="7:1"><input checked="checked" id="__tabbed_7_1" name="__tabbed_7" type="radio" /><label for="__tabbed_7_1">src/app/table.component.ts</label><div class="tabbed-content"></div>
</div>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="k">import</span> <span class="p">{</span> <span class="nx">Component</span><span class="p">,</span> <span class="nx">OnInit</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;@angular/core&#39;</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">BackendService</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;../shared/backend.service&#39;</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">Member</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;../shared/member&#39;</span><span class="p">;</span>

<span class="err">@</span><span class="nx">Component</span><span class="p">({</span>
  <span class="nx">selector</span><span class="o">:</span> <span class="s1">&#39;app-table&#39;</span><span class="p">,</span>
  <span class="nx">templateUrl</span><span class="o">:</span> <span class="s1">&#39;./table.component.html&#39;</span><span class="p">,</span>
  <span class="nx">styleUrls</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;./table.component.css&#39;</span><span class="p">]</span>
<span class="p">})</span>
<span class="k">export</span> <span class="kd">class</span> <span class="nx">TableComponent</span> <span class="nx">implements</span> <span class="nx">OnInit</span> <span class="p">{</span>
  <span class="nx">members</span><span class="o">!:</span> <span class="nx">Member</span><span class="p">[];</span>

  <span class="nx">constructor</span><span class="p">(</span><span class="kr">private</span> <span class="nx">bs</span><span class="o">:</span> <span class="nx">BackendService</span><span class="p">)</span> <span class="p">{</span> <span class="p">}</span>

  <span class="nx">ngOnInit</span><span class="p">()</span><span class="o">:</span> <span class="k">void</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">readAll</span><span class="p">();</span>
  <span class="p">}</span>

  <span class="nx">readAll</span><span class="p">()</span><span class="o">:</span> <span class="k">void</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">bs</span><span class="p">.</span><span class="nx">getAll</span><span class="p">().</span><span class="nx">subscribe</span><span class="p">(</span>
      <span class="p">(</span>
        <span class="nx">response</span><span class="o">:</span> <span class="nx">Member</span><span class="p">[])</span> <span class="p">=&gt;</span> <span class="p">{</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">members</span> <span class="o">=</span> <span class="nx">response</span><span class="p">;</span>
                <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">members</span><span class="p">);</span>
                <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">members</span><span class="p">;</span>
        <span class="p">},</span>
        <span class="nx">error</span> <span class="p">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">error</span><span class="p">)</span>
      <span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
</td></tr></table>
<p>Zunächst binden wir den <code>BackendService</code> mittels <em>dependency injection</em> in unsere Komponente ein (Zeile <code>13</code>). In einer eigenen Funktion <code>readAll()</code> rufen wir nun die <code>getAll()</code>-Funktion des <code>BackendService</code> auf (Zeile <code>20</code>). Wie in dem Abschnitt zuvor erläutert, wird diese Funktion nur durch ein <code>subscribe()</code> ausgeführt. Die <code>subscribe()</code>-Funktion "holt" das <code>Observer</code>-Objekt, welches drei sogenannte <em>callback</em>-Funktionen definiert: <code>next</code>, <code>error</code> und <code>complete</code>. <a href="../javascript/#callback-funktionen">Callback-Funktionen</a> sind <a href="../javascript/#callback-funktionen">hier</a> erläutert. Wir haben also drei Parameter in der <code>subscribe()</code>-Funktion, von denen jedoch nur einer (<code>next</code>) erforderlich ist. <code>error</code> und <code>complete</code> sind optional. </p>
<p>Unter <code>next</code> erhalten wir die <code>response</code> zurück, also das angefragte Objekt. Wir verwenden dafür eine <em>Arrow-Funktion</em> (siehe <a href="../javascript/#arrow-funktionen">Arrow-Funktionen</a>). Wie wir diese Funktion nennen, bleibt uns überlassen. Hier heißt sie <code>response</code>. Wir haben diese Funktion auch mit <code>Member[]</code> typisiert, da sie uns ein <code>Member</code>-Array zurückgibt. Der Inhalt dieser Funktion ist die Zuweisung der <code>response</code> auf unsere Eigenschaft <code>members</code> vom Typ <code>Member[]</code> (definiert in Zeile <code>11</code>) und der Rückgabe der <code>response</code> (wir geben <code>this.members</code> zurück, entspricht aber genau der <code>response</code>). Die Konsolenausgabe kann natürlich auch raus. </p>
<h2 id="backend-starten">Backend starten<a class="headerlink" href="#backend-starten" title="Permanent link">&para;</a></h2>
<p>Um die Anbindung an das Backend zu testen, dürfen wir nicht vergessen, es zu starten! Wechseln Sie im Terminal in Ihren Backend-Ordner und rufen dort</p>
<div class="highlight"><pre><span></span><code>node server.js 
</code></pre></div>
<p>auf. Es erscheint im Terminal (wenn das MongoDB-Backend gestartet wird)</p>
<div class="highlight"><pre><span></span><code>Server started and listening on port <span class="m">3000</span> ... 
connected to DB
</code></pre></div>
<h2 id="frontend-starten">Frontend starten<a class="headerlink" href="#frontend-starten" title="Permanent link">&para;</a></h2>
<p>Wir müssen unser Frontend compilieren <code>ng serve</code> und wenn wir dann im Browser <code>http://localhost:4200/table</code> eingeben, also die Route zu unserer <code>TableComponent</code>, dann sollten wir in der <strong>Konsole in den Entwicklertools</strong> die Ausgabe der Response sehen (die <code>id</code>s und auch die Anzahl der Einträge können bei Ihnen anders sein):</p>
<p><img alt="konsole" src="../files/101_konsole.png" /></p>
<p>Achtung! Man sieht nichts auf der Webseite, sondern wir geben die Datensätze derzeit nur in der Konsole der Entwicklertools aus!</p>
<div class="admonition success">
<p class="admonition-title">Success</p>
</div>
<p>Wir haben das Backend an das Frontend angebunden. Wir haben die erste Anfrage an das Backend im Frontend umgesetzt, nämlich <code>GET /members</code>, indem wir im Frontend die <code>get()</code>-Funktion des <code>HttpClient</code> implementiert und diese in der <code>TableComponent</code>mittels <code>subscribe()</code> ausgeführt haben. Wir werden nun zunächst die Daten noch im HTML-Template darstellen und dann weitere Endpunkte unserer REST-API anbinden. </p>
<h2 id="r-ead-tablecomponent">R-ead -- TableComponent<a class="headerlink" href="#r-ead-tablecomponent" title="Permanent link">&para;</a></h2>
<p>Wir wollen eine ansprechende Ansicht der Daten erzeugen. Wir werden die Daten in einer Tablle anzeigen und verwenden dazu Bootstrap-CSS-Klassen für das Design. Dazu wollen wir auch <a href="https://icons.getbootstrap.com/">Bootstrap-Icons</a> (oder auch <a href="https://www.npmjs.com/package/ngx-bootstrap-icons">diese</a>) verwenden. Diese installieren wir die Icons mit </p>
<div class="highlight"><pre><span></span><code>npm i bootstrap-icons
</code></pre></div>
<p>(für die <code>ngx-bootstrap-icons</code> müssten Sie <code>npm i ngx-bootstrap-icons</code> eingeben). Um die Icons in der <code>TableComponent</code> einfach verwenden zu können, werden die Icons in der <code>table.component.css</code> importiert:</p>
<div class="tabbed-set" data-tabs="8:1"><input checked="checked" id="__tabbed_8_1" name="__tabbed_8" type="radio" /><label for="__tabbed_8_1">table.component.css</label><div class="tabbed-content">
<div class="highlight"><pre><span></span><code><span class="p">@</span><span class="k">import</span> <span class="nt">url</span><span class="o">(</span><span class="s1">&#39;../../../node_modules/bootstrap-icons/font/bootstrap-icons.css&#39;</span><span class="o">)</span><span class="p">;</span>
</code></pre></div>
</div>
</div>
<p>Die Bootstrap-Klassen für eine Tablle können <a href="https://getbootstrap.com/docs/5.0/content/tables/#accented-tables">hier</a> entnommen werden. </p>
<div class="tabbed-set" data-tabs="9:1"><input checked="checked" id="__tabbed_9_1" name="__tabbed_9" type="radio" /><label for="__tabbed_9_1">table.component.html</label><div class="tabbed-content">
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;container mt-3&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">h3</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;m-3&quot;</span><span class="p">&gt;</span>Alle Einträge<span class="p">&lt;/</span><span class="nt">h3</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;table-responsive&quot;</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">table</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;m-3 table table-striped table-hover&quot;</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">caption</span><span class="p">&gt;</span>Alle <span class="p">&lt;</span><span class="nt">code</span><span class="p">&gt;</span>members<span class="p">&lt;/</span><span class="nt">code</span><span class="p">&gt;&lt;/</span><span class="nt">caption</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">thead</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">tr</span><span class="p">&gt;</span>
                    <span class="p">&lt;</span><span class="nt">th</span> <span class="na">scope</span><span class="o">=</span><span class="s">&quot;col &quot;</span><span class="p">&gt;</span>Nr<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
                    <span class="p">&lt;</span><span class="nt">th</span> <span class="na">scope</span><span class="o">=</span><span class="s">&quot;col &quot;</span><span class="p">&gt;</span>Vorname<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
                    <span class="p">&lt;</span><span class="nt">th</span> <span class="na">scope</span><span class="o">=</span><span class="s">&quot;col &quot;</span><span class="p">&gt;</span>Nachname<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
                    <span class="p">&lt;</span><span class="nt">th</span> <span class="na">scope</span><span class="o">=</span><span class="s">&quot;col &quot;</span><span class="p">&gt;</span>E-Mail<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
                <span class="p">&lt;/</span><span class="nt">tr</span><span class="p">&gt;</span>
            <span class="p">&lt;/</span><span class="nt">thead</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">tbody</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">tr</span> <span class="err">*</span><span class="na">ngFor</span><span class="o">=</span><span class="s">&quot;let member of members; let i=index; &quot;</span><span class="p">&gt;</span>
                    <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>{{ i+1 }}<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
                    <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>{{ member.forename }}<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
                    <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>{{ member.surname }}<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
                    <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>
                        <span class="p">&lt;</span><span class="nt">a</span> <span class="err">[</span><span class="na">href</span><span class="err">]=&quot;&#39;</span><span class="na">mailto:</span><span class="err">&#39;</span> <span class="err">+</span> <span class="na">member</span><span class="err">.</span><span class="na">email</span><span class="err">&quot;</span><span class="p">&gt;&lt;</span><span class="nt">span</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;bi bi-envelope px-5&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">span</span><span class="p">&gt;&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
                        <span class="p">&lt;</span><span class="nt">a</span> <span class="err">[</span><span class="na">routerLink</span><span class="err">]=&quot;[&#39;/</span><span class="na">member</span><span class="err">&#39;,</span> <span class="na">member</span><span class="err">.</span><span class="na">_id</span><span class="err">]&quot;</span><span class="p">&gt;</span> <span class="p">&lt;</span><span class="nt">span</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot; bi bi-pencil-square px-5 &quot;</span><span class="p">&gt;&lt;/</span><span class="nt">span</span><span class="p">&gt;&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
                        <span class="p">&lt;</span><span class="nt">span</span> <span class="err">(</span><span class="na">click</span><span class="err">)=&quot;</span><span class="na">delete</span><span class="err">(</span><span class="na">member</span><span class="err">.</span><span class="na">_id</span><span class="err">)&quot;</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot; bi bi-trash px-5 &quot;</span><span class="p">&gt;&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
                    <span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
                <span class="p">&lt;/</span><span class="nt">tr</span><span class="p">&gt;</span>
            <span class="p">&lt;/</span><span class="nt">tbody</span><span class="p">&gt;</span>

        <span class="p">&lt;/</span><span class="nt">table</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</code></pre></div>
</td></tr></table>
</div>
</div>
<p>In der <code>table.component.ts</code> wird beim Erstellen der Komponente (<code>ngOnInit()</code>) die Variable <code>members</code> mit allen Daten aus der Datenbank befüllt. Dieses Array wird in der <code>table.component.html</code> ausgelesen. Wir verwenden dazu wieder die <code>*ngFor</code>-Direktive (siehe Zeile <code>15</code>).</p>
<p>Die erste Spalte der Tabelle wird einfach mit einer fortlaufenden Nummer befüllt, in die zweite Spalte kommt der Vorname (<code>member.forename</code>) und in die dritte Spalte der Nachname (<code>member.surname</code>) - siehe Zeilen <code>16-18</code>. In Zeile <code>20</code> erstellen wir einen Link, um an die E-Mail-Adresse (<code>member.email</code>) eine E-Mail zu senden. Der Inhalt des Links ist das Bootstrap-Icon <code>bi-envelope</code> - siehe <a href="https://icons.getbootstrap.com/icons/envelope/">hier</a>.</p>
<p>In Zeile <code>21</code> definieren wir ebenfalls einen Link, dieses Mal aber keinen Hyperlink, sondern einen Routerlink unter Verwendung der <code>_id</code> von <code>member</code>. Es entsteht der Aufruf der Route <code>/member/:id</code>, wobei für die <code>:id</code> die entsprechende <code>_id</code> von <code>member</code> eingesetzt wird. Inhalt des Links ist das Bootstrap-Icon <a href="https://icons.getbootstrap.com/icons/pencil-square/">pencil-square</a>.</p>
<p>In Zeile <code>22</code> verwenden wir das Bootstrap-Icon <a href="https://icons.getbootstrap.com/icons/trash/">trash</a>. Dieses wird an das <code>click</code>-Ereignis angemeldet. Sobald das Icon angeklickt wird, wird die Methode <code>delete(id)</code> aufgerufen. Dieser Methode wird die jeweilige <code>_id</code> von <code>member</code> übergeben. Diese Methode <code>delete(id)</code> muss dazu in der <code>table.component.ts</code> definiert werden. Um die vollständige Implementierung der Methode kümmern wir uns später. Zunächst fügen wir sie nur ein, damit kein Fehler beim Übersetzen der Anwendung mehr passiert und geben einfach die übergebene <code>_id</code> auf die Konsole aus:</p>
<div class="tabbed-set" data-tabs="10:1"><input checked="checked" id="__tabbed_10_1" name="__tabbed_10" type="radio" /><label for="__tabbed_10_1">table.component.ts</label><div class="tabbed-content">
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="k">import</span> <span class="p">{</span> <span class="nx">Component</span><span class="p">,</span> <span class="nx">OnInit</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;@angular/core&#39;</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">BackendService</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;../shared/backend.service&#39;</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">Member</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;../shared/member&#39;</span><span class="p">;</span>

<span class="kd">@Component</span><span class="p">({</span>
  <span class="nx">selector</span><span class="o">:</span> <span class="s1">&#39;app-table&#39;</span><span class="p">,</span>
  <span class="nx">templateUrl</span><span class="o">:</span> <span class="s1">&#39;./table.component.html&#39;</span><span class="p">,</span>
  <span class="nx">styleUrls</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;./table.component.css&#39;</span><span class="p">]</span>
<span class="p">})</span>
<span class="k">export</span> <span class="kd">class</span> <span class="nx">TableComponent</span> <span class="k">implements</span> <span class="nx">OnInit</span> <span class="p">{</span>
  <span class="nx">members</span><span class="o">!:</span> <span class="nx">Member</span><span class="p">[];</span>
  <span class="kr">constructor</span><span class="p">(</span><span class="k">private</span> <span class="nx">bs</span>: <span class="kt">BackendService</span><span class="p">)</span> <span class="p">{</span> <span class="p">}</span>

  <span class="nx">ngOnInit</span><span class="p">()</span><span class="o">:</span> <span class="k">void</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">readAll</span><span class="p">();</span>
  <span class="p">}</span>

  <span class="nx">readAll</span><span class="p">()</span><span class="o">:</span> <span class="k">void</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">bs</span><span class="p">.</span><span class="nx">getAll</span><span class="p">().</span><span class="nx">subscribe</span><span class="p">(</span>
      <span class="p">(</span>
        <span class="nx">response</span>: <span class="kt">Member</span><span class="p">[])</span> <span class="o">=&gt;</span> <span class="p">{</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">members</span> <span class="o">=</span> <span class="nx">response</span><span class="p">;</span>
                <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">members</span><span class="p">);</span>
                <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">members</span><span class="p">;</span>
        <span class="p">},</span>
        <span class="nx">error</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">error</span><span class="p">)</span>
      <span class="p">);</span>
  <span class="p">}</span>

<span class="hll">  <span class="k">delete</span><span class="p">(</span><span class="nx">id</span>: <span class="kt">string</span><span class="p">)</span><span class="o">:</span> <span class="k">void</span> <span class="p">{</span>
</span><span class="hll">    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;id :&quot;</span> <span class="p">,</span><span class="nx">id</span> <span class="p">);</span>
</span><span class="hll">  <span class="p">}</span>
</span><span class="p">}</span>
</code></pre></div>
</td></tr></table>
</div>
</div>
<ul>
<li>Wenn Sie nun auf das <code>trash</code>-Icon klicken, wird in der Konsole Ihrer Developer-Tools die <code>_id</code> von <code>member</code> aus dieser Zeile ausgegeben. </li>
<li>Wenn Sie nun auf das <code>pencil</code>-Icon klicken, wird die <code>DetailComponent</code> aufgerufen (in der URL steht dann soetwas wie <code>http://localhost:4200/member/61b7127e13537fa69be3a21c</code>). </li>
<li>Wenn Sie nun auf das <code>envelope</code>-Icon klicken, wird Ihr E-Mail-Client aufgerufen und in der Empfängerzeile der E-Mail ist die <code>email</code> von <code>member</code> eingetragen. </li>
</ul>
<h2 id="u-pdate-detailcomponent">U-pdate -- DetailComponent<a class="headerlink" href="#u-pdate-detailcomponent" title="Permanent link">&para;</a></h2>
<p>Die <code>detail</code>-Komponente wird durch die Route <code>/member/:id</code> aufgerufen, wobei <code>:id</code> einer <code>_id</code> eines <code>member</code> entspricht. Die Idee dieser Komponente ist, den Datensatz von <code>member</code> zu ändern. Wir erstellen ein Formular, in dem die Daten von <code>member</code> eingetragen werden, so dass sie aktualisiert werden können. Werden diese neuen Daten an das Backend gesendet, wird dort die <code>update</code>-Funktion aufgerufen, d.h. wir sprechen beim Senden der Daten den Endpunkt <code>PATCH /members/:id</code> an. </p>
<p>Zunächst implementieren wir, dass der Datensatz von <code>member</code>, dessen <code>_id</code> in der Route übergeben wird, aus der Datenbank geholt wird. Dazu</p>
<ul>
<li>erweiteren wir den <code>BackendService</code> um eine Funktion <code>getOne(id)</code>, die den Endpunkt <code>GET /members/id</code> der REST-API des Backends aufruft.</li>
<li>Wir nutzen diese Funktion, um in der <code>detail.component.ts</code> die Daten dieses <code>member</code> zu speichern. Dazu gehen wir wie beim <a href="../routing/#weiter-mit-parametrisierten-routen">Routing mit parametrisierten Routen</a> gezeigt, vor. </li>
</ul>
<div class="tabbed-set" data-tabs="11:2"><input checked="checked" id="__tabbed_11_1" name="__tabbed_11" type="radio" /><label for="__tabbed_11_1">backend.service.ts</label><div class="tabbed-content">
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="k">import</span> <span class="p">{</span> <span class="nx">HttpClient</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;@angular/common/http&#39;</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">Injectable</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;@angular/core&#39;</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">Observable</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;rxjs&#39;</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">Member</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;./member&#39;</span><span class="p">;</span>

<span class="kd">@Injectable</span><span class="p">({</span>
  <span class="nx">providedIn</span><span class="o">:</span> <span class="s1">&#39;root&#39;</span>
<span class="p">})</span>
<span class="k">export</span> <span class="kd">class</span> <span class="nx">BackendService</span> <span class="p">{</span>
  <span class="nx">baseUrl</span> <span class="o">=</span> <span class="s1">&#39;http://localhost:3000/members&#39;</span><span class="p">;</span>

  <span class="kr">constructor</span><span class="p">(</span><span class="k">private</span> <span class="nx">http</span>: <span class="kt">HttpClient</span><span class="p">)</span> <span class="p">{</span> <span class="p">}</span>

  <span class="nx">getAll</span><span class="p">()</span><span class="o">:</span> <span class="nx">Observable</span><span class="o">&lt;</span><span class="nx">Member</span><span class="p">[]</span><span class="o">&gt;</span><span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">http</span><span class="p">.</span><span class="nx">get</span><span class="o">&lt;</span><span class="nx">Member</span><span class="p">[]</span><span class="o">&gt;</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">baseUrl</span><span class="p">);</span>
  <span class="p">}</span>

<span class="hll">  <span class="nx">getOne</span><span class="p">(</span><span class="nx">id</span>: <span class="kt">string</span><span class="p">)</span><span class="o">:</span> <span class="nx">Observable</span><span class="o">&lt;</span><span class="nx">Member</span><span class="o">&gt;</span><span class="p">{</span>
</span><span class="hll">    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">http</span><span class="p">.</span><span class="nx">get</span><span class="o">&lt;</span><span class="nx">Member</span><span class="o">&gt;</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">baseUrl</span> <span class="o">+</span> <span class="s1">&#39;/&#39;</span> <span class="o">+</span> <span class="nx">id</span><span class="p">);</span>
</span><span class="hll">  <span class="p">}</span>
</span><span class="p">}</span>
</code></pre></div>
</td></tr></table>
</div>
<input id="__tabbed_11_2" name="__tabbed_11" type="radio" /><label for="__tabbed_11_2">detail.component.ts</label><div class="tabbed-content">
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="k">import</span> <span class="p">{</span> <span class="nx">Component</span><span class="p">,</span> <span class="nx">OnInit</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;@angular/core&#39;</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">ActivatedRoute</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;@angular/router&#39;</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">BackendService</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;../shared/backend.service&#39;</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">Member</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;../shared/member&#39;</span><span class="p">;</span>

<span class="kd">@Component</span><span class="p">({</span>
  <span class="nx">selector</span><span class="o">:</span> <span class="s1">&#39;app-detail&#39;</span><span class="p">,</span>
  <span class="nx">templateUrl</span><span class="o">:</span> <span class="s1">&#39;./detail.component.html&#39;</span><span class="p">,</span>
  <span class="nx">styleUrls</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;./detail.component.css&#39;</span><span class="p">]</span>
<span class="p">})</span>
<span class="k">export</span> <span class="kd">class</span> <span class="nx">DetailComponent</span> <span class="k">implements</span> <span class="nx">OnInit</span> <span class="p">{</span>
<span class="hll">  <span class="nx">id</span>: <span class="kt">string</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">;</span>
</span><span class="hll">  <span class="nx">member</span><span class="o">!:</span> <span class="nx">Member</span><span class="p">;</span>
</span>
  <span class="kr">constructor</span><span class="p">(</span>
<span class="hll">    <span class="k">private</span> <span class="nx">route</span>: <span class="kt">ActivatedRoute</span><span class="p">,</span>
</span><span class="hll">    <span class="k">private</span> <span class="nx">bs</span>: <span class="kt">BackendService</span>
</span>  <span class="p">)</span> <span class="p">{</span> <span class="p">}</span>

  <span class="nx">ngOnInit</span><span class="p">()</span><span class="o">:</span> <span class="k">void</span> <span class="p">{</span>
<span class="hll">    <span class="k">this</span><span class="p">.</span><span class="nx">id</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">route</span><span class="p">.</span><span class="nx">snapshot</span><span class="p">.</span><span class="nx">paramMap</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">)</span> <span class="o">||</span> <span class="s1">&#39;&#39;</span><span class="p">;</span>
</span><span class="hll">    <span class="k">this</span><span class="p">.</span><span class="nx">readOne</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">id</span><span class="p">);</span>
</span>  <span class="p">}</span>

<span class="hll">  <span class="nx">readOne</span><span class="p">(</span><span class="nx">id</span>: <span class="kt">string</span><span class="p">)</span><span class="o">:</span> <span class="k">void</span> <span class="p">{</span>
</span><span class="hll">      <span class="k">this</span><span class="p">.</span><span class="nx">bs</span><span class="p">.</span><span class="nx">getOne</span><span class="p">(</span><span class="nx">id</span><span class="p">).</span><span class="nx">subscribe</span><span class="p">(</span>
</span><span class="hll">      <span class="p">(</span>
</span><span class="hll">        <span class="nx">response</span>: <span class="kt">Member</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span><span class="hll">                <span class="k">this</span><span class="p">.</span><span class="nx">member</span> <span class="o">=</span> <span class="nx">response</span><span class="p">;</span>
</span><span class="hll">                <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">member</span><span class="p">);</span>
</span><span class="hll">                <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">member</span><span class="p">;</span>
</span><span class="hll">        <span class="p">},</span>
</span><span class="hll">        <span class="nx">error</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">error</span><span class="p">)</span>
</span><span class="hll">      <span class="p">);</span>
</span><span class="hll">  <span class="p">}</span>
</span>
<span class="p">}</span>
</code></pre></div>
</td></tr></table>
</div>
</div>
<p>Wenn wir nun die <code>detail</code>-Komponente durch Klick auf das <code>pencil</code>-Icon in der Tabelle aufrufen, wird beim Initialisieren der Komponente die Variable <code>member</code> mit den passenden Einträgen aus der Datenbank befüllt und auf der Konsole in den Developertools angezeigt. Wir nutzen erneut die <code>subscribe()</code>-Funktion des <code>Observable</code>, das durch die Funktion <code>getOne(id)</code> des <code>BackendService</code> erzeugt wird.  </p>
<p>Um die Daten von <code>member</code> ändern zu können, laden wir diese in ein Formular. Der folgende Abschnitt diskutiert die Möglichkeiten der Formularerstellung in Angular.</p>
<h2 id="formulare-in-angular">Formulare in Angular<a class="headerlink" href="#formulare-in-angular" title="Permanent link">&para;</a></h2>
<p>Formulare werden verwendet, um Nutzereingaben zu ermöglichen und die eingegebenen Daten zu verwalten, sie z.B. in einer Datenbank zu speichern. In Angular gibt es zwei verschiedene Ansätze, Forumlare zu erstellen:</p>
<ul>
<li><strong>reaktive Formulare</strong> werden in der TypeScript-Klasse konzipiert und basieren auf einem unveränderlichen Datenmodell. Sie sind leichter zu skalieren als <em>Template-basierte Formulare</em> und besser wiederzuverwenden. Sie sind prinzipiell den <em>Template-basierten Formularen</em> vorzuziehen, außer dass Formular ist sehr einfach und besteht z.B. nur aus einem einzigen Eingabefeld.</li>
<li><strong>Template-basierte Formulare</strong> basieren auf Direktiven im HTML. Sie sind sehr einfach zu erstellen (direkt im HTML), können aber weniger einfach evaluiert und getestet werden und sind für strukturierte (verschachtelte) Datenmodelle ungeeignet. </li>
</ul>
<p>Für weitere Informationen zu Formularen in Angular siehe <a href="https://angular.io/guide/forms-overview#introduction-to-forms-in-angular">hier</a>. </p>
<h3 id="reactive-forms-in-componentts">Reactive Forms in <code>*.component.ts</code><a class="headerlink" href="#reactive-forms-in-componentts" title="Permanent link">&para;</a></h3>
<p>Wir verwenden hier <em>reaktive Formulare</em>. Die beiden wesentlichen TypeScript-Klassen bei Formularen sind</p>
<ul>
<li><code>FormControl</code> für ein einzelnes Steuerelement (z.B. ein <code>input</code> oder ein <code>radio</code>Button) und</li>
<li><code>FormGroup</code> für eine zusammenhängende Menge von Steuerlementen (einem Formular). </li>
</ul>
<p>Um <em>reaktive Formulare</em> zu verwenden, ist es <strong>wichtig</strong>, das Modul <code>ReactiveFormsModule</code> in die <code>app.module.ts</code> zu importieren!</p>
<div class="tabbed-set" data-tabs="12:1"><input checked="checked" id="__tabbed_12_1" name="__tabbed_12" type="radio" /><label for="__tabbed_12_1">app.module.ts</label><div class="tabbed-content">
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="k">import</span> <span class="p">{</span> <span class="nx">NgModule</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;@angular/core&#39;</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">BrowserModule</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;@angular/platform-browser&#39;</span><span class="p">;</span>

<span class="k">import</span> <span class="p">{</span> <span class="nx">AppRoutingModule</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;./app-routing.module&#39;</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">AppComponent</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;./app.component&#39;</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">NavComponent</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;./nav/nav.component&#39;</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">FooterComponent</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;./footer/footer.component&#39;</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">TableComponent</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;./table/table.component&#39;</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">BrowserAnimationsModule</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;@angular/platform-browser/animations&#39;</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">HomeComponent</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;./home/home.component&#39;</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">HttpClientModule</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;@angular/common/http&#39;</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">DetailComponent</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;./detail/detail.component&#39;</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">CreateComponent</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;./create/create.component&#39;</span><span class="p">;</span>
<span class="hll"><span class="k">import</span> <span class="p">{</span> <span class="nx">ReactiveFormsModule</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;@angular/forms&#39;</span><span class="p">;</span>
</span>
<span class="kd">@NgModule</span><span class="p">({</span>
  <span class="nx">declarations</span><span class="o">:</span> <span class="p">[</span>
    <span class="nx">AppComponent</span><span class="p">,</span>
    <span class="nx">NavComponent</span><span class="p">,</span>
    <span class="nx">FooterComponent</span><span class="p">,</span>
    <span class="nx">TableComponent</span><span class="p">,</span>
    <span class="nx">HomeComponent</span><span class="p">,</span>
    <span class="nx">DetailComponent</span><span class="p">,</span>
    <span class="nx">CreateComponent</span>
  <span class="p">],</span>
  <span class="nx">imports</span><span class="o">:</span> <span class="p">[</span>
    <span class="nx">BrowserModule</span><span class="p">,</span>
    <span class="nx">AppRoutingModule</span><span class="p">,</span>
    <span class="nx">BrowserAnimationsModule</span><span class="p">,</span>
    <span class="nx">HttpClientModule</span><span class="p">,</span>
<span class="hll">    <span class="nx">ReactiveFormsModule</span>
</span>  <span class="p">],</span>
  <span class="nx">providers</span><span class="o">:</span> <span class="p">[],</span>
  <span class="nx">bootstrap</span><span class="o">:</span> <span class="p">[</span><span class="nx">AppComponent</span><span class="p">]</span>
<span class="p">})</span>
<span class="k">export</span> <span class="kd">class</span> <span class="nx">AppModule</span> <span class="p">{</span> <span class="p">}</span>
</code></pre></div>
</td></tr></table>
</div>
</div>
<p>Wenn das vergessen wird, sind die Fehlerausgaben wirklich nicht zielführend und es ist recht schwierig, diesen Fehler zu finden! <em>Reactive Forms</em> werden, im Gegensatz zu den <em>template-basierten Formularen</em>, hauptsächlich in der TypeScript-Klasse erstellt. Wir passen deshalb unsere <code>detail.component.ts</code> wie folgt an:</p>
<div class="tabbed-set" data-tabs="13:1"><input checked="checked" id="__tabbed_13_1" name="__tabbed_13" type="radio" /><label for="__tabbed_13_1">detail.component.ts</label><div class="tabbed-content">
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="k">import</span> <span class="p">{</span> <span class="nx">Component</span><span class="p">,</span> <span class="nx">OnInit</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;@angular/core&#39;</span><span class="p">;</span>
<span class="hll"><span class="k">import</span> <span class="p">{</span> <span class="nx">FormBuilder</span><span class="p">,</span> <span class="nx">FormGroup</span><span class="p">,</span> <span class="nx">Validators</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;@angular/forms&#39;</span><span class="p">;</span>
</span><span class="k">import</span> <span class="p">{</span> <span class="nx">ActivatedRoute</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;@angular/router&#39;</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">BackendService</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;../shared/backend.service&#39;</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">Member</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;../shared/member&#39;</span><span class="p">;</span>

<span class="kd">@Component</span><span class="p">({</span>
  <span class="nx">selector</span><span class="o">:</span> <span class="s1">&#39;app-detail&#39;</span><span class="p">,</span>
  <span class="nx">templateUrl</span><span class="o">:</span> <span class="s1">&#39;./detail.component.html&#39;</span><span class="p">,</span>
  <span class="nx">styleUrls</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;./detail.component.css&#39;</span><span class="p">]</span>
<span class="p">})</span>
<span class="k">export</span> <span class="kd">class</span> <span class="nx">DetailComponent</span> <span class="k">implements</span> <span class="nx">OnInit</span> <span class="p">{</span>
  <span class="nx">id</span>: <span class="kt">string</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">;</span>
  <span class="nx">member</span><span class="o">!:</span> <span class="nx">Member</span><span class="p">;</span>
<span class="hll">  <span class="nx">form</span>: <span class="kt">FormGroup</span><span class="p">;</span>
</span>
  <span class="kr">constructor</span><span class="p">(</span>
    <span class="k">private</span> <span class="nx">route</span>: <span class="kt">ActivatedRoute</span><span class="p">,</span>
    <span class="k">private</span> <span class="nx">bs</span>: <span class="kt">BackendService</span><span class="p">,</span>
<span class="hll">    <span class="k">private</span> <span class="nx">fb</span>: <span class="kt">FormBuilder</span><span class="p">,</span>
</span>  <span class="p">)</span>
  <span class="p">{</span>
<span class="hll">    <span class="k">this</span><span class="p">.</span><span class="nx">form</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">fb</span><span class="p">.</span><span class="nx">group</span><span class="p">(</span>
</span><span class="hll">      <span class="p">{</span>
</span><span class="hll">        <span class="nx">forenameControl</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="nx">Validators</span><span class="p">.</span><span class="nx">required</span><span class="p">],</span>
</span><span class="hll">        <span class="nx">surnameControl</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="nx">Validators</span><span class="p">.</span><span class="nx">required</span><span class="p">],</span>
</span><span class="hll">        <span class="nx">emailControl</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="nx">Validators</span><span class="p">.</span><span class="nx">required</span><span class="p">],</span>
</span><span class="hll">      <span class="p">}</span>
</span><span class="hll">    <span class="p">);</span>
</span>  <span class="p">}</span>

  <span class="nx">ngOnInit</span><span class="p">()</span><span class="o">:</span> <span class="k">void</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">id</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">route</span><span class="p">.</span><span class="nx">snapshot</span><span class="p">.</span><span class="nx">paramMap</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">)</span> <span class="o">||</span> <span class="s1">&#39;&#39;</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">readOne</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">id</span><span class="p">);</span>
<span class="hll">    <span class="k">this</span><span class="p">.</span><span class="nx">form</span><span class="p">.</span><span class="nx">patchValue</span><span class="p">({</span>
</span><span class="hll">      <span class="nx">forenameControl</span>: <span class="kt">this.member?.forename</span><span class="p">,</span>
</span><span class="hll">      <span class="nx">surnameControl</span>: <span class="kt">this.member?.surname</span><span class="p">,</span>
</span><span class="hll">      <span class="nx">emailControl</span>: <span class="kt">this.member?.email</span>
</span><span class="hll">    <span class="p">});</span>
</span>  <span class="p">}</span>

  <span class="nx">readOne</span><span class="p">(</span><span class="nx">id</span>: <span class="kt">string</span><span class="p">)</span><span class="o">:</span> <span class="k">void</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">bs</span><span class="p">.</span><span class="nx">getOne</span><span class="p">(</span><span class="nx">id</span><span class="p">).</span><span class="nx">subscribe</span><span class="p">(</span>
      <span class="p">(</span>
        <span class="nx">response</span>: <span class="kt">Member</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">member</span> <span class="o">=</span> <span class="nx">response</span><span class="p">;</span>
                <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">member</span><span class="p">);</span>
                <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">member</span><span class="p">;</span>
        <span class="p">},</span>
        <span class="nx">error</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">error</span><span class="p">)</span>
      <span class="p">);</span>
  <span class="p">}</span>

  <span class="nx">update</span><span class="p">()</span><span class="o">:</span> <span class="k">void</span> <span class="p">{</span>

  <span class="p">}</span>

  <span class="nx">cancel</span><span class="p">()</span><span class="o">:</span> <span class="k">void</span> <span class="p">{</span>

  <span class="p">}</span>

<span class="p">}</span>
</code></pre></div>
</td></tr></table>
</div>
</div>
<p>Wir erstellen uns eine Referenzvariable <code>form</code> vom Typ <code>FormGroup</code> (Zeile <code>15</code>). Diese Variable zeigt auf unser Formular. Um das Formular zu erstellen, nutzen wir den <code>FormBuilder</code>. Diesen binden wir per <em>dependency injection</em>  in unsere Klasse ein (Zeile <code>20</code>). In den Zeilen <code>23-29</code> wird das Formular erzeugt. Es besteht aus drei Eingabefeldern, deren Eingabe jeweils validiert werden soll. Dazu werden <a href="https://angular.io/guide/form-validation#validating-input-in-reactive-forms">Validators</a> verwendet, ein vordefinierter Service von Angular. </p>
<p>In den Zeilen <code>35-39</code> werden den Eingabefeldern bereits Werte zugewiesen. Diese Werte werden <code>member</code> entnommen, welches durch die <code>getOne(id)</code>-Funktion des <code>BackendService</code> befüllt wurde. Um die Werte in das Formular einzutragen, bietet die Klasse <code>FormGroup</code> zwei Funktionen an:</p>
<ul>
<li><code>setValue()</code> - setzt für <strong>alle</strong> <code>FormControl</code>-Elemente innerhalb der <code>FormGroup</code> einen Wert (<code>value</code>)</li>
<li><code>patchValue()</code> - kann allen oder <strong>bestimmten</strong> (einzelnen) <code>FormControl</code>-Elementen einen Wert (<code>value</code>) zuweisen. </li>
</ul>
<p>Wir verwenden <code>patchValue()</code>, Sie können aber auch <code>setValue()</code> ausprobieren. Beachten Sie auch das <code>?</code> hinter der <code>member</code>-Variablen bei den Wertzuweisungen. Es handelt sich dabei um den <em>safe navigation operator</em>. </p>
<h4 id="safe-navigation-operator">Safe navigation operator<a class="headerlink" href="#safe-navigation-operator" title="Permanent link">&para;</a></h4>
<p>Um zu vermeiden, dass versucht wird, auf einen Wert zuzugreifen, der (noch) gar nicht existiert (<code>undefined</code> ist), kann der sogenannte <em>safe navigation operator</em> verwendet werden. Das Prinzip dieses Operators entspricht einer <code>*ngIf</code>-Direktive. Erst wenn der Wert ungleich <code>undefined</code> ist, wird er dargestellt. Die Syntax des <em>safe navigation operators</em>  ist ein <code>?</code>:</p>
<blockquote>
<p><code>objekt?.eigenschaft</code></p>
</blockquote>
<p>Solange <code>objekt</code> noch <code>undefined</code> ist, wird nicht auf die (noch nicht existierende) <code>eigenschaft</code> zugegriffen. Wir verwenden den <em>safe navigation operator</em> in der <code>detail.component.ts</code> ein:</p>
<div class="tabbed-set" data-tabs="14:1"><input checked="checked" id="__tabbed_14_1" name="__tabbed_14" type="radio" /><label for="__tabbed_14_1">detail.component.ts (Auszug mit safe navigation oprator)</label><div class="tabbed-content"></div>
</div>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>35
36
37
38
39</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code>      this.form.patchValue({
        forenameControl: this.member?.forename,
        surnameControl: this.member?.surname,
        emailControl: this.member?.email
      });
</code></pre></div>
</td></tr></table>
<p>Jetzt wird zunächst geprüft, ob <code>member</code> überhaupt definiert ist (also nicht <code>undefined</code>). Wenn nicht, wird gar nicht erst auf die Eigenschaft (z.B. <code>forename</code>) zugegriffen. Ohne den Operator erhalten Sie eine Fehlermeldung, da z.B. der Zugriff <code>undefined.forename</code> versucht würde.  </p>
<h3 id="reactive-forms-in-componenthtml">Reactive Forms in <code>*.component.html</code><a class="headerlink" href="#reactive-forms-in-componenthtml" title="Permanent link">&para;</a></h3>
<p>Das Formular existiert nun (als TypeScript-Objekt). Nun binden wir es in die <code>detail.component.html</code> ein. </p>
<div class="tabbed-set" data-tabs="15:1"><input checked="checked" id="__tabbed_15_1" name="__tabbed_15" type="radio" /><label for="__tabbed_15_1">detail.component.html</label><div class="tabbed-content">
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="p">&lt;</span><span class="nt">main</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;d-flex min-vh-100&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">fieldset</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;container  mt-5&quot;</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">legend</span> <span class="err">*</span><span class="na">ngIf</span><span class="o">=</span><span class="s">&quot;member&quot;</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;mb-4&quot;</span><span class="p">&gt;</span>Eintrag von {{ member.forename }} {{ member.surname }} aktualisieren
        <span class="p">&lt;/</span><span class="nt">legend</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">legend</span> <span class="err">*</span><span class="na">ngIf</span><span class="o">=</span><span class="s">&quot;!member&quot;</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;mb-4&quot;</span><span class="p">&gt;</span>Eintrag aktualisieren<span class="p">&lt;/</span><span class="nt">legend</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">form</span> <span class="err">[</span><span class="na">formGroup</span><span class="err">]=&quot;</span><span class="na">form</span><span class="err">&quot;</span> <span class="err">(</span><span class="na">ngSubmit</span><span class="err">)=&quot;</span><span class="na">update</span><span class="err">()&quot;</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;form-group row&quot;</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">label</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;col-2 col-form-label&quot;</span> <span class="na">for</span><span class="o">=</span><span class="s">&quot;forename&quot;</span><span class="p">&gt;</span>Vorname<span class="p">&lt;/</span><span class="nt">label</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;text&quot;</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;col-10 form-control&quot;</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;forename&quot;</span> <span class="na">placeholder</span><span class="o">=</span><span class="s">&quot;Vorname&quot;</span> <span class="na">formControlName</span><span class="o">=</span><span class="s">&quot;forenameControl&quot;</span><span class="p">&gt;</span>
            <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;form-group row&quot;</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">label</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;col-2 col-form-label&quot;</span> <span class="na">for</span><span class="o">=</span><span class="s">&quot;surname&quot;</span><span class="p">&gt;</span>Nachname<span class="p">&lt;/</span><span class="nt">label</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;text&quot;</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;col-10 form-control&quot;</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;surname&quot;</span> <span class="na">placeholder</span><span class="o">=</span><span class="s">&quot;Nachname&quot;</span> <span class="na">formControlName</span><span class="o">=</span><span class="s">&quot;surnameControl&quot;</span><span class="p">&gt;</span>
            <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;form-group row&quot;</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">label</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;col-2 col-form-label&quot;</span> <span class="na">for</span><span class="o">=</span><span class="s">&quot;email&quot;</span><span class="p">&gt;</span>E-Mail<span class="p">&lt;/</span><span class="nt">label</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;email&quot;</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;col-10 form-control&quot;</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;email&quot;</span> <span class="na">placeholder</span><span class="o">=</span><span class="s">&quot;E-Mail&quot;</span> <span class="na">formControlName</span><span class="o">=</span><span class="s">&quot;emailControl&quot;</span><span class="p">&gt;</span>

            <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;form-group row  justify-content-end&quot;</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">button</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;submit&quot;</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;col-4 btn btn-secondary&quot;</span><span class="p">&gt;</span>Aktualisieren<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;col-2&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">button</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;button&quot;</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;col-4 btn btn-secondary&quot;</span> <span class="err">(</span><span class="na">click</span><span class="err">)=&quot;</span><span class="na">cancel</span><span class="err">()</span> <span class="err">&quot;</span><span class="p">&gt;</span>Abbrechen<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
            <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
        <span class="p">&lt;/</span><span class="nt">form</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">fieldset</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">main</span><span class="p">&gt;</span>
</code></pre></div>
</td></tr></table>
</div>
</div>
<p>Es entsteht folgende Ansicht:</p>
<p><img alt="formular" src="../files/234_formular.png" /></p>
<p>Um sich an das <code>submit</code>-Ereignis anzumelden, wird für das <code>&lt;form&gt;</code>-Element <code>(ngSubmit)</code> hinzugefügt und als dessen Wert die Funktion, die aufgerufen werden soll, beim Absenden des Formulars - hier die Funktion <code>update()</code> (die wir gleich noch in <code>detail.component.ts</code> implementieren). Für den <code>Abbrechen</code>-Button melden wir uns an das <code>click</code>-Ereignis mithilfe von <code>(click)</code> und der Angabe der Funktion, die ausgeführt werden soll (hier <code>cancel()</code>) an. </p>
<p>Das <em>reaktive Formular</em> <code>form</code>, das wir in der <code>detail.component.ts</code> erzeugt haben, wird mittels <code>[formGroup]="form"</code> als <em>property binding</em> dem <code>&lt;form&gt;</code>-Element übergeben. Im derzeitigen Stand der Implementierung von <code>detail.component.ts</code> erscheinen jedoch die Werte noch nicht in den Eingabefeldern. Das wollen wir uns zunächst einmal genauer ansehen.</p>
<h3 id="asynchrones-abarbeiten">Asynchrones Abarbeiten<a class="headerlink" href="#asynchrones-abarbeiten" title="Permanent link">&para;</a></h3>
<p>Derzeit befüllen wir die Eingabefelder des Formulars mit Werten wir folgt (siehe oben <code>detailcomponent.ts</code>):</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code>      <span class="nx">ngOnInit</span><span class="p">()</span><span class="o">:</span> <span class="k">void</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">id</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">route</span><span class="p">.</span><span class="nx">snapshot</span><span class="p">.</span><span class="nx">paramMap</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">)</span> <span class="o">||</span> <span class="s1">&#39;&#39;</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">readOne</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">id</span><span class="p">);</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">form</span><span class="p">.</span><span class="nx">patchValue</span><span class="p">({</span>
          <span class="nx">forenameControl</span>: <span class="kt">this.member?.forename</span><span class="p">,</span>
          <span class="nx">surnameControl</span>: <span class="kt">this.member?.surname</span><span class="p">,</span>
          <span class="nx">emailControl</span>: <span class="kt">this.member?.email</span>
        <span class="p">});</span>
      <span class="p">}</span>

      <span class="nx">readOne</span><span class="p">(</span><span class="nx">id</span>: <span class="kt">string</span><span class="p">)</span><span class="o">:</span> <span class="k">void</span> <span class="p">{</span>
          <span class="k">this</span><span class="p">.</span><span class="nx">bs</span><span class="p">.</span><span class="nx">getOne</span><span class="p">(</span><span class="nx">id</span><span class="p">).</span><span class="nx">subscribe</span><span class="p">(</span>
          <span class="p">(</span>
            <span class="nx">response</span>: <span class="kt">Member</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
                    <span class="k">this</span><span class="p">.</span><span class="nx">member</span> <span class="o">=</span> <span class="nx">response</span><span class="p">;</span>
                    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">member</span><span class="p">);</span>
                    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">member</span><span class="p">;</span>
            <span class="p">},</span>
            <span class="nx">error</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">error</span><span class="p">)</span>
          <span class="p">);</span>
      <span class="p">}</span>
</code></pre></div>
</td></tr></table>
<p>Bei der Initialisierung der Komponente wird die <code>readOne(id)</code>-Funktion aufgerufen (Zeile <code>34</code>). In dieser Funktion wird <code>this.member</code> mit Werten befüllt, die durch die <code>getOne(id)</code>-Funktion des <code>BackendService</code> geliefert werden (Zeile <code>46</code>). Die Werte von <code>this.member</code> werden nach Aufruf der <code>readOne(id)</code>-Funktion verwendet, um den Eingabefeldern Werte zuzuweisen (Zeilen <code>36-38</code>). Allerdings erfolgt die Abarbeitung der <code>readOne(id)</code>-Funktion und das Befüllen der Eingabefelder <strong>asynchron</strong>, d.h. <em>nebenläufig</em>. Es kann sein (und hier ist es so), dass <code>member</code> überhaupt noch keine Werte hat, wenn diese beim Befüllen der Eingabefelder verwendet werden sollen. </p>
<p>Dies ist eigentlich eine typische Anwendung für <a href="../promises/#promises">Promises</a>. Hier benötigen wir dieses Konzept aber gar nicht. Wir müssen nur dafür sorgen, dass die Eingabefelder erst dann befüllt werden, wenn <code>member</code> einen Wert hat. Wir schieben das Befüllen der Eingabefelder deshalb in die <code>subscribe()</code>-Funktion des <em>Observables</em> <code>getOne(id)</code>:</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code>    <span class="nx">ngOnInit</span><span class="p">()</span><span class="o">:</span> <span class="k">void</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">id</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">route</span><span class="p">.</span><span class="nx">snapshot</span><span class="p">.</span><span class="nx">paramMap</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">)</span> <span class="o">||</span> <span class="s1">&#39;&#39;</span><span class="p">;</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">readOne</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">id</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="nx">readOne</span><span class="p">(</span><span class="nx">id</span>: <span class="kt">string</span><span class="p">)</span><span class="o">:</span> <span class="k">void</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">bs</span><span class="p">.</span><span class="nx">getOne</span><span class="p">(</span><span class="nx">id</span><span class="p">).</span><span class="nx">subscribe</span><span class="p">(</span>
        <span class="p">(</span>
          <span class="nx">response</span>: <span class="kt">Member</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
                  <span class="k">this</span><span class="p">.</span><span class="nx">member</span> <span class="o">=</span> <span class="nx">response</span><span class="p">;</span>
                  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">member</span><span class="p">);</span>

<span class="hll">                  <span class="k">this</span><span class="p">.</span><span class="nx">form</span><span class="p">.</span><span class="nx">patchValue</span><span class="p">({</span>
</span><span class="hll">                    <span class="nx">forenameControl</span>: <span class="kt">this.member?.forename</span><span class="p">,</span>
</span><span class="hll">                    <span class="nx">surnameControl</span>: <span class="kt">this.member?.surname</span><span class="p">,</span>
</span><span class="hll">                    <span class="nx">emailControl</span>: <span class="kt">this.member?.email</span>
</span><span class="hll">                  <span class="p">});</span>
</span>
                  <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">member</span><span class="p">;</span>
          <span class="p">},</span>
          <span class="nx">error</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">error</span><span class="p">)</span>
        <span class="p">);</span>
    <span class="p">}</span>
</code></pre></div>
</td></tr></table>
<p>Nun ist das Formular auch vorbefüllt.</p>
<h3 id="submit-und-cancel-ereignisbehandlung">Submit- und Cancel-Ereignisbehandlung<a class="headerlink" href="#submit-und-cancel-ereignisbehandlung" title="Permanent link">&para;</a></h3>
<p>Wir implementieren nun die Funktionen <code>cancel()</code> und <code>update()</code>. Die <code>cancel()</code>-Funktion wird durch das <code>click</code>-Ereignis des <code>Abbrechen</code>-Buttons aufgerufen und die <code>update()</code>-Funktion durch den <code>submit</code>-Button <code>Aktualisieren</code> (siehe im Formular <code>(ngSubmit)="update()"</code>). Wenn wir auf <code>Abbrechen</code> klicken, dann wollen wir wieder zur Tabellenansicht zurück. Das erreichen wir mit dem Service <code>Location</code> aus <code>@angular/common</code>, der uns z.B. die <code>back()</code>-Funktion zur Verfügung stellt:</p>
<div class="tabbed-set" data-tabs="16:1"><input checked="checked" id="__tabbed_16_1" name="__tabbed_16" type="radio" /><label for="__tabbed_16_1">detail.component.ts</label><div class="tabbed-content">
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="hll"><span class="k">import</span> <span class="p">{</span> <span class="nx">Location</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;@angular/common&#39;</span><span class="p">;</span>
</span><span class="k">import</span> <span class="p">{</span> <span class="nx">Component</span><span class="p">,</span> <span class="nx">OnInit</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;@angular/core&#39;</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">FormBuilder</span><span class="p">,</span> <span class="nx">FormGroup</span><span class="p">,</span> <span class="nx">Validators</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;@angular/forms&#39;</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">ActivatedRoute</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;@angular/router&#39;</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">BackendService</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;../shared/backend.service&#39;</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">Member</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;../shared/member&#39;</span><span class="p">;</span>

<span class="kd">@Component</span><span class="p">({</span>
  <span class="nx">selector</span><span class="o">:</span> <span class="s1">&#39;app-detail&#39;</span><span class="p">,</span>
  <span class="nx">templateUrl</span><span class="o">:</span> <span class="s1">&#39;./detail.component.html&#39;</span><span class="p">,</span>
  <span class="nx">styleUrls</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;./detail.component.css&#39;</span><span class="p">]</span>
<span class="p">})</span>
<span class="k">export</span> <span class="kd">class</span> <span class="nx">DetailComponent</span> <span class="k">implements</span> <span class="nx">OnInit</span> <span class="p">{</span>
  <span class="nx">id</span>: <span class="kt">string</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">;</span>
  <span class="nx">member</span><span class="o">!:</span> <span class="nx">Member</span><span class="p">;</span>
  <span class="nx">form</span>: <span class="kt">FormGroup</span><span class="p">;</span>

  <span class="kr">constructor</span><span class="p">(</span>
    <span class="k">private</span> <span class="nx">route</span>: <span class="kt">ActivatedRoute</span><span class="p">,</span>
    <span class="k">private</span> <span class="nx">bs</span>: <span class="kt">BackendService</span><span class="p">,</span>
    <span class="k">private</span> <span class="nx">fb</span>: <span class="kt">FormBuilder</span><span class="p">,</span>
<span class="hll">    <span class="k">private</span> <span class="nx">location</span>: <span class="kt">Location</span>
</span>  <span class="p">)</span>
  <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">form</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">fb</span><span class="p">.</span><span class="nx">group</span><span class="p">(</span>
      <span class="p">{</span>
        <span class="nx">forenameControl</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="nx">Validators</span><span class="p">.</span><span class="nx">required</span><span class="p">],</span>
        <span class="nx">surnameControl</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="nx">Validators</span><span class="p">.</span><span class="nx">required</span><span class="p">],</span>
        <span class="nx">emailControl</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="nx">Validators</span><span class="p">.</span><span class="nx">required</span><span class="p">],</span>
      <span class="p">}</span>
    <span class="p">);</span>
  <span class="p">}</span>

  <span class="nx">ngOnInit</span><span class="p">()</span><span class="o">:</span> <span class="k">void</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">id</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">route</span><span class="p">.</span><span class="nx">snapshot</span><span class="p">.</span><span class="nx">paramMap</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">)</span> <span class="o">||</span> <span class="s1">&#39;&#39;</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">readOne</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">id</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="nx">readOne</span><span class="p">(</span><span class="nx">id</span>: <span class="kt">string</span><span class="p">)</span><span class="o">:</span> <span class="k">void</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">bs</span><span class="p">.</span><span class="nx">getOne</span><span class="p">(</span><span class="nx">id</span><span class="p">).</span><span class="nx">subscribe</span><span class="p">(</span>
      <span class="p">(</span>
        <span class="nx">response</span>: <span class="kt">Member</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">member</span> <span class="o">=</span> <span class="nx">response</span><span class="p">;</span>
                <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">member</span><span class="p">);</span>

                <span class="k">this</span><span class="p">.</span><span class="nx">form</span><span class="p">.</span><span class="nx">patchValue</span><span class="p">({</span>
                  <span class="nx">forenameControl</span>: <span class="kt">this.member?.forename</span><span class="p">,</span>
                  <span class="nx">surnameControl</span>: <span class="kt">this.member?.surname</span><span class="p">,</span>
                  <span class="nx">emailControl</span>: <span class="kt">this.member?.email</span>
                <span class="p">});</span>

                <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">member</span><span class="p">;</span>
        <span class="p">},</span>
        <span class="nx">error</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">error</span><span class="p">)</span>
      <span class="p">);</span>
  <span class="p">}</span>

  <span class="nx">update</span><span class="p">()</span><span class="o">:</span> <span class="k">void</span> <span class="p">{</span>

  <span class="p">}</span>

  <span class="nx">cancel</span><span class="p">()</span><span class="o">:</span> <span class="k">void</span> <span class="p">{</span>
<span class="hll">    <span class="k">this</span><span class="p">.</span><span class="nx">location</span><span class="p">.</span><span class="nx">back</span><span class="p">();</span>
</span>  <span class="p">}</span>

<span class="p">}</span>
</code></pre></div>
</td></tr></table>
</div>
</div>
<p>Wenn wir nun auf <code>Abbrechen</code> klicken, dann haben wir das gleiche Verhalten, als würden wir im Browser auf <code>zurück</code> (oder <code>back</code>) klicken. </p>
<p>Wenn jedoch der <code>Aktualisieren</code>-Button gedrückt wird, dann soll der Datensatz in der Datenbank aktualisiert werden, d.h. es wird der Endpunkt <code>PATCH /members/:id</code> der REST-API angesprochen, wobei <code>:id</code> den Wert der <code>_id</code> des aktuell bearbeiteten Datensatzes erhält und die Werte aus dem Formular im <code>body</code> des <code>request</code>-Objektes übergeben werden. Dazu erweiteren wir zunächst den <code>BackendService</code> um eine entsprechende Funktion, die wir dort ebenfalls <code>update()</code> nennen und der die <code>id</code> sowie die Daten aus dem Formular übergeben werden.</p>
<div class="tabbed-set" data-tabs="17:1"><input checked="checked" id="__tabbed_17_1" name="__tabbed_17" type="radio" /><label for="__tabbed_17_1">backend.service.ts</label><div class="tabbed-content">
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="k">import</span> <span class="p">{</span> <span class="nx">HttpClient</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;@angular/common/http&#39;</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">Injectable</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;@angular/core&#39;</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">Observable</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;rxjs&#39;</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">Member</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;./member&#39;</span><span class="p">;</span>

<span class="kd">@Injectable</span><span class="p">({</span>
  <span class="nx">providedIn</span><span class="o">:</span> <span class="s1">&#39;root&#39;</span>
<span class="p">})</span>
<span class="k">export</span> <span class="kd">class</span> <span class="nx">BackendService</span> <span class="p">{</span>
  <span class="nx">baseUrl</span> <span class="o">=</span> <span class="s1">&#39;http://localhost:3000/members&#39;</span><span class="p">;</span>

  <span class="kr">constructor</span><span class="p">(</span><span class="k">private</span> <span class="nx">http</span>: <span class="kt">HttpClient</span><span class="p">)</span> <span class="p">{</span> <span class="p">}</span>

  <span class="nx">getAll</span><span class="p">()</span><span class="o">:</span> <span class="nx">Observable</span><span class="o">&lt;</span><span class="nx">Member</span><span class="p">[]</span><span class="o">&gt;</span><span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">http</span><span class="p">.</span><span class="nx">get</span><span class="o">&lt;</span><span class="nx">Member</span><span class="p">[]</span><span class="o">&gt;</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">baseUrl</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="nx">getOne</span><span class="p">(</span><span class="nx">id</span>: <span class="kt">string</span><span class="p">)</span><span class="o">:</span> <span class="nx">Observable</span><span class="o">&lt;</span><span class="nx">Member</span><span class="o">&gt;</span><span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">http</span><span class="p">.</span><span class="nx">get</span><span class="o">&lt;</span><span class="nx">Member</span><span class="o">&gt;</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">baseUrl</span> <span class="o">+</span> <span class="s1">&#39;/&#39;</span> <span class="o">+</span> <span class="nx">id</span><span class="p">);</span>
  <span class="p">}</span>

<span class="hll">  <span class="nx">update</span><span class="p">(</span><span class="nx">id</span>: <span class="kt">string</span><span class="p">,</span> <span class="nx">data</span>: <span class="kt">Member</span><span class="p">)</span><span class="o">:</span> <span class="nx">Observable</span><span class="o">&lt;</span><span class="nx">Member</span><span class="o">&gt;</span> <span class="p">{</span>
</span><span class="hll">    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">http</span><span class="p">.</span><span class="nx">patch</span><span class="o">&lt;</span><span class="nx">Member</span><span class="o">&gt;</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">baseUrl</span> <span class="o">+</span> <span class="s1">&#39;/&#39;</span> <span class="o">+</span> <span class="nx">id</span><span class="p">,</span> <span class="nx">data</span><span class="p">);</span>
</span><span class="hll">  <span class="p">}</span>
</span><span class="p">}</span>
</code></pre></div>
</td></tr></table>
</div>
</div>
<p>In der <code>detail.component.ts</code> werden in der <code>update()</code>-Funktion zunächst alle Werte des Formulars ausgelesen und in <code>this.member</code> gespeichert und dann wird die <code>update()</code>-Funktion des <code>BackendService</code> aufgerufen und ihr die <code>this.id</code> sowie <code>this.member</code> übergeben. Nachdem der Datensatz in der Datenbank aktualisiert wurde, wird wieder die <code>table</code>-Komponente aufgerufen. Dazu wird die <code>navigateByUrl()</code>-Funktion des <code>Router</code>-Services verwendet.</p>
<div class="tabbed-set" data-tabs="18:1"><input checked="checked" id="__tabbed_18_1" name="__tabbed_18" type="radio" /><label for="__tabbed_18_1">detail.component.ts</label><div class="tabbed-content">
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="k">import</span> <span class="p">{</span> <span class="nx">Location</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;@angular/common&#39;</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">Component</span><span class="p">,</span> <span class="nx">OnInit</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;@angular/core&#39;</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">FormBuilder</span><span class="p">,</span> <span class="nx">FormGroup</span><span class="p">,</span> <span class="nx">Validators</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;@angular/forms&#39;</span><span class="p">;</span>
<span class="hll"><span class="k">import</span> <span class="p">{</span> <span class="nx">ActivatedRoute</span><span class="p">,</span> <span class="nx">Router</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;@angular/router&#39;</span><span class="p">;</span>
</span><span class="k">import</span> <span class="p">{</span> <span class="nx">BackendService</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;../shared/backend.service&#39;</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">Member</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;../shared/member&#39;</span><span class="p">;</span>

<span class="kd">@Component</span><span class="p">({</span>
  <span class="nx">selector</span><span class="o">:</span> <span class="s1">&#39;app-detail&#39;</span><span class="p">,</span>
  <span class="nx">templateUrl</span><span class="o">:</span> <span class="s1">&#39;./detail.component.html&#39;</span><span class="p">,</span>
  <span class="nx">styleUrls</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;./detail.component.css&#39;</span><span class="p">]</span>
<span class="p">})</span>
<span class="k">export</span> <span class="kd">class</span> <span class="nx">DetailComponent</span> <span class="k">implements</span> <span class="nx">OnInit</span> <span class="p">{</span>
  <span class="nx">id</span>: <span class="kt">string</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">;</span>
  <span class="nx">member</span><span class="o">!:</span> <span class="nx">Member</span><span class="p">;</span>
  <span class="nx">form</span>: <span class="kt">FormGroup</span><span class="p">;</span>

  <span class="kr">constructor</span><span class="p">(</span>
    <span class="k">private</span> <span class="nx">route</span>: <span class="kt">ActivatedRoute</span><span class="p">,</span>
    <span class="k">private</span> <span class="nx">bs</span>: <span class="kt">BackendService</span><span class="p">,</span>
    <span class="k">private</span> <span class="nx">fb</span>: <span class="kt">FormBuilder</span><span class="p">,</span>
    <span class="k">private</span> <span class="nx">location</span>: <span class="kt">Location</span><span class="p">,</span>
    <span class="k">private</span> <span class="nx">router</span>: <span class="kt">Router</span>
<span class="hll">  <span class="p">)</span>
</span>  <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">form</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">fb</span><span class="p">.</span><span class="nx">group</span><span class="p">(</span>
      <span class="p">{</span>
        <span class="nx">forenameControl</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="nx">Validators</span><span class="p">.</span><span class="nx">required</span><span class="p">],</span>
        <span class="nx">surnameControl</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="nx">Validators</span><span class="p">.</span><span class="nx">required</span><span class="p">],</span>
        <span class="nx">emailControl</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="nx">Validators</span><span class="p">.</span><span class="nx">required</span><span class="p">],</span>
      <span class="p">}</span>
    <span class="p">);</span>
  <span class="p">}</span>

  <span class="nx">ngOnInit</span><span class="p">()</span><span class="o">:</span> <span class="k">void</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">id</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">route</span><span class="p">.</span><span class="nx">snapshot</span><span class="p">.</span><span class="nx">paramMap</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">)</span> <span class="o">||</span> <span class="s1">&#39;&#39;</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">readOne</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">id</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="nx">readOne</span><span class="p">(</span><span class="nx">id</span>: <span class="kt">string</span><span class="p">)</span><span class="o">:</span> <span class="k">void</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">bs</span><span class="p">.</span><span class="nx">getOne</span><span class="p">(</span><span class="nx">id</span><span class="p">).</span><span class="nx">subscribe</span><span class="p">(</span>
      <span class="p">(</span>
        <span class="nx">response</span>: <span class="kt">Member</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">member</span> <span class="o">=</span> <span class="nx">response</span><span class="p">;</span>
                <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">member</span><span class="p">);</span>

                <span class="k">this</span><span class="p">.</span><span class="nx">form</span><span class="p">.</span><span class="nx">patchValue</span><span class="p">({</span>
                  <span class="nx">forenameControl</span>: <span class="kt">this.member?.forename</span><span class="p">,</span>
                  <span class="nx">surnameControl</span>: <span class="kt">this.member?.surname</span><span class="p">,</span>
                  <span class="nx">emailControl</span>: <span class="kt">this.member?.email</span>
                <span class="p">});</span>

                <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">member</span><span class="p">;</span>
        <span class="p">},</span>
        <span class="nx">error</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">error</span><span class="p">)</span>
      <span class="p">);</span>
  <span class="p">}</span>

<span class="hll">  <span class="nx">update</span><span class="p">()</span><span class="o">:</span> <span class="k">void</span> <span class="p">{</span>
</span><span class="hll">    <span class="kd">const</span> <span class="nx">values</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">form</span><span class="p">.</span><span class="nx">value</span><span class="p">;</span>
</span><span class="hll">    <span class="k">this</span><span class="p">.</span><span class="nx">member</span><span class="p">.</span><span class="nx">forename</span> <span class="o">=</span> <span class="nx">values</span><span class="p">.</span><span class="nx">forenameControl</span><span class="p">;</span>
</span><span class="hll">    <span class="k">this</span><span class="p">.</span><span class="nx">member</span><span class="p">.</span><span class="nx">surname</span> <span class="o">=</span> <span class="nx">values</span><span class="p">.</span><span class="nx">surnameControl</span><span class="p">;</span>
</span><span class="hll">    <span class="k">this</span><span class="p">.</span><span class="nx">member</span><span class="p">.</span><span class="nx">email</span> <span class="o">=</span> <span class="nx">values</span><span class="p">.</span><span class="nx">emailControl</span><span class="p">;</span>
</span><span class="hll">    <span class="k">this</span><span class="p">.</span><span class="nx">bs</span><span class="p">.</span><span class="nx">update</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">id</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">member</span><span class="p">)</span>
</span><span class="hll">      <span class="p">.</span><span class="nx">subscribe</span><span class="p">(</span>
</span><span class="hll">        <span class="nx">response</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span><span class="hll">          <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">response</span><span class="p">);</span>
</span><span class="hll">          <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">_id</span><span class="p">);</span>
</span><span class="hll">        <span class="p">},</span>
</span><span class="hll">        <span class="nx">error</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span><span class="hll">          <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>
</span><span class="hll">        <span class="p">}</span>
</span><span class="hll">      <span class="p">);</span>
</span><span class="hll">    <span class="k">this</span><span class="p">.</span><span class="nx">router</span><span class="p">.</span><span class="nx">navigateByUrl</span><span class="p">(</span><span class="s1">&#39;/table&#39;</span><span class="p">);</span>
</span><span class="hll">  <span class="p">}</span>
</span>
  <span class="nx">cancel</span><span class="p">()</span><span class="o">:</span> <span class="k">void</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">location</span><span class="p">.</span><span class="nx">back</span><span class="p">();</span>
  <span class="p">}</span>

<span class="p">}</span>
</code></pre></div>
</td></tr></table>
</div>
</div>
<p>Als nächstes implementieren wir noch die <code>delete(id)</code>-Funktion in der <code>table.component.ts</code>, um einen Datensatz zu löschen.</p>
<h2 id="d-elete-tablecomponent">D-elete -- TableComponent<a class="headerlink" href="#d-elete-tablecomponent" title="Permanent link">&para;</a></h2>
<p>In der <code>table</code>-Komponente ist das Löschen eines Datensatzes bereits vorbereitet. Bei Klick auf das <code>trash</code>-Icon in der Tabelle wird die <code>delete()</code>-Funktion in der <code>table.component.ts</code> aufgerufen und ihr die <code>_id</code> des löschenden Datensatzes übergeben. Derzeit gibt die Funktion aber diese <code>id</code> nur auf der Konsole aus. </p>
<p>Wir implementieren zunächst eine <code>deleteOne(id)</code>-Funktion im <code>BackendService</code>. Es wird der Endpunkt <code>DELETE /members/:id</code> verwendet. </p>
<div class="tabbed-set" data-tabs="19:1"><input checked="checked" id="__tabbed_19_1" name="__tabbed_19" type="radio" /><label for="__tabbed_19_1">backend.service.ts</label><div class="tabbed-content">
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="k">import</span> <span class="p">{</span> <span class="nx">HttpClient</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;@angular/common/http&#39;</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">Injectable</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;@angular/core&#39;</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">Observable</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;rxjs&#39;</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">Member</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;./member&#39;</span><span class="p">;</span>

<span class="kd">@Injectable</span><span class="p">({</span>
  <span class="nx">providedIn</span><span class="o">:</span> <span class="s1">&#39;root&#39;</span>
<span class="p">})</span>
<span class="k">export</span> <span class="kd">class</span> <span class="nx">BackendService</span> <span class="p">{</span>
  <span class="nx">baseUrl</span> <span class="o">=</span> <span class="s1">&#39;http://localhost:3000/members&#39;</span><span class="p">;</span>

  <span class="kr">constructor</span><span class="p">(</span><span class="k">private</span> <span class="nx">http</span>: <span class="kt">HttpClient</span><span class="p">)</span> <span class="p">{</span> <span class="p">}</span>

  <span class="nx">getAll</span><span class="p">()</span><span class="o">:</span> <span class="nx">Observable</span><span class="o">&lt;</span><span class="nx">Member</span><span class="p">[]</span><span class="o">&gt;</span><span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">http</span><span class="p">.</span><span class="nx">get</span><span class="o">&lt;</span><span class="nx">Member</span><span class="p">[]</span><span class="o">&gt;</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">baseUrl</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="nx">getOne</span><span class="p">(</span><span class="nx">id</span>: <span class="kt">string</span><span class="p">)</span><span class="o">:</span> <span class="nx">Observable</span><span class="o">&lt;</span><span class="nx">Member</span><span class="o">&gt;</span><span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">http</span><span class="p">.</span><span class="nx">get</span><span class="o">&lt;</span><span class="nx">Member</span><span class="o">&gt;</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">baseUrl</span> <span class="o">+</span> <span class="s1">&#39;/&#39;</span> <span class="o">+</span> <span class="nx">id</span><span class="p">);</span>
  <span class="p">}</span>

<span class="hll">  <span class="nx">update</span><span class="p">(</span><span class="nx">id</span>: <span class="kt">string</span><span class="p">,</span> <span class="nx">data</span>: <span class="kt">Member</span><span class="p">)</span><span class="o">:</span> <span class="nx">Observable</span><span class="o">&lt;</span><span class="nx">Member</span><span class="o">&gt;</span> <span class="p">{</span>
</span><span class="hll">    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">http</span><span class="p">.</span><span class="nx">patch</span><span class="o">&lt;</span><span class="nx">Member</span><span class="o">&gt;</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">baseUrl</span> <span class="o">+</span> <span class="s1">&#39;/&#39;</span> <span class="o">+</span> <span class="nx">id</span><span class="p">,</span> <span class="nx">data</span><span class="p">);</span>
</span><span class="hll">  <span class="p">}</span>
</span>
  <span class="nx">deleteOne</span><span class="p">(</span><span class="nx">id</span>: <span class="kt">string</span><span class="p">)</span><span class="o">:</span> <span class="nx">Observable</span><span class="o">&lt;</span><span class="nx">any</span><span class="o">&gt;</span><span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">http</span><span class="p">.</span><span class="k">delete</span><span class="o">&lt;</span><span class="nx">any</span><span class="o">&gt;</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">baseUrl</span> <span class="o">+</span> <span class="s1">&#39;/&#39;</span> <span class="o">+</span> <span class="nx">id</span><span class="p">,</span> <span class="p">{</span><span class="nx">observe</span><span class="o">:</span> <span class="s1">&#39;response&#39;</span><span class="p">});</span>
  <span class="p">}</span>     
<span class="p">}</span>
</code></pre></div>
</td></tr></table>
</div>
</div>
<p>Im Gegensatz zu den anderen Endpunkten, kann die <code>response</code> beim Aufruf von <code>DELETE /members/:id</code> leer sein (wenn der Datensatz gelöscht wurde) oder es wird ein Objekt mit einem <code>error</code> zurückgesendet (siehe <a href="http://127.0.0.1:8000/webtech/backend/#d-delete-one">hier</a>). Die Typisierung des <code>Observale</code> ist deshalb nicht <code>Member</code>, sondern <code>any</code>. Da vom Backend jedoch der HTTP-Status in der <code>response</code> zurückgegeben wird (<code>204</code> oder <code>404</code>) wollen wir auf diesen Status zugreifen. Wäre die <code>reponse</code> leer, ginge das jedoch nicht. Deshalb legen wir mit <code>{observe: 'response'}</code> als zweitem Parameter fest, dass in jedem Fall eine <code>response</code> durch das <code>Observable</code> erzeugt wird.</p>
<p>Wir verwenden diese Funktion nun in unserer <code>table.component.ts</code>:</p>
<div class="tabbed-set" data-tabs="20:1"><input checked="checked" id="__tabbed_20_1" name="__tabbed_20" type="radio" /><label for="__tabbed_20_1">table.component.ts</label><div class="tabbed-content">
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="k">import</span> <span class="p">{</span> <span class="nx">Component</span><span class="p">,</span> <span class="nx">OnInit</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;@angular/core&#39;</span><span class="p">;</span>
<span class="hll"><span class="k">import</span> <span class="p">{</span> <span class="nx">Router</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;@angular/router&#39;</span><span class="p">;</span>
</span><span class="k">import</span> <span class="p">{</span> <span class="nx">BackendService</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;../shared/backend.service&#39;</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">Member</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;../shared/member&#39;</span><span class="p">;</span>

<span class="kd">@Component</span><span class="p">({</span>
  <span class="nx">selector</span><span class="o">:</span> <span class="s1">&#39;app-table&#39;</span><span class="p">,</span>
  <span class="nx">templateUrl</span><span class="o">:</span> <span class="s1">&#39;./table.component.html&#39;</span><span class="p">,</span>
  <span class="nx">styleUrls</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;./table.component.css&#39;</span><span class="p">]</span>
<span class="p">})</span>
<span class="k">export</span> <span class="kd">class</span> <span class="nx">TableComponent</span> <span class="k">implements</span> <span class="nx">OnInit</span> <span class="p">{</span>
  <span class="nx">members</span><span class="o">!:</span> <span class="nx">Member</span><span class="p">[];</span>
<span class="hll">  <span class="nx">deleted</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
</span>
  <span class="kr">constructor</span><span class="p">(</span><span class="k">private</span> <span class="nx">bs</span>: <span class="kt">BackendService</span><span class="p">,</span> <span class="k">private</span> <span class="nx">router</span>: <span class="kt">Router</span><span class="p">)</span> <span class="p">{</span> <span class="p">}</span>

  <span class="nx">ngOnInit</span><span class="p">()</span><span class="o">:</span> <span class="k">void</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">readAll</span><span class="p">();</span>
  <span class="p">}</span>

  <span class="nx">readAll</span><span class="p">()</span><span class="o">:</span> <span class="k">void</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">bs</span><span class="p">.</span><span class="nx">getAll</span><span class="p">().</span><span class="nx">subscribe</span><span class="p">(</span>
      <span class="p">(</span>
        <span class="nx">response</span>: <span class="kt">Member</span><span class="p">[])</span> <span class="o">=&gt;</span> <span class="p">{</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">members</span> <span class="o">=</span> <span class="nx">response</span><span class="p">;</span>
                <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">members</span><span class="p">);</span>
                <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">members</span><span class="p">;</span>
        <span class="p">},</span>
        <span class="nx">error</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">error</span><span class="p">)</span>
      <span class="p">);</span>
  <span class="p">}</span>

<span class="hll">  <span class="k">delete</span><span class="p">(</span><span class="nx">id</span>: <span class="kt">string</span><span class="p">)</span><span class="o">:</span> <span class="k">void</span> <span class="p">{</span>
</span><span class="hll">    <span class="k">this</span><span class="p">.</span><span class="nx">bs</span><span class="p">.</span><span class="nx">deleteOne</span><span class="p">(</span><span class="nx">id</span><span class="p">).</span><span class="nx">subscribe</span><span class="p">(</span>
</span><span class="hll">      <span class="p">(</span>
</span><span class="hll">        <span class="nx">response</span>: <span class="kt">any</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span><span class="hll">          <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;response : &#39;</span><span class="p">,</span> <span class="nx">response</span><span class="p">);</span>
</span><span class="hll">          <span class="k">if</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">status</span> <span class="o">==</span> <span class="mf">204</span><span class="p">){</span>
</span><span class="hll">                  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">status</span><span class="p">);</span>
</span><span class="hll">                  <span class="k">this</span><span class="p">.</span><span class="nx">reload</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
</span><span class="hll">                <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span><span class="hll">                  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">status</span><span class="p">);</span>
</span><span class="hll">                  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">error</span><span class="p">);</span>
</span><span class="hll">                  <span class="k">this</span><span class="p">.</span><span class="nx">reload</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span>
</span><span class="hll">                <span class="p">}</span>
</span><span class="hll">        <span class="p">},</span>
</span><span class="hll">        <span class="nx">error</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">error</span><span class="p">)</span>
</span><span class="hll">      <span class="p">);</span>
</span><span class="hll">  <span class="p">}</span>
</span>
<span class="hll">  <span class="nx">reload</span><span class="p">(</span><span class="nx">deleted</span>: <span class="kt">boolean</span><span class="p">)</span>
</span><span class="hll">  <span class="p">{</span>
</span><span class="hll">    <span class="k">this</span><span class="p">.</span><span class="nx">deleted</span> <span class="o">=</span> <span class="nx">deleted</span><span class="p">;</span>
</span><span class="hll">    <span class="k">this</span><span class="p">.</span><span class="nx">readAll</span><span class="p">();</span>
</span><span class="hll">    <span class="k">this</span><span class="p">.</span><span class="nx">router</span><span class="p">.</span><span class="nx">navigateByUrl</span><span class="p">(</span><span class="s1">&#39;/table&#39;</span><span class="p">);</span>
</span><span class="hll">  <span class="p">}</span>
</span><span class="p">}</span>
</code></pre></div>
</td></tr></table>
</div>
</div>
<p>Wir haben gleich mehrer Sachen hinzugefügt. Zunächst ruft die <code>delete(id)</code>-Funktion wie gewohnt die <code>BackendService</code>-Funktion <code>deleteOne(id)</code> mit <code>subsribe()</code> auf. Wir haben darin eine Fallunterscheidung, je nach zurückgegebenem HTTP-Status integriert mit jeweiliger Konsolen-Ausgabe (die können natürlich raus). </p>
<p>Um eine Nachricht anzeigen zu lassen, dass der Datensatz gelöscht wurde, fügen wir der TypeScript-Klasse die Eigenschaft <code>deleted</code> hinzu. Ist der Wert von <code>deleted</code> <code>false</code> wird die Tabelle angezeigt. Ist der Wert jedoch <code>true</code> wird die Löschnachricht angezeigt. In der Löschnachricht ist ein Button, dessen Klickereignis die Funktion <code>reload()</code> aufruft. In <code>reload()</code> wird die Tabelle neu geladen. Dazu werden zuvor nochmal alle Einträge aus der Datenbank mit <code>readAll()</code> geholt, damit man sieht, dass der Datensatz gelöscht wurde. Die <code>table.component.html</code> sieht nun so aus:</p>
<div class="tabbed-set" data-tabs="21:1"><input checked="checked" id="__tabbed_21_1" name="__tabbed_21" type="radio" /><label for="__tabbed_21_1">table.component.html</label><div class="tabbed-content">
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="p">&lt;</span><span class="nt">div</span> <span class="err">*</span><span class="na">ngIf</span><span class="o">=</span><span class="s">&quot;!deleted&quot;</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot; container mt-3 &quot;</span><span class="p">&gt;</span>
<span class="hll">    <span class="p">&lt;</span><span class="nt">h3</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;m-3 &quot;</span><span class="p">&gt;</span>Alle Einträge<span class="p">&lt;/</span><span class="nt">h3</span><span class="p">&gt;</span>
</span>    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;table-responsive &quot;</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">table</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;m-3 table table-striped table-hover &quot;</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">caption</span><span class="p">&gt;</span>Alle <span class="p">&lt;</span><span class="nt">code</span><span class="p">&gt;</span>members<span class="p">&lt;/</span><span class="nt">code</span><span class="p">&gt;&lt;/</span><span class="nt">caption</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">thead</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">tr</span><span class="p">&gt;</span>
                    <span class="p">&lt;</span><span class="nt">th</span> <span class="na">scope</span><span class="o">=</span><span class="s">&quot;col &quot;</span><span class="p">&gt;</span>Nr<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
                    <span class="p">&lt;</span><span class="nt">th</span> <span class="na">scope</span><span class="o">=</span><span class="s">&quot;col &quot;</span><span class="p">&gt;</span>Vorname<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
                    <span class="p">&lt;</span><span class="nt">th</span> <span class="na">scope</span><span class="o">=</span><span class="s">&quot;col &quot;</span><span class="p">&gt;</span>Nachname<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
                    <span class="p">&lt;</span><span class="nt">th</span> <span class="na">scope</span><span class="o">=</span><span class="s">&quot;col &quot;</span><span class="p">&gt;</span>E-Mail<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
                <span class="p">&lt;/</span><span class="nt">tr</span><span class="p">&gt;</span>
<span class="hll">            <span class="p">&lt;/</span><span class="nt">thead</span><span class="p">&gt;</span>
</span>            <span class="p">&lt;</span><span class="nt">tbody</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">tr</span> <span class="err">*</span><span class="na">ngFor</span><span class="o">=</span><span class="s">&quot;let member of members; let i=index; &quot;</span><span class="p">&gt;</span>
                    <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>{{ i+1 }}<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
                    <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>{{ member.forename }}<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
                    <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>{{ member.surname }}<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
                    <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>
                        <span class="p">&lt;</span><span class="nt">a</span> <span class="err">[</span><span class="na">href</span><span class="err">]=&quot;</span> <span class="err">&#39;</span><span class="na">mailto:</span><span class="err">&#39;</span> <span class="err">+</span> <span class="na">member</span><span class="err">.</span><span class="na">email</span> <span class="err">&quot;</span><span class="p">&gt;&lt;</span><span class="nt">span</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;bi bi-envelope px-5 &quot;</span><span class="p">&gt;&lt;/</span><span class="nt">span</span><span class="p">&gt;&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
                        <span class="p">&lt;</span><span class="nt">a</span> <span class="err">[</span><span class="na">routerLink</span><span class="err">]=&quot;[</span> <span class="err">&#39;/</span><span class="na">member</span><span class="err">&#39;,</span> <span class="na">member</span><span class="err">.</span><span class="na">_id</span><span class="err">]</span> <span class="err">&quot;</span><span class="p">&gt;</span> <span class="p">&lt;</span><span class="nt">span</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot; bi bi-pencil-square px-5 &quot;</span><span class="p">&gt;&lt;/</span><span class="nt">span</span><span class="p">&gt;&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
                        <span class="p">&lt;</span><span class="nt">span</span> <span class="err">(</span><span class="na">click</span><span class="err">)=&quot;</span><span class="na">delete</span><span class="err">(</span><span class="na">member</span><span class="err">.</span><span class="na">_id</span><span class="err">)</span> <span class="err">&quot;</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot; bi bi-trash px-5 &quot;</span><span class="p">&gt;&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
                    <span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
                <span class="p">&lt;/</span><span class="nt">tr</span><span class="p">&gt;</span>
            <span class="p">&lt;/</span><span class="nt">tbody</span><span class="p">&gt;</span>

        <span class="p">&lt;/</span><span class="nt">table</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">div</span> <span class="err">*</span><span class="na">ngIf</span><span class="o">=</span><span class="s">&quot;deleted&quot;</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot; container mt-3 &quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">h3</span><span class="p">&gt;</span>Datensatz wurde gelöscht!<span class="p">&lt;/</span><span class="nt">h3</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">button</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;button&quot;</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;btn btn-secondary&quot;</span> <span class="err">(</span><span class="na">click</span><span class="err">)=&quot;</span><span class="na">reload</span><span class="err">(</span><span class="na">false</span><span class="err">)&quot;</span><span class="p">&gt;</span>Zurück zur Tabelle<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
<span class="hll"><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>    
</span></code></pre></div>
</td></tr></table>
</div>
</div>
<div class="admonition success">
<p class="admonition-title">Success</p>
</div>
<p>Wir haben nun die CRUD-Funktionen im Frontend implementiert und dafür das Frontend an das Backend vollständig angebunden. Zwar fehlt hier noch Create, aber das sollten Sie selbständig leicht hinbekommen. Schauen Sie sich das Formular für Update an, dann sollte das kein Problem sein! Ist eine gute Übung! Der Entwicklungsstack Datenbank &lt;-&gt; Backend &lt;-&gt; Frontend ist damit fertig und abgeschlossen. Eine weitere gute Übung für Sie wäre, statt des MongoDB-Backends das PostgreSQL-Backend anzubinden. Sie werden feststellen, dass nur sehr wenige Anpassungen notwendig sind. Wir haben nun alle Voraussetzungen besprochen, um die Semesteraufgabe zu erledigen. Im Januar werden wir noch einige nützliche Details diskutieren, wie z.B. modale Dialoge, Nutzer- und Rollenverwaltung, Verschlüsseln von Passwörtern, Hochladen von Bildern und Drag&amp;Drop. Eventuell schauen wir uns noch Drittanbieter-APIs an, z.B. OpenStreetmap, mal sehen. Ansonsten wünsche ich allen ein frohes und gesundes Weihnachtsfest und einen guten Rutsch ins neue Jahr! Bleiben Sie gesund und viel Spaß und Erfolg mit der Semesteraufgabe und dem restlichen Studium!</p>
                
              
              
                


              
            </article>
          </div>
        </div>
        
      </main>
      
        
<footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="Footer">
      
        
        <a href="../backend_pg/" class="md-footer__link md-footer__link--prev" aria-label="Zurück: Backend (PostgreSQL)" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Zurück
              </span>
              Backend (PostgreSQL)
            </div>
          </div>
        </a>
      
      
        
        <a href="../material/" class="md-footer__link md-footer__link--next" aria-label="Weiter: Nutzerverwaltung und Material" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Weiter
              </span>
              Nutzerverwaltung und Material
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright &copy; 2021 Jörn Freiheit
          </div>
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
        
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "..", "features": ["navigation.instant", "navigation.tracking"], "translations": {"clipboard.copy": "In Zwischenablage kopieren", "clipboard.copied": "In Zwischenablage kopiert", "search.config.lang": "de", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Suche", "search.result.placeholder": "Suchbegriff eingeben", "search.result.none": "Keine Suchergebnisse", "search.result.one": "1 Suchergebnis", "search.result.other": "# Suchergebnisse", "search.result.more.one": "1 weiteres Suchergebnis auf dieser Seite", "search.result.more.other": "# weitere Suchergebnisse auf dieser Seite", "search.result.term.missing": "Es fehlt", "select.version.title": "Version ausw\u00e4hlen"}, "search": "../assets/javascripts/workers/search.409db549.min.js", "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.756773cc.min.js"></script>
      
    
  </body>
</html>