
<!doctype html>
<html lang="de" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Lehrmaterial, Übungen, Aufgaben und Hilfen für WebTech">
      
      
      
        <meta name="author" content="Jörn Freiheit">
      
      
        <link rel="canonical" href="http://freiheit.f4.htw-berlin.de/webtech/backend/">
      
      <link rel="icon" href="../img/favicon.png">
      <meta name="generator" content="mkdocs-1.2.2, mkdocs-material-7.2.6">
    
    
      
        <title>Backend - WebTech</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.802231af.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.3f5d1f46.min.css">
        
          
          
          <meta name="theme-color" content="#757575">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>:root{--md-text-font-family:"Roboto";--md-code-font-family:"Roboto Mono"}</style>
      
    
    
    
      <link rel="stylesheet" href="../extra.css">
    
    
      


    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="grey" data-md-color-accent="indigo">
  
    
    <script>function __prefix(e){return new URL("..",location).pathname+"."+e}function __get(e,t=localStorage){return JSON.parse(t.getItem(__prefix(e)))}</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#rest-api" class="md-skip">
          Zum Inhalt
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="WebTech" class="md-header__button md-logo" aria-label="WebTech" data-md-component="logo">
      
  <img src="../img/fiw.jpg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            WebTech
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Backend
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Suche" placeholder="Suche" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Suche">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Zurücksetzen" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Suche wird initialisiert
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        
<a href="https://github.com/jfreiheit/webtech/" title="Quellcode" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    webtech
  </div>
</a>
      </div>
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="WebTech" class="md-nav__button md-logo" aria-label="WebTech" data-md-component="logo">
      
  <img src="../img/fiw.jpg" alt="logo">

    </a>
    WebTech
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/jfreiheit/webtech/" title="Quellcode" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    webtech
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../einfuehrung/" class="md-nav__link">
        Einführung
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../html/" class="md-nav__link">
        HTML
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../css/" class="md-nav__link">
        CSS
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../rwd/" class="md-nav__link">
        RWD
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../javascript/" class="md-nav__link">
        JavaScript
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../angular/" class="md-nav__link">
        Angular
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../angular2/" class="md-nav__link">
        JSON und Direktiven
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../routing/" class="md-nav__link">
        Routing und Services
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Backend
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Backend
      </a>
      
        
<nav class="md-nav md-nav--secondary" aria-label="Inhaltsverzeichnis">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Inhaltsverzeichnis
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#starten-des-projektes-und-installation-von-nodemon" class="md-nav__link">
    Starten des Projektes und Installation von nodemon
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#datenbank-erstellen" class="md-nav__link">
    Datenbank erstellen
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mongosh-mongodb-in-der-shell" class="md-nav__link">
    Mongosh - MongoDB in der Shell
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#datenbank-im-backend-anbinden" class="md-nav__link">
    Datenbank im Backend anbinden
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ein-model-erstellen" class="md-nav__link">
    Ein Model erstellen
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#die-routen-definieren" class="md-nav__link">
    Die Routen definieren
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#einen-controller-erstellen" class="md-nav__link">
    Einen Controller erstellen
  </a>
  
    <nav class="md-nav" aria-label="Einen Controller erstellen">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#r-read-all" class="md-nav__link">
    R - read all
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#c-create" class="md-nav__link">
    C - create
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#r-read-one" class="md-nav__link">
    R - read one
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#u-update" class="md-nav__link">
    U - update
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#d-delete-one" class="md-nav__link">
    D - delete one
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#d-delete-all" class="md-nav__link">
    D - delete all
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cross-origin-resource-sharing-cors" class="md-nav__link">
    Cross-Origin Resource Sharing (CORS)
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../uebungen/" class="md-nav__link">
        Übungen
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../tools/" class="md-nav__link">
        Werkzeuge
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Inhaltsverzeichnis">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Inhaltsverzeichnis
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#starten-des-projektes-und-installation-von-nodemon" class="md-nav__link">
    Starten des Projektes und Installation von nodemon
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#datenbank-erstellen" class="md-nav__link">
    Datenbank erstellen
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mongosh-mongodb-in-der-shell" class="md-nav__link">
    Mongosh - MongoDB in der Shell
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#datenbank-im-backend-anbinden" class="md-nav__link">
    Datenbank im Backend anbinden
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ein-model-erstellen" class="md-nav__link">
    Ein Model erstellen
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#die-routen-definieren" class="md-nav__link">
    Die Routen definieren
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#einen-controller-erstellen" class="md-nav__link">
    Einen Controller erstellen
  </a>
  
    <nav class="md-nav" aria-label="Einen Controller erstellen">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#r-read-all" class="md-nav__link">
    R - read all
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#c-create" class="md-nav__link">
    C - create
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#r-read-one" class="md-nav__link">
    R - read one
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#u-update" class="md-nav__link">
    U - update
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#d-delete-one" class="md-nav__link">
    D - delete one
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#d-delete-all" class="md-nav__link">
    D - delete all
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cross-origin-resource-sharing-cors" class="md-nav__link">
    Cross-Origin Resource Sharing (CORS)
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/jfreiheit/webtech/edit/master/docs/backend.md" title="Seite editieren" class="md-content__button md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
                  </a>
                
                
                <h1 id="rest-api">REST-API<a class="headerlink" href="#rest-api" title="Permanent link">&para;</a></h1>
<p>Die wesentlichsten Konzepte, wie Komponenten, Services und Routing für Angular-Projekte haben wir bereits kennengelernt. Ehe wir uns weiter mit dem Frontend beschäftigen, erstellen wir einen Server, der uns die Daten liefert. Derzeit haben wir unsere Mockup-Daten noch clientseitig vom <code>DataService</code> verwalten lassen und sie auch dort gespeichert. Das wollen wir nun ändern. Die Daten speichern wir in einer Datenbank. </p>
<p>Für diese Datenbank stellen wir die Implementierung einer Schnittstelle bereit, so dass wir die wesentlichen Datenbankanfragen darüber ausführen können. Diese wesentlichen Datenbankfragen werden mit <a href="https://en.wikipedia.org/wiki/Create,_read,_update_and_delete">CRUD</a> abgekürzt, für <strong>C</strong>reate, <strong>R</strong>ead, <strong>U</strong>pdate und <strong>D</strong>elete. Das bedeutet, wir implementieren Funktionalitäten, mit denen wir einen neuen Datensatz in die Datenbank einfügen (<em>create</em>), aus der Datenbank auslesen (<em>read</em>), in der Datenbank aktualisieren (<em>update</em>) und aus der Datenbank löschen (<em>delete</em>) können. </p>
<p>Die Schnittstelle, die wir implementieren, ist eine sogenannte <a href="https://www.redhat.com/de/topics/api/what-is-a-rest-api">REST-API</a>. <em>REST</em> steht für <a href="https://de.wikipedia.org/wiki/Representational_State_Transfer"><em>Representational State Transfer</em></a> und basiert auf einigen wenigen Prinzipien:</p>
<ol>
<li>Alles wird als eine <em>Ressource</em> betrachtet, z.B. <code>book</code>.</li>
<li>Jede Ressource ist durch <em>URIs</em> (<em>Uniform Resource Identifiers</em>) eindeutig identifizierbar, z.B. <code>http://localhost/books</code>.</li>
<li>Es werden die <a href="https://de.wikipedia.org/wiki/Hypertext_Transfer_Protocol#HTTP-Anfragemethoden">Standard-HTTP-Methoden</a> verwendet, also <code>GET</code>, <code>POST</code>, <code>PUT</code>, <code>UPDATE</code>.  </li>
<li>Ressourcen können in verschiedenen Formaten vorliegen, z.B. in <a href="https://html.spec.whatwg.org/multipage/">HTML</a>, <a href="https://www.w3.org/TR/xml/">XML</a>, <a href="https://jsonapi.org/format/">JSON</a>, ...</li>
<li>Die Kommunikation ist <em>zustandslos</em>. Jede einzelne HTTP-Anfrage wird komplett isoliert bearbeitet. Es gibt keinerlei Anfragehistorie. </li>
</ol>
<p>Das bedeutet, wir erstellen ein Backend (einen REST-Server), an den HTTP-Anfragen mit der eindeutig identifizierbaren Ressource gestellt werden. Das Backend erstellt daraus die entsprechende SQL-Query. Das Resultat der Datenbankanfrage wird im <code>JSON</code>- oder <code>HTML</code>- oder <code>XML</code>- oder in einem anderen Format bereitsgestellt.</p>
<p><img alt="restapi" src="../files/61_restapi.png" /></p>
<p>Prinzipiell gibt es also ein <em>Mapping</em>  von HTTP-Anfragen auf SQL-Anfragen:</p>
<table>
<thead>
<tr>
<th>CRUD</th>
<th>SQL</th>
<th>HTTP</th>
</tr>
</thead>
<tbody>
<tr>
<td>create</td>
<td>INSERT</td>
<td>POST</td>
</tr>
<tr>
<td>read</td>
<td>SELECT</td>
<td>GET</td>
</tr>
<tr>
<td>update</td>
<td>UPDATE</td>
<td>PUT</td>
</tr>
<tr>
<td>delete</td>
<td>DELETE</td>
<td>DELETE</td>
</tr>
</tbody>
</table>
<p>Wir wollen uns ein Backend erstellen, über das wir unsere Daten verwalten. Dazu überlegen wir uns zunächst ein paar <em>Endpunkte</em> und die Zugriffsmethoden, mit denen wir auf unsere Daten zugreifen wollen.</p>
<table>
<thead>
<tr>
<th> Methode</th>
<th> URL</th>
<th> Bedeutung</th>
</tr>
</thead>
<tbody>
<tr>
<td> GET</td>
<td> /members</td>
<td> hole alle Datensätze</td>
</tr>
<tr>
<td> GET</td>
<td> /members/11</td>
<td>hole den Datensatz mit der id=11</td>
</tr>
<tr>
<td> POST</td>
<td> /members</td>
<td> füge einen neuen Datensatz hinzu</td>
</tr>
<tr>
<td> PUT</td>
<td> /members/11</td>
<td> ändere den Datensatz mit der id=11</td>
</tr>
<tr>
<td> DELETE</td>
<td> /members/11</td>
<td> lösche den Datensatz mit der id=11</td>
</tr>
<tr>
<td> DELETE</td>
<td> /members</td>
<td> lösche alle Datensätze</td>
</tr>
</tbody>
</table>
<p>Der Wert der <code>id</code> ist natürlich nur ein Beispiel. Es soll für alle <code>id</code>-Werte funktionieren, die in unserem Datensatz enthalten sind. </p>
<p>Wir starten damit, uns ein <code>node.js</code>-Projekt zu erstellen. Dazu erstellen wir uns zunächst einen Ordner <code>backend</code>, wechseln in diesen Ordner und führen dann <code>npm init</code> aus:</p>
<div class="highlight"><pre><span></span><code>mkdir backend
<span class="nb">cd</span> backend
npm init
</code></pre></div>
<p>Sie werden ein paar Sachen gefragt. Im Prinzip können Sie immer <code>Enter</code> drücken:</p>
<div class="highlight"><pre><span></span><code>This utility will walk you through creating a package.json file.
It only covers the most common items, and tries to guess sensible defaults.

See <span class="sb">`</span>npm <span class="nb">help</span> init<span class="sb">`</span> <span class="k">for</span> definitive documentation on these fields
and exactly what they <span class="k">do</span>.

Use <span class="sb">`</span>npm install &lt;pkg&gt;<span class="sb">`</span> afterwards to install a package and
save it as a dependency <span class="k">in</span> the package.json file.

Press ^C at any <span class="nb">time</span> to quit.
package name: <span class="o">(</span>backend<span class="o">)</span> 
version: <span class="o">(</span><span class="m">1</span>.0.0<span class="o">)</span> 
description: Backend REST-API
entry point: <span class="o">(</span>index.js<span class="o">)</span> 
<span class="nb">test</span> command: 
git repository: 
keywords: restapi, backend
author: J. Freiheit
license: <span class="o">(</span>ISC<span class="o">)</span> 
About to write to /Users/jornfreiheit/Sites/WT21/backend/package.json:

<span class="o">{</span>
  <span class="s2">&quot;name&quot;</span>: <span class="s2">&quot;backend&quot;</span>,
  <span class="s2">&quot;version&quot;</span>: <span class="s2">&quot;1.0.0&quot;</span>,
  <span class="s2">&quot;description&quot;</span>: <span class="s2">&quot;Backend REST-API&quot;</span>,
  <span class="s2">&quot;main&quot;</span>: <span class="s2">&quot;index.js&quot;</span>,
  <span class="s2">&quot;scripts&quot;</span>: <span class="o">{</span>
    <span class="s2">&quot;test&quot;</span>: <span class="s2">&quot;echo \&quot;Error: no test specified\&quot; &amp;&amp; exit 1&quot;</span>
  <span class="o">}</span>,
  <span class="s2">&quot;keywords&quot;</span>: <span class="o">[</span>
    <span class="s2">&quot;restapi&quot;</span>,
    <span class="s2">&quot;backend&quot;</span>
  <span class="o">]</span>,
  <span class="s2">&quot;author&quot;</span>: <span class="s2">&quot;J. Freiheit&quot;</span>,
  <span class="s2">&quot;license&quot;</span>: <span class="s2">&quot;ISC&quot;</span>
<span class="o">}</span>


Is this OK? <span class="o">(</span>yes<span class="o">)</span> 
</code></pre></div>
<p>Die <code>package.json</code> wurde erstellt. Nun benötigen wir noch das Modul <a href="https://expressjs.com/de/">Express</a>. Express bietet uns eine unkomplizierte <em>Middleware</em> für die Weiterverwaltung von <code>http</code>-Anfragen an die Datenbank und zurück. </p>
<div class="highlight"><pre><span></span><code>npm install express --save
</code></pre></div>
<p>Sie erhalten eine Meldung in der Form:</p>
<div class="highlight"><pre><span></span><code>% npm install express --save

added <span class="m">50</span> packages, and audited <span class="m">51</span> packages <span class="k">in</span> 844ms

found <span class="m">0</span> vulnerabilities
</code></pre></div>
<p>In der <code>package.json</code> wurde die entsprechende Abhängigkeit eingetragen: </p>
<div class="tabbed-set" data-tabs="1:1"><input checked="checked" id="__tabbed_1_1" name="__tabbed_1" type="radio" /><label for="__tabbed_1_1">package.json</label><div class="tabbed-content">
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="p">{</span>
  <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;backend&quot;</span><span class="p">,</span>
  <span class="nt">&quot;version&quot;</span><span class="p">:</span> <span class="s2">&quot;1.0.0&quot;</span><span class="p">,</span>
  <span class="nt">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Backend REST-API&quot;</span><span class="p">,</span>
  <span class="nt">&quot;main&quot;</span><span class="p">:</span> <span class="s2">&quot;index.js&quot;</span><span class="p">,</span>
  <span class="nt">&quot;scripts&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;test&quot;</span><span class="p">:</span> <span class="s2">&quot;echo \&quot;Error: no test specified\&quot; &amp;&amp; exit 1&quot;</span>
  <span class="p">},</span>
  <span class="nt">&quot;keywords&quot;</span><span class="p">:</span> <span class="p">[</span>
    <span class="s2">&quot;restapi&quot;</span><span class="p">,</span>
    <span class="s2">&quot;backend&quot;</span>
  <span class="p">],</span>
  <span class="nt">&quot;author&quot;</span><span class="p">:</span> <span class="s2">&quot;J. Freiheit&quot;</span><span class="p">,</span>
  <span class="nt">&quot;license&quot;</span><span class="p">:</span> <span class="s2">&quot;ISC&quot;</span><span class="p">,</span>
<span class="hll">  <span class="nt">&quot;dependencies&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span class="hll">    <span class="nt">&quot;express&quot;</span><span class="p">:</span> <span class="s2">&quot;^4.17.1&quot;</span>
</span><span class="hll">  <span class="p">}</span>
</span><span class="p">}</span>
</code></pre></div>
</td></tr></table>
</div>
</div>
<p>Öffnen Sie nun das <code>backend</code>-Projekt in Ihrer IDE und erstellen Sie sich dort eine Datei <code>server.js</code> mit folgendem Inhalt:</p>
<div class="tabbed-set" data-tabs="2:1"><input checked="checked" id="__tabbed_2_1" name="__tabbed_2" type="radio" /><label for="__tabbed_2_1">server.js</label><div class="tabbed-content">
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="k">import</span> <span class="nx">express</span> <span class="nx">from</span> <span class="s1">&#39;express&#39;</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">app</span> <span class="o">=</span> <span class="nx">express</span><span class="p">();</span>
<span class="kd">const</span> <span class="nx">PORT</span> <span class="o">=</span> <span class="mf">3000</span><span class="p">;</span>

<span class="nx">app</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">,</span> <span class="p">(</span><span class="nx">request</span><span class="p">,</span> <span class="nx">response</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="nx">response</span><span class="p">.</span><span class="nx">json</span><span class="p">({</span> <span class="nx">message</span><span class="o">:</span> <span class="s2">&quot;Hello FIW!&quot;</span> <span class="p">});</span>
<span class="p">});</span>

<span class="nx">app</span><span class="p">.</span><span class="nx">listen</span><span class="p">(</span><span class="nx">PORT</span><span class="p">,</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="sb">`Server started and listening on port </span><span class="si">${</span><span class="nx">PORT</span><span class="si">}</span><span class="sb"> ...`</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">});</span>
</code></pre></div>
</td></tr></table>
</div>
</div>
<p>Das bedeutet, wir importieren <code>express</code> (Zeile <code>1</code>), erzeugen uns davon ein Objekt und speichern dieses in der Variablen <code>app</code> (Zeile <code>3</code>). Wir legen in einer Konstanten <code>PORT</code> die Portnummer <code>3000</code> fest (Zeile <code>4</code> - die Portnummer können Sie wählen). Das <code>backend</code> ist somit unter <code>http://localhost:3000</code> verfügbar. Wenn wir diese URL aufrufen, dann wird ein <code>request</code> ausgelöst, den wir hier mit <code>Hello FIW!</code> als <code>response</code> beantworten (Zeilen <code>6-8</code>). Das eigentliche Starten des Webservers erfolgt in den Zeilen <code>10-16</code>.</p>
<p>In unserer <code>package.json</code> führen wir nun noch zwei Anpassungen durch. Erstens soll unser <code>main</code>-Skript nun nicht mehr <code>index.js</code>, sondern <code>server.js</code> sein. Zweitens haben wir in Zeile <code>1</code> in der <code>server.js</code> das <code>express</code>-Paket mittels</p>
<div class="highlight"><pre><span></span><code>import express from &#39;express&#39;;
</code></pre></div>
<p>importiert. Dies entspricht der "neuen" Syntax zum Importieren eines ES6-Modules (ES6 - ECMAScript 6). "Früher" hat man stattdessen</p>
<div class="highlight"><pre><span></span><code>const express = require(&#39;express&#39;);
</code></pre></div>
<p>geschrieben. Allerdings erfordert diese "neue" Syntax eine Erweiterung in der <code>package.json</code>:</p>
<div class="tabbed-set" data-tabs="3:1"><input checked="checked" id="__tabbed_3_1" name="__tabbed_3" type="radio" /><label for="__tabbed_3_1">package.json</label><div class="tabbed-content">
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="p">{</span>
    <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;backend&quot;</span><span class="p">,</span>
    <span class="nt">&quot;version&quot;</span><span class="p">:</span> <span class="s2">&quot;1.0.0&quot;</span><span class="p">,</span>
    <span class="nt">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Backend REST-API&quot;</span><span class="p">,</span>
<span class="hll">    <span class="nt">&quot;main&quot;</span><span class="p">:</span> <span class="s2">&quot;server.js&quot;</span><span class="p">,</span>
</span><span class="hll">    <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;module&quot;</span><span class="p">,</span>
</span>    <span class="nt">&quot;scripts&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;test&quot;</span><span class="p">:</span> <span class="s2">&quot;echo \&quot;Error: no test specified\&quot; &amp;&amp; exit 1&quot;</span>
    <span class="p">},</span>
    <span class="nt">&quot;keywords&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="s2">&quot;restapi&quot;</span><span class="p">,</span>
        <span class="s2">&quot;backend&quot;</span>
    <span class="p">],</span>
    <span class="nt">&quot;author&quot;</span><span class="p">:</span> <span class="s2">&quot;J. Freiheit&quot;</span><span class="p">,</span>
    <span class="nt">&quot;license&quot;</span><span class="p">:</span> <span class="s2">&quot;ISC&quot;</span><span class="p">,</span>
    <span class="nt">&quot;dependencies&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;express&quot;</span><span class="p">:</span> <span class="s2">&quot;^4.17.1&quot;</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
</td></tr></table>
</div>
</div>
<h4 id="starten-des-projektes-und-installation-von-nodemon">Starten des Projektes und Installation von nodemon<a class="headerlink" href="#starten-des-projektes-und-installation-von-nodemon" title="Permanent link">&para;</a></h4>
<p>Das Projekt lässt sich nun starten. Wir geben dazu im Terminal im <code>backend</code>-Ordner</p>
<div class="highlight"><pre><span></span><code>node server.js
</code></pre></div>
<p>ein. Im Terminal erscheint </p>
<div class="highlight"><pre><span></span><code>Server started and listening on port <span class="m">3000</span> ...
</code></pre></div>
<p>und wenn Sie im Browser die URL <code>http://localhost:3000/</code> eingeben, wird dort</p>
<p><img alt="backend" src="../files/91_backend.png" /></p>
<p>angezeigt. Sie können auch Postman öffnen und <code>http://localhost:3000</code> eintragen (<code>GET</code>-Methode):</p>
<p><img alt="backend" src="../files/92_postman.png" /></p>
<p>Wann immer wir jetzt jedoch etwas an der Implementierung ändern, müssen wir im Terminal zunächst den Webserver mit </p>
<div class="highlight"><pre><span></span><code>Strg-C      // bzw. Control-C
</code></pre></div>
<p>stoppen, um ihn dann wieder mit <code>node server.js</code> zu starten. Um das zu umgehen, gibt es das Paket <a href="https://www.npmjs.com/package/nodemon">nodemon</a>. Da es nur sinnvoll während der Entwicklung eingesetzt werden kann (und sollte), installieren wir es als eine <em>development dependency</em>:</p>
<div class="highlight"><pre><span></span><code>npm install --save-dev nodemon
</code></pre></div>
<p>Die <code>package.json</code> sieht daraufhin so aus:</p>
<div class="tabbed-set" data-tabs="4:1"><input checked="checked" id="__tabbed_4_1" name="__tabbed_4" type="radio" /><label for="__tabbed_4_1">package.json</label><div class="tabbed-content">
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="p">{</span>
    <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;backend&quot;</span><span class="p">,</span>
    <span class="nt">&quot;version&quot;</span><span class="p">:</span> <span class="s2">&quot;1.0.0&quot;</span><span class="p">,</span>
    <span class="nt">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Backend REST-API&quot;</span><span class="p">,</span>
    <span class="nt">&quot;main&quot;</span><span class="p">:</span> <span class="s2">&quot;server.js&quot;</span><span class="p">,</span>
    <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;module&quot;</span><span class="p">,</span>
    <span class="nt">&quot;scripts&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;test&quot;</span><span class="p">:</span> <span class="s2">&quot;echo \&quot;Error: no test specified\&quot; &amp;&amp; exit 1&quot;</span>
    <span class="p">},</span>
    <span class="nt">&quot;keywords&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="s2">&quot;restapi&quot;</span><span class="p">,</span>
        <span class="s2">&quot;backend&quot;</span>
    <span class="p">],</span>
    <span class="nt">&quot;author&quot;</span><span class="p">:</span> <span class="s2">&quot;J. Freiheit&quot;</span><span class="p">,</span>
    <span class="nt">&quot;license&quot;</span><span class="p">:</span> <span class="s2">&quot;ISC&quot;</span><span class="p">,</span>
    <span class="nt">&quot;dependencies&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;express&quot;</span><span class="p">:</span> <span class="s2">&quot;^4.17.1&quot;</span>
    <span class="p">},</span>
    <span class="nt">&quot;devDependencies&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;nodemon&quot;</span><span class="p">:</span> <span class="s2">&quot;^2.0.15&quot;</span>
    <span class="p">}</span>
<span class="hll"><span class="p">}</span>
</span></code></pre></div>
</td></tr></table>
</div>
</div>
<p>Zur Verwendung von <code>nodemon</code> fügen wir in die <code>package.json</code> unter <code>"scripts"</code> noch die Eigenschaft <code>watch</code> (frei gewählt) und den dazugehörigen Wert <code>nodemon server.js</code> ein:</p>
<div class="tabbed-set" data-tabs="5:1"><input checked="checked" id="__tabbed_5_1" name="__tabbed_5" type="radio" /><label for="__tabbed_5_1">package.json</label><div class="tabbed-content">
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="p">{</span>
    <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;backend&quot;</span><span class="p">,</span>
    <span class="nt">&quot;version&quot;</span><span class="p">:</span> <span class="s2">&quot;1.0.0&quot;</span><span class="p">,</span>
    <span class="nt">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Backend REST-API&quot;</span><span class="p">,</span>
    <span class="nt">&quot;main&quot;</span><span class="p">:</span> <span class="s2">&quot;server.js&quot;</span><span class="p">,</span>
    <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;module&quot;</span><span class="p">,</span>
    <span class="nt">&quot;scripts&quot;</span><span class="p">:</span> <span class="p">{</span>
<span class="hll">        <span class="nt">&quot;watch&quot;</span><span class="p">:</span> <span class="s2">&quot;nodemon ./server.js&quot;</span><span class="p">,</span>
</span>        <span class="nt">&quot;test&quot;</span><span class="p">:</span> <span class="s2">&quot;echo \&quot;Error: no test specified\&quot; &amp;&amp; exit 1&quot;</span>
    <span class="p">},</span>
    <span class="nt">&quot;keywords&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="s2">&quot;restapi&quot;</span><span class="p">,</span>
        <span class="s2">&quot;backend&quot;</span>
    <span class="p">],</span>
    <span class="nt">&quot;author&quot;</span><span class="p">:</span> <span class="s2">&quot;J. Freiheit&quot;</span><span class="p">,</span>
    <span class="nt">&quot;license&quot;</span><span class="p">:</span> <span class="s2">&quot;ISC&quot;</span><span class="p">,</span>
    <span class="nt">&quot;dependencies&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;express&quot;</span><span class="p">:</span> <span class="s2">&quot;^4.17.1&quot;</span>
    <span class="p">},</span>
    <span class="nt">&quot;devDependencies&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;nodemon&quot;</span><span class="p">:</span> <span class="s2">&quot;^2.0.15&quot;</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
</td></tr></table>
</div>
</div>
<p>Nun lässt sich die Anwendung mithilfe von <code>nodemon</code> per </p>
<div class="highlight"><pre><span></span><code>npm run watch
</code></pre></div>
<p>starten und muss auch nicht mehr gestoppt und neu gestartet werden, wenn Änderungen an der Implementierungen durchgeführt wurden. Die Ausgabe im Terminal nach Eingabe von <code>npm run watch</code> ist ungefähr so:</p>
<div class="highlight"><pre><span></span><code>&gt; backend@1.0.0 watch
&gt; nodemon ./server.js

<span class="o">[</span>nodemon<span class="o">]</span> <span class="m">2</span>.0.15
<span class="o">[</span>nodemon<span class="o">]</span> to restart at any time, enter <span class="sb">`</span>rs<span class="sb">`</span>
<span class="o">[</span>nodemon<span class="o">]</span> watching path<span class="o">(</span>s<span class="o">)</span>: *.*
<span class="o">[</span>nodemon<span class="o">]</span> watching extensions: js,mjs,json
<span class="o">[</span>nodemon<span class="o">]</span> starting <span class="sb">`</span>node ./server.js<span class="sb">`</span>
Server started and listening on port <span class="m">3000</span> ...
</code></pre></div>
<h3 id="datenbank-erstellen">Datenbank erstellen<a class="headerlink" href="#datenbank-erstellen" title="Permanent link">&para;</a></h3>
<p><a href="https://www.mongodb.com/de-de">MongoDB</a> ist die am meisten verwendete <em>NoSQL (not only SQL)</em> Datenbank. Sie basiert nicht auf Relationen, Tabellen und ihren Beziehungen zueinander (ist also keine <em>relationale</em> Datenbank), sondern speichert Dokumente in JSON-ähnlichem Format. Die <a href="https://github.com/mongodb/mongo">Community Edition der MongoDB</a> ist Open Source und kostenlos verfügbar. 
Sollten Sie mit <em>Visual Studio Code</em> arbeiten, sollten Sie sich am besten die <a href="https://code.visualstudio.com/docs/azure/mongodb">MongoDB for VS Code</a>-Ereiterung installieren. </p>
<p>Zur Verwendung von <em>MongoDB</em> im Backend verwenden wir das Modul <a href="https://mongoosejs.com/">Mongoose</a>. Wir installieren <em>Mongoose</em> mithilfe von</p>
<div class="highlight"><pre><span></span><code>npm install mongoose --save
</code></pre></div>
<p>In die <code>package.json</code> wird das Paket und die entsprechende Abhängigkeit eingetragen:</p>
<div class="tabbed-set" data-tabs="6:1"><input checked="checked" id="__tabbed_6_1" name="__tabbed_6" type="radio" /><label for="__tabbed_6_1">package.json</label><div class="tabbed-content">
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="p">{</span>
    <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;backend&quot;</span><span class="p">,</span>
    <span class="nt">&quot;version&quot;</span><span class="p">:</span> <span class="s2">&quot;1.0.0&quot;</span><span class="p">,</span>
    <span class="nt">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Backend REST-API&quot;</span><span class="p">,</span>
    <span class="nt">&quot;main&quot;</span><span class="p">:</span> <span class="s2">&quot;server.js&quot;</span><span class="p">,</span>
    <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;module&quot;</span><span class="p">,</span>
    <span class="nt">&quot;scripts&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;watch&quot;</span><span class="p">:</span> <span class="s2">&quot;nodemon ./server.js&quot;</span><span class="p">,</span>
        <span class="nt">&quot;test&quot;</span><span class="p">:</span> <span class="s2">&quot;echo \&quot;Error: no test specified\&quot; &amp;&amp; exit 1&quot;</span>
    <span class="p">},</span>
    <span class="nt">&quot;keywords&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="s2">&quot;restapi&quot;</span><span class="p">,</span>
        <span class="s2">&quot;backend&quot;</span>
    <span class="p">],</span>
    <span class="nt">&quot;author&quot;</span><span class="p">:</span> <span class="s2">&quot;J. Freiheit&quot;</span><span class="p">,</span>
    <span class="nt">&quot;license&quot;</span><span class="p">:</span> <span class="s2">&quot;ISC&quot;</span><span class="p">,</span>
    <span class="nt">&quot;dependencies&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;express&quot;</span><span class="p">:</span> <span class="s2">&quot;^4.17.1&quot;</span><span class="p">,</span>
<span class="hll">        <span class="nt">&quot;mongoose&quot;</span><span class="p">:</span> <span class="s2">&quot;^6.0.14&quot;</span>
</span>    <span class="p">},</span>
    <span class="nt">&quot;devDependencies&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;nodemon&quot;</span><span class="p">:</span> <span class="s2">&quot;^2.0.15&quot;</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
</td></tr></table>
</div>
</div>
<p><em>Mongoose</em> stellt eine einfach zu verwendende Schnittstelle zwischen Node.js und MongoDB bereit. Die
MongoDB benötigen wir aber trotzdem (wir könnten jdoch auch eine Cloud von MongoDB oder z.B. <code>mlab.com</code> verwenden). Bevor wir uns mit der MongoDB verbinden, erstellen wir zunächst noch eine Datenbank. </p>
<h3 id="mongosh-mongodb-in-der-shell">Mongosh - MongoDB in der Shell<a class="headerlink" href="#mongosh-mongodb-in-der-shell" title="Permanent link">&para;</a></h3>
<p>Um eine Datenbank mithilfe von MongoDB zu erstellen, verwenden wir <a href="https://docs.mongodb.com/mongodb-shell/">mongosh</a>. Installationsanleitungen zu <em>mongosh</em> finden Sie <a href="https://docs.mongodb.com/mongodb-shell/install/#std-label-mdb-shell-install">hier</a>. Nach der Installation von <em>mongosh</em> geben wir im Terminal </p>
<div class="highlight"><pre><span></span><code>mongosh 
</code></pre></div>
<p>ein. Es erscheint etwas in der Form:</p>
<div class="highlight"><pre><span></span><code>Current Mongosh Log ID: 61ae3471fef87d1bebfa13a1
Connecting to:      mongodb://127.0.0.1:27017/?directConnection<span class="o">=</span>true<span class="p">&amp;</span><span class="nv">serverSelectionTimeoutMS</span><span class="o">=</span><span class="m">2000</span>
Using MongoDB:      <span class="m">5</span>.0.3
Using Mongosh:      <span class="m">1</span>.1.6

For mongosh info see: https://docs.mongodb.com/mongodb-shell/


To <span class="nb">help</span> improve our products, anonymous usage data is collected and sent to MongoDB periodically <span class="o">(</span>https://www.mongodb.com/legal/privacy-policy<span class="o">)</span>.
You can opt-out by running the disableTelemetry<span class="o">()</span> command.

------
   The server generated these startup warnings when booting:
   <span class="m">2021</span>-12-03T08:35:22.188+01:00: Access control is not enabled <span class="k">for</span> the database. Read and write access to data and configuration is unrestricted
------

Warning: Found ~/.mongorc.js, but not ~/.mongoshrc.js. ~/.mongorc.js will not be loaded.
  You may want to copy or rename ~/.mongorc.js to ~/.mongoshrc.js.
test&gt; 
</code></pre></div>
<p>Die Warnung kann <a href="https://www.mongodb.com/community/forums/t/warning-found-mongorc-js-but-not-mongoshrc-js-mongorc-js-will-not-be-loaded/129716/4">ignoriert</a> werden. Die Datei <code>mongorc.js</code> wurde erstellt, als einmal in die Shell <code>mongo</code> eingegeben wurde. Das ist aber <code>deprecated</code> und es soll stattdessen die <code>mongosh</code> verwendet werden, was wir ja auch machen. </p>
<div class="highlight"><pre><span></span><code>&gt; use rest
</code></pre></div>
<p>(ohne das <code>&gt;</code> - das soll nur symbolisieren, dass wir in der MongoDB-Shell sind). Es entsteht die Datenbank <code>rest</code>. Wir befüllen diese Datenbank probehalber mit Daten (löschen wir wieder)</p>
<div class="highlight"><pre><span></span><code>&gt; db.user.insert({name: &quot;Ada Lovelace&quot;, age: 206})
</code></pre></div>
<ul>
<li>Falls Sie <em>Visual Studio Code</em>  verwenden und darin die <a href="https://code.visualstudio.com/docs/azure/mongodb">MongoDB for VS Code</a>-Ereiterung installiert haben, können Sie auf der linken Seite auf das MongoDB-Blatt klicken und das <code>Advanced Connection Settings</code> mit dem Formular <code>Open form</code> anklicken.</li>
</ul>
<p>Sie geben <code>mongodb://127.0.0.1:27017</code> ein und dass Sie keine Authentifizierung verwenden. Öffnen Sie die <code>connection</code> und darin <code>rest</code> und es erscheint</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
  <span class="nt">&quot;_id&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;$oid&quot;</span><span class="p">:</span> <span class="s2">&quot;60ddc2e80de75bf12565e491&quot;</span>
  <span class="p">},</span>
  <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Ada Lovelace&quot;</span><span class="p">,</span>
  <span class="nt">&quot;age&quot;</span><span class="p">:</span> <span class="mi">206</span>
<span class="p">}</span>
</code></pre></div>
<ul>
<li>Um sich in Node.js mit der DB zu verbinden, geben Sie </li>
</ul>
<div class="tabbed-set" data-tabs="7:1"><input checked="checked" id="__tabbed_7_1" name="__tabbed_7" type="radio" /><label for="__tabbed_7_1">app.js</label><div class="tabbed-content">
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="kd">const</span> <span class="nx">express</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;express&#39;</span><span class="p">);</span>
<span class="hll"><span class="kd">const</span> <span class="nx">mongoose</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;mongoose&#39;</span><span class="p">);</span>
</span><span class="kd">const</span> <span class="nx">app</span> <span class="o">=</span> <span class="nx">express</span><span class="p">();</span>

<span class="c1">// Routen</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">,</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="s1">&#39;Hello FIW! (home)&#39;</span><span class="p">);</span>
<span class="p">});</span>

<span class="nx">app</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;/test&#39;</span><span class="p">,</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="s1">&#39;Hello FIW! (home/test)&#39;</span><span class="p">);</span>
<span class="p">});</span>

<span class="c1">// connect to mongoDB</span>
<span class="hll"><span class="nx">mongoose</span><span class="p">.</span><span class="nx">connect</span><span class="p">(</span><span class="s1">&#39;mongodb://127.0.0.1:27017/rest&#39;</span><span class="p">,</span> <span class="p">{</span> <span class="nx">useNewUrlParser</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span> <span class="nx">useUnifiedTopology</span><span class="o">:</span> <span class="kc">true</span> <span class="p">});</span>
</span><span class="hll"><span class="kd">const</span> <span class="nx">db</span> <span class="o">=</span> <span class="nx">mongoose</span><span class="p">.</span><span class="nx">connection</span><span class="p">;</span>
</span><span class="hll"><span class="nx">db</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="nx">console</span><span class="p">,</span> <span class="s1">&#39;connection error:&#39;</span><span class="p">));</span>
</span><span class="hll"><span class="nx">db</span><span class="p">.</span><span class="nx">once</span><span class="p">(</span><span class="s1">&#39;open&#39;</span><span class="p">,</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span><span class="hll">    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;connected to DB&#39;</span><span class="p">);</span>
</span><span class="hll"><span class="p">});</span>
</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">listen</span><span class="p">(</span><span class="mf">3000</span><span class="p">);</span> <span class="c1">// port 3000</span>
</code></pre></div>
</td></tr></table>
</div>
</div>
<p>ein. Im Terminal sollte dann</p>
<div class="highlight"><pre><span></span><code><span class="o">[</span>nodemon<span class="o">]</span> restarting due to changes...
<span class="o">[</span>nodemon<span class="o">]</span> starting <span class="sb">`</span>node app.js<span class="sb">`</span>
connected to DB
</code></pre></div>
<p>erscheinen. </p>
<ul>
<li>für die "geheimen" Zugangsdaten (die jetzt noch gar nicht "geheim" sind) verwenden wir das <a href="https://www.npmjs.com/package/dotenv">dotenv</a>-Paket</li>
</ul>
<div class="highlight"><pre><span></span><code>npm install dotenv
</code></pre></div>
<ul>
<li>Im Projektordner erstellen wir und eine Datei <code>.env</code> (mit Punkt!) und schreiben darein:</li>
</ul>
<div class="tabbed-set" data-tabs="8:1"><input checked="checked" id="__tabbed_8_1" name="__tabbed_8" type="radio" /><label for="__tabbed_8_1">.env</label><div class="tabbed-content">
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="nx">DB_CONNECTION</span> <span class="o">=</span> <span class="s1">&#39;mongodb://127.0.0.1:27017/rest&#39;</span><span class="p">;</span>
</code></pre></div>
</td></tr></table>
</div>
</div>
<p>und in die <code>app.js</code>:</p>
<div class="tabbed-set" data-tabs="9:1"><input checked="checked" id="__tabbed_9_1" name="__tabbed_9" type="radio" /><label for="__tabbed_9_1">app.js</label><div class="tabbed-content">
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="kd">const</span> <span class="nx">express</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;express&#39;</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">mongoose</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;mongoose&#39;</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">app</span> <span class="o">=</span> <span class="nx">express</span><span class="p">();</span>
<span class="hll"><span class="nx">require</span><span class="p">(</span><span class="s1">&#39;dotenv/config&#39;</span><span class="p">);</span>
</span>
<span class="c1">// Routen</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">,</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="s1">&#39;Hello FIW! (home)&#39;</span><span class="p">);</span>
<span class="p">});</span>

<span class="nx">app</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;/test&#39;</span><span class="p">,</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="s1">&#39;Hello FIW! (home/test)&#39;</span><span class="p">);</span>
<span class="p">});</span>

<span class="c1">// connect to mongoDB</span>
<span class="hll"><span class="nx">mongoose</span><span class="p">.</span><span class="nx">connect</span><span class="p">(</span><span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">DB_CONNECTION</span><span class="p">,</span> <span class="p">{</span> <span class="nx">useNewUrlParser</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span> <span class="nx">useUnifiedTopology</span><span class="o">:</span> <span class="kc">true</span> <span class="p">});</span>
</span><span class="kd">const</span> <span class="nx">db</span> <span class="o">=</span> <span class="nx">mongoose</span><span class="p">.</span><span class="nx">connection</span><span class="p">;</span>
<span class="nx">db</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="nx">console</span><span class="p">,</span> <span class="s1">&#39;connection error:&#39;</span><span class="p">));</span>
<span class="nx">db</span><span class="p">.</span><span class="nx">once</span><span class="p">(</span><span class="s1">&#39;open&#39;</span><span class="p">,</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;connected to DB&#39;</span><span class="p">);</span>
<span class="p">});</span>

<span class="nx">app</span><span class="p">.</span><span class="nx">listen</span><span class="p">(</span><span class="mf">3000</span><span class="p">);</span> <span class="c1">// port 3000</span>
</code></pre></div>
</td></tr></table>
</div>
</div>
<p>Bevor wir mit der Implementierung des Backends fortfahren, erstellen wir unsere Datenbank. Am einfachsten ist es, wenn wir <code>phpmyadmin</code> unter <code>localhost</code> öffnen (<code>http://localhost/phpmyadmin</code>) und dort zunächst eine Datenbank anlegen (unter <code>Neu</code>); benennen Sie die Datenbank am besten <code>mockupdb</code> und darin folgende <code>sql</code>-Datei importieren:</p>
<details><summary>members.sql</summary><div class="highlight"><pre><span></span><code><span class="c1">-- phpMyAdmin SQL Dump</span>
<span class="c1">-- version 5.0.2</span>
<span class="c1">-- https://www.phpmyadmin.net/</span>
<span class="c1">--</span>
<span class="c1">-- Host: localhost</span>
<span class="c1">-- Erstellungszeit: 23. Nov 2020 um 16:23</span>
<span class="c1">-- Server-Version: 8.0.17</span>
<span class="c1">-- PHP-Version: 7.3.22-(to be removed in future macOS)</span>

<span class="k">SET</span> <span class="n">SQL_MODE</span> <span class="o">=</span> <span class="ss">&quot;NO_AUTO_VALUE_ON_ZERO&quot;</span><span class="p">;</span>
<span class="k">START</span> <span class="k">TRANSACTION</span><span class="p">;</span>
<span class="k">SET</span> <span class="n">time_zone</span> <span class="o">=</span> <span class="ss">&quot;+00:00&quot;</span><span class="p">;</span>


<span class="cm">/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */</span><span class="p">;</span>
<span class="cm">/*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */</span><span class="p">;</span>
<span class="cm">/*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */</span><span class="p">;</span>
<span class="cm">/*!40101 SET NAMES utf8mb4 */</span><span class="p">;</span>

<span class="c1">--</span>
<span class="c1">-- Datenbank: `mockupdb`</span>
<span class="c1">--</span>

<span class="c1">-- --------------------------------------------------------</span>

<span class="c1">--</span>
<span class="c1">-- Tabellenstruktur für Tabelle `members`</span>
<span class="c1">--</span>

<span class="k">CREATE</span> <span class="k">TABLE</span> <span class="o">`</span><span class="n">members</span><span class="o">`</span> <span class="p">(</span>
  <span class="o">`</span><span class="n">id</span><span class="o">`</span> <span class="nb">int</span><span class="p">(</span><span class="mi">11</span><span class="p">)</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span>
  <span class="o">`</span><span class="n">firstname</span><span class="o">`</span> <span class="nb">varchar</span><span class="p">(</span><span class="mi">25</span><span class="p">)</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span>
  <span class="o">`</span><span class="n">lastname</span><span class="o">`</span> <span class="nb">varchar</span><span class="p">(</span><span class="mi">25</span><span class="p">)</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span>
  <span class="o">`</span><span class="n">email</span><span class="o">`</span> <span class="nb">varchar</span><span class="p">(</span><span class="mi">30</span><span class="p">)</span> <span class="k">NOT</span> <span class="k">NULL</span>
<span class="p">)</span> <span class="n">ENGINE</span><span class="o">=</span><span class="n">InnoDB</span> <span class="k">DEFAULT</span> <span class="n">CHARSET</span><span class="o">=</span><span class="n">utf8mb4</span> <span class="k">COLLATE</span><span class="o">=</span><span class="n">utf8mb4_0900_ai_ci</span><span class="p">;</span>

<span class="c1">--</span>
<span class="c1">-- Daten für Tabelle `members`</span>
<span class="c1">--</span>

<span class="k">INSERT</span> <span class="k">INTO</span> <span class="o">`</span><span class="n">members</span><span class="o">`</span> <span class="p">(</span><span class="o">`</span><span class="n">id</span><span class="o">`</span><span class="p">,</span> <span class="o">`</span><span class="n">firstname</span><span class="o">`</span><span class="p">,</span> <span class="o">`</span><span class="n">lastname</span><span class="o">`</span><span class="p">,</span> <span class="o">`</span><span class="n">email</span><span class="o">`</span><span class="p">)</span> <span class="k">VALUES</span>
<span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;Catherine&#39;</span><span class="p">,</span> <span class="s1">&#39;Williams&#39;</span><span class="p">,</span> <span class="s1">&#39;cwilliamsl@360.cn&#39;</span><span class="p">),</span>
<span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;Adam&#39;</span><span class="p">,</span> <span class="s1">&#39;Anderson&#39;</span><span class="p">,</span> <span class="s1">&#39;aanderson8@google.fr&#39;</span><span class="p">),</span>
<span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="s1">&#39;Susan&#39;</span><span class="p">,</span> <span class="s1">&#39;Andrews&#39;</span><span class="p">,</span> <span class="s1">&#39;sandrewsn@google.co.jp&#39;</span><span class="p">),</span>
<span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="s1">&#39;Catherine&#39;</span><span class="p">,</span> <span class="s1">&#39;Andrews&#39;</span><span class="p">,</span> <span class="s1">&#39;candrewsp@noaa.gov&#39;</span><span class="p">),</span>
<span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="s1">&#39;Alan&#39;</span><span class="p">,</span> <span class="s1">&#39;Bradley&#39;</span><span class="p">,</span> <span class="s1">&#39;abradley1c@globo.com&#39;</span><span class="p">),</span>
<span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="s1">&#39;Anne&#39;</span><span class="p">,</span> <span class="s1">&#39;Brooks&#39;</span><span class="p">,</span> <span class="s1">&#39;abrooks16@bravesites.com&#39;</span><span class="p">),</span>
<span class="p">(</span><span class="mi">7</span><span class="p">,</span> <span class="s1">&#39;Russell&#39;</span><span class="p">,</span> <span class="s1">&#39;Brown&#39;</span><span class="p">,</span> <span class="s1">&#39;rbrownq@nifty.com&#39;</span><span class="p">),</span>
<span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="s1">&#39;Ryan&#39;</span><span class="p">,</span> <span class="s1">&#39;Burton&#39;</span><span class="p">,</span> <span class="s1">&#39;rburton18@foxnews.com&#39;</span><span class="p">),</span>
<span class="p">(</span><span class="mi">9</span><span class="p">,</span> <span class="s1">&#39;Roy&#39;</span><span class="p">,</span> <span class="s1">&#39;Campbell&#39;</span><span class="p">,</span> <span class="s1">&#39;rcampbell1@geocities.com&#39;</span><span class="p">),</span>
<span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="s1">&#39;Russell&#39;</span><span class="p">,</span> <span class="s1">&#39;Campbell&#39;</span><span class="p">,</span> <span class="s1">&#39;rcampbell17@eventbrite.com&#39;</span><span class="p">),</span>
<span class="p">(</span><span class="mi">11</span><span class="p">,</span> <span class="s1">&#39;Bonnie&#39;</span><span class="p">,</span> <span class="s1">&#39;Coleman&#39;</span><span class="p">,</span> <span class="s1">&#39;bcoleman11@fc2.com&#39;</span><span class="p">),</span>
<span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="s1">&#39;Ernest&#39;</span><span class="p">,</span> <span class="s1">&#39;Coleman&#39;</span><span class="p">,</span> <span class="s1">&#39;ecoleman15@businessweek.com&#39;</span><span class="p">),</span>
<span class="p">(</span><span class="mi">13</span><span class="p">,</span> <span class="s1">&#39;Richard&#39;</span><span class="p">,</span> <span class="s1">&#39;Cruz&#39;</span><span class="p">,</span> <span class="s1">&#39;rcruz7@unc.edu&#39;</span><span class="p">),</span>
<span class="p">(</span><span class="mi">14</span><span class="p">,</span> <span class="s1">&#39;Sean&#39;</span><span class="p">,</span> <span class="s1">&#39;Cruz&#39;</span><span class="p">,</span> <span class="s1">&#39;scruz10@answers.com&#39;</span><span class="p">),</span>
<span class="p">(</span><span class="mi">15</span><span class="p">,</span> <span class="s1">&#39;Rebecca&#39;</span><span class="p">,</span> <span class="s1">&#39;Cunningham&#39;</span><span class="p">,</span> <span class="s1">&#39;rcunninghamd@mac.com&#39;</span><span class="p">),</span>
<span class="p">(</span><span class="mi">16</span><span class="p">,</span> <span class="s1">&#39;Margaret&#39;</span><span class="p">,</span> <span class="s1">&#39;Evans&#39;</span><span class="p">,</span> <span class="s1">&#39;mevansh@pcworld.com&#39;</span><span class="p">),</span>
<span class="p">(</span><span class="mi">17</span><span class="p">,</span> <span class="s1">&#39;Jeffrey&#39;</span><span class="p">,</span> <span class="s1">&#39;Ford&#39;</span><span class="p">,</span> <span class="s1">&#39;jford14@cnet.com&#39;</span><span class="p">),</span>
<span class="p">(</span><span class="mi">18</span><span class="p">,</span> <span class="s1">&#39;Andrea&#39;</span><span class="p">,</span> <span class="s1">&#39;Gardner&#39;</span><span class="p">,</span> <span class="s1">&#39;agardnerv@woothemes.com&#39;</span><span class="p">),</span>
<span class="p">(</span><span class="mi">19</span><span class="p">,</span> <span class="s1">&#39;Deborah&#39;</span><span class="p">,</span> <span class="s1">&#39;George&#39;</span><span class="p">,</span> <span class="s1">&#39;dgeorge6@furl.net&#39;</span><span class="p">),</span>
<span class="p">(</span><span class="mi">20</span><span class="p">,</span> <span class="s1">&#39;Sean&#39;</span><span class="p">,</span> <span class="s1">&#39;Gibson&#39;</span><span class="p">,</span> <span class="s1">&#39;sgibsony@alexa.com&#39;</span><span class="p">),</span>
<span class="p">(</span><span class="mi">21</span><span class="p">,</span> <span class="s1">&#39;Virginia&#39;</span><span class="p">,</span> <span class="s1">&#39;Graham&#39;</span><span class="p">,</span> <span class="s1">&#39;vgrahamk@aol.com&#39;</span><span class="p">),</span>
<span class="p">(</span><span class="mi">22</span><span class="p">,</span> <span class="s1">&#39;Steven&#39;</span><span class="p">,</span> <span class="s1">&#39;Hamilton&#39;</span><span class="p">,</span> <span class="s1">&#39;shamiltonu@state.tx.us&#39;</span><span class="p">),</span>
<span class="p">(</span><span class="mi">23</span><span class="p">,</span> <span class="s1">&#39;Virginia&#39;</span><span class="p">,</span> <span class="s1">&#39;Hawkins&#39;</span><span class="p">,</span> <span class="s1">&#39;vhawkinsf@ehow.com&#39;</span><span class="p">),</span>
<span class="p">(</span><span class="mi">24</span><span class="p">,</span> <span class="s1">&#39;Edward&#39;</span><span class="p">,</span> <span class="s1">&#39;Hicks&#39;</span><span class="p">,</span> <span class="s1">&#39;ehicksc@pcworld.com&#39;</span><span class="p">),</span>
<span class="p">(</span><span class="mi">25</span><span class="p">,</span> <span class="s1">&#39;Mark&#39;</span><span class="p">,</span> <span class="s1">&#39;Johnson&#39;</span><span class="p">,</span> <span class="s1">&#39;mjohnsonj@hostgator.com&#39;</span><span class="p">),</span>
<span class="p">(</span><span class="mi">26</span><span class="p">,</span> <span class="s1">&#39;Ruth&#39;</span><span class="p">,</span> <span class="s1">&#39;Jordan&#39;</span><span class="p">,</span> <span class="s1">&#39;rjordan1a@smugmug.com&#39;</span><span class="p">),</span>
<span class="p">(</span><span class="mi">27</span><span class="p">,</span> <span class="s1">&#39;Antonio&#39;</span><span class="p">,</span> <span class="s1">&#39;Kim&#39;</span><span class="p">,</span> <span class="s1">&#39;akim4@odnoklassniki.ru&#39;</span><span class="p">),</span>
<span class="p">(</span><span class="mi">28</span><span class="p">,</span> <span class="s1">&#39;Jennifer&#39;</span><span class="p">,</span> <span class="s1">&#39;Marshall&#39;</span><span class="p">,</span> <span class="s1">&#39;jmarshallt@gnu.org&#39;</span><span class="p">),</span>
<span class="p">(</span><span class="mi">29</span><span class="p">,</span> <span class="s1">&#39;Eric&#39;</span><span class="p">,</span> <span class="s1">&#39;Matthews&#39;</span><span class="p">,</span> <span class="s1">&#39;ematthews5@independent.co.uk&#39;</span><span class="p">),</span>
<span class="p">(</span><span class="mi">30</span><span class="p">,</span> <span class="s1">&#39;Raymond&#39;</span><span class="p">,</span> <span class="s1">&#39;Mcdonald&#39;</span><span class="p">,</span> <span class="s1">&#39;rmcdonald2@ihg.com&#39;</span><span class="p">),</span>
<span class="p">(</span><span class="mi">31</span><span class="p">,</span> <span class="s1">&#39;Eric&#39;</span><span class="p">,</span> <span class="s1">&#39;Miller&#39;</span><span class="p">,</span> <span class="s1">&#39;emillere@creativecommons.org&#39;</span><span class="p">),</span>
<span class="p">(</span><span class="mi">32</span><span class="p">,</span> <span class="s1">&#39;Jonathan&#39;</span><span class="p">,</span> <span class="s1">&#39;Morales&#39;</span><span class="p">,</span> <span class="s1">&#39;jmoralesa@ovh.net&#39;</span><span class="p">),</span>
<span class="p">(</span><span class="mi">33</span><span class="p">,</span> <span class="s1">&#39;Marie&#39;</span><span class="p">,</span> <span class="s1">&#39;Morgan&#39;</span><span class="p">,</span> <span class="s1">&#39;mmorganb@cloudflare.com&#39;</span><span class="p">),</span>
<span class="p">(</span><span class="mi">34</span><span class="p">,</span> <span class="s1">&#39;Amanda&#39;</span><span class="p">,</span> <span class="s1">&#39;Nelson&#39;</span><span class="p">,</span> <span class="s1">&#39;anelson13@indiatimes.com&#39;</span><span class="p">),</span>
<span class="p">(</span><span class="mi">35</span><span class="p">,</span> <span class="s1">&#39;Lisa&#39;</span><span class="p">,</span> <span class="s1">&#39;Olson&#39;</span><span class="p">,</span> <span class="s1">&#39;lolsonr@telegraph.co.uk&#39;</span><span class="p">),</span>
<span class="p">(</span><span class="mi">36</span><span class="p">,</span> <span class="s1">&#39;Alice&#39;</span><span class="p">,</span> <span class="s1">&#39;Ortiz&#39;</span><span class="p">,</span> <span class="s1">&#39;aortizw@histats.com&#39;</span><span class="p">),</span>
<span class="p">(</span><span class="mi">37</span><span class="p">,</span> <span class="s1">&#39;Peter&#39;</span><span class="p">,</span> <span class="s1">&#39;Phillips&#39;</span><span class="p">,</span> <span class="s1">&#39;pphillipss@1688.com&#39;</span><span class="p">),</span>
<span class="p">(</span><span class="mi">38</span><span class="p">,</span> <span class="s1">&#39;Matthew&#39;</span><span class="p">,</span> <span class="s1">&#39;Porter&#39;</span><span class="p">,</span> <span class="s1">&#39;mporter9@europa.eu&#39;</span><span class="p">),</span>
<span class="p">(</span><span class="mi">39</span><span class="p">,</span> <span class="s1">&#39;Tammy&#39;</span><span class="p">,</span> <span class="s1">&#39;Ray&#39;</span><span class="p">,</span> <span class="s1">&#39;trayx@weather.com&#39;</span><span class="p">),</span>
<span class="p">(</span><span class="mi">40</span><span class="p">,</span> <span class="s1">&#39;Mark&#39;</span><span class="p">,</span> <span class="s1">&#39;Richardson&#39;</span><span class="p">,</span> <span class="s1">&#39;mrichardson1d@ihg.com&#39;</span><span class="p">),</span>
<span class="p">(</span><span class="mi">41</span><span class="p">,</span> <span class="s1">&#39;Joan&#39;</span><span class="p">,</span> <span class="s1">&#39;Roberts&#39;</span><span class="p">,</span> <span class="s1">&#39;jroberts12@alibaba.com&#39;</span><span class="p">),</span>
<span class="p">(</span><span class="mi">42</span><span class="p">,</span> <span class="s1">&#39;Kathleen&#39;</span><span class="p">,</span> <span class="s1">&#39;Rose&#39;</span><span class="p">,</span> <span class="s1">&#39;kroseg@pinterest.com&#39;</span><span class="p">),</span>
<span class="p">(</span><span class="mi">43</span><span class="p">,</span> <span class="s1">&#39;Steve&#39;</span><span class="p">,</span> <span class="s1">&#39;Sanders&#39;</span><span class="p">,</span> <span class="s1">&#39;ssanders1b@wikispaces.com&#39;</span><span class="p">),</span>
<span class="p">(</span><span class="mi">44</span><span class="p">,</span> <span class="s1">&#39;Shirley&#39;</span><span class="p">,</span> <span class="s1">&#39;Scott&#39;</span><span class="p">,</span> <span class="s1">&#39;sscottm@macromedia.com&#39;</span><span class="p">),</span>
<span class="p">(</span><span class="mi">45</span><span class="p">,</span> <span class="s1">&#39;Lillian&#39;</span><span class="p">,</span> <span class="s1">&#39;Stephens&#39;</span><span class="p">,</span> <span class="s1">&#39;lstephens19@hugedomains.com&#39;</span><span class="p">),</span>
<span class="p">(</span><span class="mi">46</span><span class="p">,</span> <span class="s1">&#39;Nicole&#39;</span><span class="p">,</span> <span class="s1">&#39;Thompson&#39;</span><span class="p">,</span> <span class="s1">&#39;nthompson3@admin.ch&#39;</span><span class="p">),</span>
<span class="p">(</span><span class="mi">47</span><span class="p">,</span> <span class="s1">&#39;Marie&#39;</span><span class="p">,</span> <span class="s1">&#39;Thompson&#39;</span><span class="p">,</span> <span class="s1">&#39;mthompsonz@yelp.com&#39;</span><span class="p">),</span>
<span class="p">(</span><span class="mi">48</span><span class="p">,</span> <span class="s1">&#39;Alan&#39;</span><span class="p">,</span> <span class="s1">&#39;Vasquez&#39;</span><span class="p">,</span> <span class="s1">&#39;avasquezo@miibeian.gov.cn&#39;</span><span class="p">),</span>
<span class="p">(</span><span class="mi">49</span><span class="p">,</span> <span class="s1">&#39;Mildred&#39;</span><span class="p">,</span> <span class="s1">&#39;Watkins&#39;</span><span class="p">,</span> <span class="s1">&#39;mwatkins0@miibeian.gov.cn&#39;</span><span class="p">),</span>
<span class="p">(</span><span class="mi">50</span><span class="p">,</span> <span class="s1">&#39;Eugene&#39;</span><span class="p">,</span> <span class="s1">&#39;Williams&#39;</span><span class="p">,</span> <span class="s1">&#39;ewilliamsi@deliciousdays.com&#39;</span><span class="p">);</span>

<span class="c1">--</span>
<span class="c1">-- Indizes der exportierten Tabellen</span>
<span class="c1">--</span>

<span class="c1">--</span>
<span class="c1">-- Indizes für die Tabelle `members`</span>
<span class="c1">--</span>
<span class="k">ALTER</span> <span class="k">TABLE</span> <span class="o">`</span><span class="n">members</span><span class="o">`</span>
  <span class="k">ADD</span> <span class="k">PRIMARY</span> <span class="k">KEY</span> <span class="p">(</span><span class="o">`</span><span class="n">id</span><span class="o">`</span><span class="p">);</span>

<span class="c1">--</span>
<span class="c1">-- AUTO_INCREMENT für exportierte Tabellen</span>
<span class="c1">--</span>

<span class="c1">--</span>
<span class="c1">-- AUTO_INCREMENT für Tabelle `members`</span>
<span class="c1">--</span>
<span class="k">ALTER</span> <span class="k">TABLE</span> <span class="o">`</span><span class="n">members</span><span class="o">`</span>
  <span class="k">MODIFY</span> <span class="o">`</span><span class="n">id</span><span class="o">`</span> <span class="nb">int</span><span class="p">(</span><span class="mi">11</span><span class="p">)</span> <span class="k">NOT</span> <span class="k">NULL</span> <span class="n">AUTO_INCREMENT</span><span class="p">,</span> <span class="n">AUTO_INCREMENT</span><span class="o">=</span><span class="mi">51</span><span class="p">;</span>
<span class="k">COMMIT</span><span class="p">;</span>

<span class="cm">/*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */</span><span class="p">;</span>
<span class="cm">/*!40101 SET CHARACTER_SET_RESULTS=@OLD_CHARACTER_SET_RESULTS */</span><span class="p">;</span>
<span class="cm">/*!40101 SET COLLATION_CONNECTION=@OLD_COLLATION_CONNECTION */</span><span class="p">;</span>
</code></pre></div>
</details>
<p>Falls Sie MySQL vom Studi-Server verwenden, dann müssen Sie </p>
<div class="highlight"><pre><span></span><code><span class="k">COLLATE</span><span class="o">=</span><span class="n">utf8mb4_0900_ai_ci</span>
</code></pre></div>
<p>durch </p>
<div class="highlight"><pre><span></span><code><span class="k">COLLATE</span><span class="o">=</span><span class="n">utf8mb4_general_ci</span>
</code></pre></div>
<p>ersetzen! Sie können sich diese Datei auch <a href="../files/members.sql">hier</a> herunterladen. Prüfen Sie, ob alle 50 Datensätze korrekt eingelsen wurden. Unter <code>Anzeigen</code> in <code>phpmyadmin</code> sollte folgende Tabelle erscheinen:</p>
<p><img alt="phpmyadmin" src="../files/93_phpmyadmin.png" /></p>
<h3 id="datenbank-im-backend-anbinden">Datenbank im Backend anbinden<a class="headerlink" href="#datenbank-im-backend-anbinden" title="Permanent link">&para;</a></h3>
<p>Wir binden nun die Datenbank an unser Backend an. Erstellen Sie sich am besten in Ihrem <code>backend</code>-Ordner einen Ordner <code>config</code> und darin eine <code>db.config.js</code>-Datei mit folgendem Inhalt:</p>
<div class="tabbed-set" data-tabs="10:1"><input checked="checked" id="__tabbed_10_1" name="__tabbed_10" type="radio" /><label for="__tabbed_10_1">config/db.config.js</label><div class="tabbed-content">
<div class="highlight"><pre><span></span><code><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">HOST</span><span class="o">:</span> <span class="s2">&quot;localhost&quot;</span><span class="p">,</span>
    <span class="nx">USER</span><span class="o">:</span> <span class="s2">&quot;root&quot;</span><span class="p">,</span>
    <span class="nx">PASSWORD</span><span class="o">:</span> <span class="s2">&quot;IhrPasswort&quot;</span><span class="p">,</span>
    <span class="nx">DB</span><span class="o">:</span> <span class="s2">&quot;mockupdb&quot;</span>
<span class="p">};</span>
</code></pre></div>
</div>
</div>
<p>Falls Sie MySQL des Studi-Servers verwenden, sieht die <code>db.config.js</code> so aus:</p>
<div class="tabbed-set" data-tabs="11:1"><input checked="checked" id="__tabbed_11_1" name="__tabbed_11" type="radio" /><label for="__tabbed_11_1">config/db.config.js</label><div class="tabbed-content">
<div class="highlight"><pre><span></span><code><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">HOST</span><span class="o">:</span> <span class="s2">&quot;db.f4.htw-berlin.de&quot;</span><span class="p">,</span>
    <span class="nx">USER</span><span class="o">:</span> <span class="s2">&quot;s05xxx&quot;</span><span class="p">,</span>
    <span class="nx">PASSWORD</span><span class="o">:</span> <span class="s2">&quot;IhrPassword&quot;</span><span class="p">,</span>
    <span class="nx">DB</span><span class="o">:</span> <span class="s2">&quot;_s05xxx__mockupdb&quot;</span>
<span class="p">};</span>
</code></pre></div>
</div>
</div>
<p>Sie müssen Ihr Passwort eintragen und, falls Sie Ihre Datenbank anders genannt haben, auch den Datenbanknamen anpassen. </p>
<p>Erstellen Sie sich in Ihrem <code>backend</code>-Ordner einen Ordner <code>app</code> und darin einen Ordner <code>model</code>. In diesem Ordner erstellen Sie sich ein <code>db.js</code>, um die Verbindung zur Datenbank zu implementieren: </p>
<div class="tabbed-set" data-tabs="12:1"><input checked="checked" id="__tabbed_12_1" name="__tabbed_12" type="radio" /><label for="__tabbed_12_1">app/model/db.js</label><div class="tabbed-content">
<div class="highlight"><pre><span></span><code><span class="kd">const</span> <span class="nx">mysql</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&quot;mysql&quot;</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">dbConfig</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&quot;../../config/db.config.js&quot;</span><span class="p">);</span>

<span class="c1">// Create a connection to the database</span>
<span class="kd">const</span> <span class="nx">connection</span> <span class="o">=</span> <span class="nx">mysql</span><span class="p">.</span><span class="nx">createConnection</span><span class="p">({</span>
    <span class="nx">host</span><span class="o">:</span> <span class="nx">dbConfig</span><span class="p">.</span><span class="nx">HOST</span><span class="p">,</span>
    <span class="nx">user</span><span class="o">:</span> <span class="nx">dbConfig</span><span class="p">.</span><span class="nx">USER</span><span class="p">,</span>
    <span class="nx">password</span><span class="o">:</span> <span class="nx">dbConfig</span><span class="p">.</span><span class="nx">PASSWORD</span><span class="p">,</span>
    <span class="nx">database</span><span class="o">:</span> <span class="nx">dbConfig</span><span class="p">.</span><span class="nx">DB</span>
<span class="p">});</span>

<span class="c1">// open the MySQL connection</span>
<span class="nx">connection</span><span class="p">.</span><span class="nx">connect</span><span class="p">(</span><span class="nx">error</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="k">throw</span> <span class="nx">error</span><span class="p">;</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;Successfully connected to the database.&quot;</span><span class="p">);</span>
<span class="p">});</span>

<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="nx">connection</span><span class="p">;</span>
</code></pre></div>
</div>
</div>
<h3 id="ein-model-erstellen">Ein Model erstellen<a class="headerlink" href="#ein-model-erstellen" title="Permanent link">&para;</a></h3>
<p>In dem <code>app/model</code>-Ordner erstellen wir eine Datei <code>members.model.js</code> mit folgendem Inhalt:</p>
<div class="tabbed-set" data-tabs="13:1"><input checked="checked" id="__tabbed_13_1" name="__tabbed_13" type="radio" /><label for="__tabbed_13_1">app/model/members.model.js</label><div class="tabbed-content">
<div class="highlight"><pre><span></span><code><span class="kd">const</span> <span class="nx">sql</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&quot;./db.js&quot;</span><span class="p">);</span>

<span class="c1">// constructor</span>
<span class="kd">const</span> <span class="nx">Member</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">member</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">firstname</span> <span class="o">=</span> <span class="nx">member</span><span class="p">.</span><span class="nx">firstname</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">lastname</span> <span class="o">=</span> <span class="nx">member</span><span class="p">.</span><span class="nx">lastname</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">email</span> <span class="o">=</span> <span class="nx">member</span><span class="p">.</span><span class="nx">email</span><span class="p">;</span>
<span class="p">};</span>

<span class="nx">Member</span><span class="p">.</span><span class="nx">create</span> <span class="o">=</span> <span class="p">(</span><span class="nx">newMember</span><span class="p">,</span> <span class="nx">result</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="nx">sql</span><span class="p">.</span><span class="nx">query</span><span class="p">(</span><span class="s2">&quot;INSERT INTO members SET ?&quot;</span><span class="p">,</span> <span class="nx">newMember</span><span class="p">,</span> <span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;error: &quot;</span><span class="p">,</span> <span class="nx">err</span><span class="p">);</span>
            <span class="nx">result</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="kc">null</span><span class="p">);</span>
            <span class="k">return</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;created member: &quot;</span><span class="p">,</span> <span class="p">{</span> <span class="nx">id</span><span class="o">:</span> <span class="nx">res</span><span class="p">.</span><span class="nx">insertId</span><span class="p">,</span> <span class="p">...</span><span class="nx">newMember</span> <span class="p">});</span>
        <span class="nx">result</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="p">{</span> <span class="nx">id</span><span class="o">:</span> <span class="nx">res</span><span class="p">.</span><span class="nx">insertId</span><span class="p">,</span> <span class="p">...</span><span class="nx">newMember</span> <span class="p">});</span>
    <span class="p">});</span>
<span class="p">};</span>

<span class="nx">Member</span><span class="p">.</span><span class="nx">findById</span> <span class="o">=</span> <span class="p">(</span><span class="nx">memberId</span><span class="p">,</span> <span class="nx">result</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="nx">sql</span><span class="p">.</span><span class="nx">query</span><span class="p">(</span><span class="sb">`SELECT * FROM members WHERE id = </span><span class="si">${</span><span class="nx">memberId</span><span class="si">}</span><span class="sb">`</span><span class="p">,</span> <span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;error: &quot;</span><span class="p">,</span> <span class="nx">err</span><span class="p">);</span>
            <span class="nx">result</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="kc">null</span><span class="p">);</span>
            <span class="k">return</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="k">if</span> <span class="p">(</span><span class="nx">res</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;found member: &quot;</span><span class="p">,</span> <span class="nx">res</span><span class="p">[</span><span class="mf">0</span><span class="p">]);</span>
            <span class="nx">result</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="nx">res</span><span class="p">[</span><span class="mf">0</span><span class="p">]);</span>
            <span class="k">return</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="c1">// not found Member with the id</span>
        <span class="nx">result</span><span class="p">({</span> <span class="nx">kind</span><span class="o">:</span> <span class="s2">&quot;not_found&quot;</span> <span class="p">},</span> <span class="kc">null</span><span class="p">);</span>
    <span class="p">});</span>
<span class="p">};</span>

<span class="nx">Member</span><span class="p">.</span><span class="nx">getAll</span> <span class="o">=</span> <span class="nx">result</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="nx">sql</span><span class="p">.</span><span class="nx">query</span><span class="p">(</span><span class="s2">&quot;SELECT * FROM members&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;error: &quot;</span><span class="p">,</span> <span class="nx">err</span><span class="p">);</span>
            <span class="nx">result</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="nx">err</span><span class="p">);</span>
            <span class="k">return</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;members: &quot;</span><span class="p">,</span> <span class="nx">res</span><span class="p">);</span>
        <span class="nx">result</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="nx">res</span><span class="p">);</span>
    <span class="p">});</span>
<span class="p">};</span>

<span class="nx">Member</span><span class="p">.</span><span class="nx">updateById</span> <span class="o">=</span> <span class="p">(</span><span class="nx">id</span><span class="p">,</span> <span class="nx">member</span><span class="p">,</span> <span class="nx">result</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="nx">sql</span><span class="p">.</span><span class="nx">query</span><span class="p">(</span>
        <span class="s2">&quot;UPDATE members SET firstname = ?, lastname = ?, email = ? WHERE id = ?&quot;</span><span class="p">,</span>
        <span class="p">[</span><span class="nx">member</span><span class="p">.</span><span class="nx">firstname</span><span class="p">,</span> <span class="nx">member</span><span class="p">.</span><span class="nx">lastname</span><span class="p">,</span> <span class="nx">member</span><span class="p">.</span><span class="nx">email</span><span class="p">,</span> <span class="nx">id</span><span class="p">],</span>
        <span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;error: &quot;</span><span class="p">,</span> <span class="nx">err</span><span class="p">);</span>
                <span class="nx">result</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="nx">err</span><span class="p">);</span>
                <span class="k">return</span><span class="p">;</span>
            <span class="p">}</span>

            <span class="k">if</span> <span class="p">(</span><span class="nx">res</span><span class="p">.</span><span class="nx">affectedRows</span> <span class="o">==</span> <span class="mf">0</span><span class="p">)</span> <span class="p">{</span>
                <span class="c1">// not found Customer with the id</span>
                <span class="nx">result</span><span class="p">({</span> <span class="nx">kind</span><span class="o">:</span> <span class="s2">&quot;not_found&quot;</span> <span class="p">},</span> <span class="kc">null</span><span class="p">);</span>
                <span class="k">return</span><span class="p">;</span>
            <span class="p">}</span>

            <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;updated member: &quot;</span><span class="p">,</span> <span class="p">{</span> <span class="nx">id</span><span class="o">:</span> <span class="nx">id</span><span class="p">,</span> <span class="p">...</span><span class="nx">member</span> <span class="p">});</span>
            <span class="nx">result</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="p">{</span> <span class="nx">id</span><span class="o">:</span> <span class="nx">id</span><span class="p">,</span> <span class="p">...</span><span class="nx">member</span> <span class="p">});</span>
        <span class="p">}</span>
    <span class="p">);</span>
<span class="p">};</span>

<span class="nx">Member</span><span class="p">.</span><span class="nx">remove</span> <span class="o">=</span> <span class="p">(</span><span class="nx">id</span><span class="p">,</span> <span class="nx">result</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="nx">sql</span><span class="p">.</span><span class="nx">query</span><span class="p">(</span><span class="s2">&quot;DELETE FROM members WHERE id = ?&quot;</span><span class="p">,</span> <span class="nx">id</span><span class="p">,</span> <span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;error: &quot;</span><span class="p">,</span> <span class="nx">err</span><span class="p">);</span>
            <span class="nx">result</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="nx">err</span><span class="p">);</span>
            <span class="k">return</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="k">if</span> <span class="p">(</span><span class="nx">res</span><span class="p">.</span><span class="nx">affectedRows</span> <span class="o">==</span> <span class="mf">0</span><span class="p">)</span> <span class="p">{</span>
            <span class="c1">// not found Member with the id</span>
            <span class="nx">result</span><span class="p">({</span> <span class="nx">kind</span><span class="o">:</span> <span class="s2">&quot;not_found&quot;</span> <span class="p">},</span> <span class="kc">null</span><span class="p">);</span>
            <span class="k">return</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;deleted member with id: &quot;</span><span class="p">,</span> <span class="nx">id</span><span class="p">);</span>
        <span class="nx">result</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="nx">res</span><span class="p">);</span>
    <span class="p">});</span>
<span class="p">};</span>

<span class="nx">Member</span><span class="p">.</span><span class="nx">removeAll</span> <span class="o">=</span> <span class="nx">result</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="nx">sql</span><span class="p">.</span><span class="nx">query</span><span class="p">(</span><span class="s2">&quot;DELETE FROM members&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;error: &quot;</span><span class="p">,</span> <span class="nx">err</span><span class="p">);</span>
            <span class="nx">result</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="nx">err</span><span class="p">);</span>
            <span class="k">return</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="sb">`deleted </span><span class="si">${</span><span class="nx">res</span><span class="p">.</span><span class="nx">affectedRows</span><span class="si">}</span><span class="sb"> members`</span><span class="p">);</span>
        <span class="nx">result</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="nx">res</span><span class="p">);</span>
    <span class="p">});</span>
<span class="p">};</span>

<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="nx">Member</span><span class="p">;</span>
</code></pre></div>
</div>
</div>
<h3 id="die-routen-definieren">Die Routen definieren<a class="headerlink" href="#die-routen-definieren" title="Permanent link">&para;</a></h3>
<p>Erstellen Sie sich im <code>app</code>-Ordner einen Ordner <code>routes</code> und erstellen darin eine Datei <code>members.routes.js</code> mit folgendem Inhalt:</p>
<div class="tabbed-set" data-tabs="14:1"><input checked="checked" id="__tabbed_14_1" name="__tabbed_14" type="radio" /><label for="__tabbed_14_1">app/routes/members.routes.js</label><div class="tabbed-content">
<div class="highlight"><pre><span></span><code><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="nx">app</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">members</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&quot;../controller/members.controller.js&quot;</span><span class="p">);</span>

    <span class="c1">// Create a new Member</span>
    <span class="nx">app</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="s2">&quot;/members&quot;</span><span class="p">,</span> <span class="nx">members</span><span class="p">.</span><span class="nx">create</span><span class="p">);</span>

    <span class="c1">// GET all Members</span>
    <span class="nx">app</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s2">&quot;/members&quot;</span><span class="p">,</span> <span class="nx">members</span><span class="p">.</span><span class="nx">findAll</span><span class="p">);</span>

    <span class="c1">// GET one single Member with memberId</span>
    <span class="nx">app</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s2">&quot;/members/:memberId&quot;</span><span class="p">,</span> <span class="nx">members</span><span class="p">.</span><span class="nx">findOne</span><span class="p">);</span>

    <span class="c1">// Update one Member with memberId</span>
    <span class="nx">app</span><span class="p">.</span><span class="nx">put</span><span class="p">(</span><span class="s2">&quot;/members/:memberId&quot;</span><span class="p">,</span> <span class="nx">members</span><span class="p">.</span><span class="nx">update</span><span class="p">);</span>

    <span class="c1">// Delete the Member with memberId</span>
    <span class="nx">app</span><span class="p">.</span><span class="k">delete</span><span class="p">(</span><span class="s2">&quot;/members/:memberId&quot;</span><span class="p">,</span> <span class="nx">members</span><span class="p">.</span><span class="k">delete</span><span class="p">);</span>

    <span class="c1">// Delete all members</span>
    <span class="nx">app</span><span class="p">.</span><span class="k">delete</span><span class="p">(</span><span class="s2">&quot;/members&quot;</span><span class="p">,</span> <span class="nx">members</span><span class="p">.</span><span class="nx">deleteAll</span><span class="p">);</span>
<span class="p">};</span>
</code></pre></div>
</div>
</div>
<p>Diese Datei lesen wir in unsere <code>server.js</code> ein:</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="kd">const</span> <span class="nx">express</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&quot;express&quot;</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">bodyParser</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&quot;body-parser&quot;</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">app</span> <span class="o">=</span> <span class="nx">express</span><span class="p">();</span>

<span class="c1">// parse requests of content-type: application/json</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">bodyParser</span><span class="p">.</span><span class="nx">json</span><span class="p">());</span>

<span class="c1">// parse requests of content-type: application/x-www-form-urlencoded</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">bodyParser</span><span class="p">.</span><span class="nx">urlencoded</span><span class="p">({</span> <span class="nx">extended</span><span class="o">:</span> <span class="kc">true</span> <span class="p">}));</span>

<span class="c1">// simple route</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="nx">res</span><span class="p">.</span><span class="nx">json</span><span class="p">({</span> <span class="nx">message</span><span class="o">:</span> <span class="s2">&quot;Hello FIW!&quot;</span> <span class="p">});</span>
<span class="p">});</span>

<span class="hll"><span class="nx">require</span><span class="p">(</span><span class="s2">&quot;./app/routes/members.routes.js&quot;</span><span class="p">)(</span><span class="nx">app</span><span class="p">);</span>
</span>
<span class="c1">// set port, listen for requests</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">listen</span><span class="p">(</span><span class="mf">3000</span><span class="p">,</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;Server is running on port 3000.&quot;</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></div>
</td></tr></table>
<h3 id="einen-controller-erstellen">Einen Controller erstellen<a class="headerlink" href="#einen-controller-erstellen" title="Permanent link">&para;</a></h3>
<p>Nun erstellen wir uns im Ordner <code>app/controller</code> eine <code>members.controller.js</code> mit den entsprechenden CRUD-Funktionen, die wir dann noch implementieren müssen:</p>
<div class="tabbed-set" data-tabs="15:1"><input checked="checked" id="__tabbed_15_1" name="__tabbed_15" type="radio" /><label for="__tabbed_15_1">app/controller/members.controller.js</label><div class="tabbed-content">
<div class="highlight"><pre><span></span><code><span class="kd">const</span> <span class="nx">Member</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&quot;../model/members.model.js&quot;</span><span class="p">);</span>

<span class="c1">// Create and Save a new Member</span>
<span class="nx">exports</span><span class="p">.</span><span class="nx">create</span> <span class="o">=</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>

<span class="p">};</span>

<span class="c1">// Retrieve all Members from the database.</span>
<span class="nx">exports</span><span class="p">.</span><span class="nx">findAll</span> <span class="o">=</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>

<span class="p">};</span>

<span class="c1">// Find a single Member with a memberId</span>
<span class="nx">exports</span><span class="p">.</span><span class="nx">findOne</span> <span class="o">=</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>

<span class="p">};</span>

<span class="c1">// Update a Member identified by the memberId in the request</span>
<span class="nx">exports</span><span class="p">.</span><span class="nx">update</span> <span class="o">=</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>

<span class="p">};</span>

<span class="c1">// Delete a Member with the specified memberId in the request</span>
<span class="nx">exports</span><span class="p">.</span><span class="k">delete</span> <span class="o">=</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>

<span class="p">};</span>

<span class="c1">// Delete all Members from the database.</span>
<span class="nx">exports</span><span class="p">.</span><span class="nx">deleteAll</span> <span class="o">=</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>

<span class="p">};</span>
</code></pre></div>
</div>
</div>
<p>Überprüfen Sie Ihre Implementierung so weit, indem Sie <code>node server.js</code> erneut starten. Es sollte alles ohne Fehler compilieren. </p>
<h4 id="r-read-all">R - read all<a class="headerlink" href="#r-read-all" title="Permanent link">&para;</a></h4>
<p>Wir implementieren nun nach und nach die einzelnen Funktionen in <code>members.controller.js</code>. Wir beginnen mit der <code>findAll()</code>-Funktion: </p>
<div class="tabbed-set" data-tabs="16:1"><input checked="checked" id="__tabbed_16_1" name="__tabbed_16" type="radio" /><label for="__tabbed_16_1">app/controller/members.controller.js</label><div class="tabbed-content">
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 8
 9
10
11
12
13
14
15
16
17
18</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="c1">// Retrieve all Members from the database.</span>
<span class="nx">exports</span><span class="p">.</span><span class="nx">findAll</span> <span class="o">=</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="nx">Member</span><span class="p">.</span><span class="nx">getAll</span><span class="p">((</span><span class="nx">err</span><span class="p">,</span> <span class="nx">data</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span>
            <span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mf">500</span><span class="p">).</span><span class="nx">send</span><span class="p">({</span>
                <span class="nx">message</span><span class="o">:</span>
                    <span class="nx">err</span><span class="p">.</span><span class="nx">message</span> <span class="o">||</span> <span class="s2">&quot;Some error occurred while retrieving members.&quot;</span>
            <span class="p">});</span>
        <span class="k">else</span> <span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
    <span class="p">});</span>
<span class="p">};</span>
</code></pre></div>
</td></tr></table>
</div>
</div>
<p>Wenn Sie nun erneut <code>node server.js</code> starten und in Postman <code>GET http://localhost:3000/members</code> aufrufen, erscheinen alle Einträge aus der Datenbank:</p>
<p><img alt="postman" src="../files/94_postman.png" /></p>
<h4 id="c-create">C - create<a class="headerlink" href="#c-create" title="Permanent link">&para;</a></h4>
<p>Als nächstes implementieren wir die <code>create()</code>-Funktion, um einen neuen Eintrag in der Datenbank anzulegen. </p>
<div class="tabbed-set" data-tabs="17:1"><input checked="checked" id="__tabbed_17_1" name="__tabbed_17" type="radio" /><label for="__tabbed_17_1">app/controller/members.controller.js</label><div class="tabbed-content">
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="c1">// Create and Save a new Member</span>
<span class="nx">exports</span><span class="p">.</span><span class="nx">create</span> <span class="o">=</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="c1">// Validate request</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">req</span><span class="p">.</span><span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mf">400</span><span class="p">).</span><span class="nx">send</span><span class="p">({</span>
            <span class="nx">message</span><span class="o">:</span> <span class="s2">&quot;Content can not be empty!&quot;</span>
        <span class="p">});</span>
    <span class="p">}</span>

    <span class="c1">// Create a Member</span>
    <span class="kd">const</span> <span class="nx">member</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Member</span><span class="p">({</span>
        <span class="nx">firstname</span><span class="o">:</span> <span class="nx">req</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">firstname</span><span class="p">,</span>
        <span class="nx">lastname</span><span class="o">:</span> <span class="nx">req</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">lastname</span><span class="p">,</span>
        <span class="nx">email</span><span class="o">:</span> <span class="nx">req</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">email</span>
    <span class="p">});</span>

    <span class="c1">// Save Customer in the database</span>
    <span class="nx">Member</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="nx">member</span><span class="p">,</span> <span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">data</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span>
            <span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mf">500</span><span class="p">).</span><span class="nx">send</span><span class="p">({</span>
                <span class="nx">message</span><span class="o">:</span>
                    <span class="nx">err</span><span class="p">.</span><span class="nx">message</span> <span class="o">||</span> <span class="s2">&quot;Some error occurred while creating the Member.&quot;</span>
            <span class="p">});</span>
        <span class="k">else</span> <span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
    <span class="p">});</span>
<span class="p">};</span>
</code></pre></div>
</td></tr></table>
</div>
</div>
<p>Nach einem Neustart von <code>node server.js</code> geben wir in Postman nun <code>POST http://localhost:3000/members</code> ein und befüllen den <code>Body</code> mit z.B.:</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4
5</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="p">{</span>
        <span class="nt">&quot;firstname&quot;</span><span class="p">:</span> <span class="s2">&quot;Test1&quot;</span><span class="p">,</span>
        <span class="nt">&quot;lastname&quot;</span><span class="p">:</span> <span class="s2">&quot;Test2&quot;</span><span class="p">,</span>
        <span class="nt">&quot;email&quot;</span><span class="p">:</span> <span class="s2">&quot;test3@email.de&quot;</span>
<span class="p">}</span>
</code></pre></div>
</td></tr></table>
<p>Achten Sie darauf, dass in der zweiten Menüzeile rechts <code>JSON</code> ausgewählt ist (im Bild orange) - nicht <code>Text</code>:</p>
<p><img alt="postman" src="../files/110_json.png" /></p>
<p>Wir klicken auf <code>Send</code> und es erscheint:</p>
<p><img alt="postman" src="../files/95_postman.png" /></p>
<p>Schauen Sie auch in Ihre Datenbank unter <code>http://localhost/phpmyadmin</code>. Dort erscheint der Datensatz mit der neuen <code>id=51</code>:</p>
<p><img alt="phpmyadmin" src="../files/96_phpmyadmin.png" /></p>
<h4 id="r-read-one">R - read one<a class="headerlink" href="#r-read-one" title="Permanent link">&para;</a></h4>
<p>Wir erweitern die <code>members.controller.js</code> um die Funktion <code>findOne()</code>, die uns für eine gegebene <code>id</code> den entsprechenden Datensatz zurückliefert:</p>
<div class="tabbed-set" data-tabs="18:1"><input checked="checked" id="__tabbed_18_1" name="__tabbed_18" type="radio" /><label for="__tabbed_18_1">app/controller/members.controller.js</label><div class="tabbed-content">
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="c1">// Find a single Member with a memberId</span>
<span class="nx">exports</span><span class="p">.</span><span class="nx">findOne</span> <span class="o">=</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="nx">Member</span><span class="p">.</span><span class="nx">findById</span><span class="p">(</span><span class="nx">req</span><span class="p">.</span><span class="nx">params</span><span class="p">.</span><span class="nx">memberId</span><span class="p">,</span> <span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">data</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">.</span><span class="nx">kind</span> <span class="o">===</span> <span class="s2">&quot;not_found&quot;</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mf">404</span><span class="p">).</span><span class="nx">send</span><span class="p">({</span>
                    <span class="nx">message</span><span class="o">:</span> <span class="sb">`Not found Member with id </span><span class="si">${</span><span class="nx">req</span><span class="p">.</span><span class="nx">params</span><span class="p">.</span><span class="nx">memberId</span><span class="si">}</span><span class="sb">.`</span>
                <span class="p">});</span>
            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                <span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mf">500</span><span class="p">).</span><span class="nx">send</span><span class="p">({</span>
                    <span class="nx">message</span><span class="o">:</span> <span class="s2">&quot;Error retrieving Member with id &quot;</span> <span class="o">+</span> <span class="nx">req</span><span class="p">.</span><span class="nx">params</span><span class="p">.</span><span class="nx">memberId</span>
                <span class="p">});</span>
            <span class="p">}</span>
        <span class="p">}</span> <span class="k">else</span> <span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
    <span class="p">});</span>
<span class="p">};</span>
</code></pre></div>
</td></tr></table>
</div>
</div>
<p>Nach Neustart des Servers geben wir in Postman z.B. <code>GET http://localhost:3000/members/11</code> ein und erhalten:</p>
<p><img alt="postman" src="../files/97_postman.png" /></p>
<p>Probieren Sie auch einmal <code>GET http://localhost:3000/members/52</code> aus, um die Fehlermeldung als JSON zu sehen. </p>
<h4 id="u-update">U - update<a class="headerlink" href="#u-update" title="Permanent link">&para;</a></h4>
<p>Nun noch die <code>update()</code>-Funktion, um einen bereits existierenden Datensatz zu ändern:</p>
<div class="tabbed-set" data-tabs="19:1"><input checked="checked" id="__tabbed_19_1" name="__tabbed_19" type="radio" /><label for="__tabbed_19_1">app/controller/members.controller.js</label><div class="tabbed-content">
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="c1">// Update a Member identified by the memberId in the request</span>
<span class="nx">exports</span><span class="p">.</span><span class="nx">update</span> <span class="o">=</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="c1">// Validate Request</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">req</span><span class="p">.</span><span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mf">400</span><span class="p">).</span><span class="nx">send</span><span class="p">({</span>
            <span class="nx">message</span><span class="o">:</span> <span class="s2">&quot;Content can not be empty!&quot;</span>
        <span class="p">});</span>
    <span class="p">}</span>

    <span class="nx">Member</span><span class="p">.</span><span class="nx">updateById</span><span class="p">(</span>
        <span class="nx">req</span><span class="p">.</span><span class="nx">params</span><span class="p">.</span><span class="nx">memberId</span><span class="p">,</span>
        <span class="k">new</span> <span class="nx">Member</span><span class="p">(</span><span class="nx">req</span><span class="p">.</span><span class="nx">body</span><span class="p">),</span>
        <span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">data</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">.</span><span class="nx">kind</span> <span class="o">===</span> <span class="s2">&quot;not_found&quot;</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mf">404</span><span class="p">).</span><span class="nx">send</span><span class="p">({</span>
                        <span class="nx">message</span><span class="o">:</span> <span class="sb">`Not found Member with id </span><span class="si">${</span><span class="nx">req</span><span class="p">.</span><span class="nx">params</span><span class="p">.</span><span class="nx">memberId</span><span class="si">}</span><span class="sb">.`</span>
                    <span class="p">});</span>
                <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                    <span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mf">500</span><span class="p">).</span><span class="nx">send</span><span class="p">({</span>
                        <span class="nx">message</span><span class="o">:</span> <span class="s2">&quot;Error updating Member with id &quot;</span> <span class="o">+</span> <span class="nx">req</span><span class="p">.</span><span class="nx">params</span><span class="p">.</span><span class="nx">memberId</span>
                    <span class="p">});</span>
                <span class="p">}</span>
            <span class="p">}</span> <span class="k">else</span> <span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">);</span>
<span class="p">};</span>
</code></pre></div>
</td></tr></table>
</div>
</div>
<p>Nach dem Neustart des Servers können wir diese Funktion in Postman ausprobieren, indem wir im <code>Body</code> z.B. das JSON </p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4
5
6</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="p">{</span>
    <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="mi">51</span><span class="p">,</span>
    <span class="nt">&quot;firstname&quot;</span><span class="p">:</span> <span class="s2">&quot;Test111&quot;</span><span class="p">,</span>
    <span class="nt">&quot;lastname&quot;</span><span class="p">:</span> <span class="s2">&quot;Test211&quot;</span><span class="p">,</span>
    <span class="nt">&quot;email&quot;</span><span class="p">:</span> <span class="s2">&quot;test311@email.de&quot;</span>
<span class="p">}</span>
</code></pre></div>
</td></tr></table>
<p>mit unserem Request übergeben und <code>PUT http://localhost:3000/members/51</code> wählen. Der Datensatz mit der <code>id=51</code> wird dann aktualisiert:</p>
<p><img alt="postman" src="../files/98_postman.png" /></p>
<p>Schauen Sie auch in der Datenbank nach und wählen auch ruhig nochmal <code>GET http://localhost:3000/members</code>.</p>
<h4 id="d-delete-one">D - delete one<a class="headerlink" href="#d-delete-one" title="Permanent link">&para;</a></h4>
<p>Jetzt implementieren wir noch die <code>delete()</code>-Funktion, um einen Datensatz zu löschen:</p>
<div class="tabbed-set" data-tabs="20:1"><input checked="checked" id="__tabbed_20_1" name="__tabbed_20" type="radio" /><label for="__tabbed_20_1">app/controller/members.controller.js</label><div class="tabbed-content">
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 87
 88
 89
 90
 91
 92
 93
 94
 95
 96
 97
 98
 99
100
101
102</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="c1">// Delete a Member with the specified memberId in the request</span>
<span class="nx">exports</span><span class="p">.</span><span class="k">delete</span> <span class="o">=</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="nx">Member</span><span class="p">.</span><span class="nx">remove</span><span class="p">(</span><span class="nx">req</span><span class="p">.</span><span class="nx">params</span><span class="p">.</span><span class="nx">memberId</span><span class="p">,</span> <span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">data</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">.</span><span class="nx">kind</span> <span class="o">===</span> <span class="s2">&quot;not_found&quot;</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mf">404</span><span class="p">).</span><span class="nx">send</span><span class="p">({</span>
                    <span class="nx">message</span><span class="o">:</span> <span class="sb">`Not found Member with id </span><span class="si">${</span><span class="nx">req</span><span class="p">.</span><span class="nx">params</span><span class="p">.</span><span class="nx">memberId</span><span class="si">}</span><span class="sb">.`</span>
                <span class="p">});</span>
            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                <span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mf">500</span><span class="p">).</span><span class="nx">send</span><span class="p">({</span>
                    <span class="nx">message</span><span class="o">:</span> <span class="s2">&quot;Could not delete Member with id &quot;</span> <span class="o">+</span> <span class="nx">req</span><span class="p">.</span><span class="nx">params</span><span class="p">.</span><span class="nx">memberId</span>
                <span class="p">});</span>
            <span class="p">}</span>
        <span class="p">}</span> <span class="k">else</span> <span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">({</span> <span class="nx">message</span><span class="o">:</span> <span class="sb">`Member was deleted successfully!`</span> <span class="p">});</span>
    <span class="p">});</span>
<span class="p">};</span>
</code></pre></div>
</td></tr></table>
</div>
</div>
<p>Wenn wir nach dem Neustart des Servers in Postman z.B. <code>DELETE http://localhost:3000/members/51</code> eingeben, erscheint:</p>
<div class="highlight"><pre><span></span><code>{
    &quot;message&quot;: &quot;Member was deleted successfully!&quot;
}
</code></pre></div>
<p>und der Datensatz mit der <code>id=51</code> ist aus der Datenbank gelöscht. Wenn wir erneut <code>DELETE http://localhost:3000/members/51</code> eingeben, erscheint:</p>
<div class="highlight"><pre><span></span><code>{
    &quot;message&quot;: &quot;Not found Member with id 51.&quot;
}
</code></pre></div>
<p>Wir implementieren der Vollständigkeit halber noch die <code>deleteAll()</code>-Methode. Sie können ja entscheiden, ob Sie sie ausprobieren wollen oder nicht ;-)</p>
<h4 id="d-delete-all">D - delete all<a class="headerlink" href="#d-delete-all" title="Permanent link">&para;</a></h4>
<div class="tabbed-set" data-tabs="21:1"><input checked="checked" id="__tabbed_21_1" name="__tabbed_21" type="radio" /><label for="__tabbed_21_1">app/controller/members.controller.js</label><div class="tabbed-content">
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>104
105
106
107
108
109
110
111
112
113
114</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="c1">// Delete all Members from the database.</span>
<span class="nx">exports</span><span class="p">.</span><span class="nx">deleteAll</span> <span class="o">=</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="nx">Member</span><span class="p">.</span><span class="nx">removeAll</span><span class="p">((</span><span class="nx">err</span><span class="p">,</span> <span class="nx">data</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span>
            <span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mf">500</span><span class="p">).</span><span class="nx">send</span><span class="p">({</span>
                <span class="nx">message</span><span class="o">:</span>
                    <span class="nx">err</span><span class="p">.</span><span class="nx">message</span> <span class="o">||</span> <span class="s2">&quot;Some error occurred while removing all members.&quot;</span>
            <span class="p">});</span>
        <span class="k">else</span> <span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">({</span> <span class="nx">message</span><span class="o">:</span> <span class="sb">`All Members were deleted successfully!`</span> <span class="p">});</span>
    <span class="p">});</span>
<span class="p">};</span>
</code></pre></div>
</td></tr></table>
</div>
</div>
<p>In Postman kann diese Methode mit <code>DELETE http://localhost:3000/members/</code> getestet werden. Es erscheint </p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
    <span class="nt">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;All Members were deleted successfully!&quot;</span>
<span class="p">}</span>
</code></pre></div>
<p>und auch die Datenbank ist leer:</p>
<p><img alt="phpmyadmin" src="../files/99_phpmyadmin.png" /></p>
<p>Sollten Sie die Methode erfolgreich ausprobiert haben, können Sie die Datenbank über diese Insert-Anweisungen wieder auffüllen (in <code>phpmyadmin</code> unter dem Reiter <code>SQL</code> reinkopieren):</p>
<details><summary>Insert-Anweisungen für alle 50 Datensätze</summary><div class="highlight"><pre><span></span><code><span class="k">INSERT</span> <span class="k">INTO</span> <span class="o">`</span><span class="n">members</span><span class="o">`</span><span class="p">(</span><span class="o">`</span><span class="n">firstname</span><span class="o">`</span><span class="p">,</span> <span class="o">`</span><span class="n">lastname</span><span class="o">`</span><span class="p">,</span> <span class="o">`</span><span class="n">email</span><span class="o">`</span><span class="p">)</span> <span class="k">VALUES</span> <span class="p">(</span><span class="ss">&quot;Catherine&quot;</span><span class="p">,</span><span class="ss">&quot;Williams&quot;</span><span class="p">,</span><span class="ss">&quot;cwilliamsl@360.cn&quot;</span><span class="p">);</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="o">`</span><span class="n">members</span><span class="o">`</span><span class="p">(</span><span class="o">`</span><span class="n">firstname</span><span class="o">`</span><span class="p">,</span> <span class="o">`</span><span class="n">lastname</span><span class="o">`</span><span class="p">,</span> <span class="o">`</span><span class="n">email</span><span class="o">`</span><span class="p">)</span> <span class="k">VALUES</span> <span class="p">(</span><span class="ss">&quot;Adam&quot;</span><span class="p">,</span> <span class="ss">&quot;Anderson&quot;</span><span class="p">,</span> <span class="ss">&quot;aanderson8@google.fr&quot;</span><span class="p">);</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="o">`</span><span class="n">members</span><span class="o">`</span><span class="p">(</span><span class="o">`</span><span class="n">firstname</span><span class="o">`</span><span class="p">,</span> <span class="o">`</span><span class="n">lastname</span><span class="o">`</span><span class="p">,</span> <span class="o">`</span><span class="n">email</span><span class="o">`</span><span class="p">)</span> <span class="k">VALUES</span> <span class="p">(</span><span class="ss">&quot;Susan&quot;</span><span class="p">,</span> <span class="ss">&quot;Andrews&quot;</span><span class="p">,</span> <span class="ss">&quot;sandrewsn@google.co.jp&quot;</span><span class="p">);</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="o">`</span><span class="n">members</span><span class="o">`</span><span class="p">(</span><span class="o">`</span><span class="n">firstname</span><span class="o">`</span><span class="p">,</span> <span class="o">`</span><span class="n">lastname</span><span class="o">`</span><span class="p">,</span> <span class="o">`</span><span class="n">email</span><span class="o">`</span><span class="p">)</span> <span class="k">VALUES</span> <span class="p">(</span><span class="ss">&quot;Catherine&quot;</span><span class="p">,</span> <span class="ss">&quot;Andrews&quot;</span><span class="p">,</span> <span class="ss">&quot;candrewsp@noaa.gov&quot;</span><span class="p">);</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="o">`</span><span class="n">members</span><span class="o">`</span><span class="p">(</span><span class="o">`</span><span class="n">firstname</span><span class="o">`</span><span class="p">,</span> <span class="o">`</span><span class="n">lastname</span><span class="o">`</span><span class="p">,</span> <span class="o">`</span><span class="n">email</span><span class="o">`</span><span class="p">)</span> <span class="k">VALUES</span> <span class="p">(</span><span class="ss">&quot;Alan&quot;</span><span class="p">,</span> <span class="ss">&quot;Bradley&quot;</span><span class="p">,</span> <span class="ss">&quot;abradley1c@globo.com&quot;</span><span class="p">);</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="o">`</span><span class="n">members</span><span class="o">`</span><span class="p">(</span><span class="o">`</span><span class="n">firstname</span><span class="o">`</span><span class="p">,</span> <span class="o">`</span><span class="n">lastname</span><span class="o">`</span><span class="p">,</span> <span class="o">`</span><span class="n">email</span><span class="o">`</span><span class="p">)</span> <span class="k">VALUES</span> <span class="p">(</span><span class="ss">&quot;Anne&quot;</span><span class="p">,</span><span class="ss">&quot;Brooks&quot;</span><span class="p">,</span><span class="ss">&quot;abrooks16@bravesites.com&quot;</span><span class="p">);</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="o">`</span><span class="n">members</span><span class="o">`</span><span class="p">(</span><span class="o">`</span><span class="n">firstname</span><span class="o">`</span><span class="p">,</span> <span class="o">`</span><span class="n">lastname</span><span class="o">`</span><span class="p">,</span> <span class="o">`</span><span class="n">email</span><span class="o">`</span><span class="p">)</span> <span class="k">VALUES</span> <span class="p">(</span><span class="ss">&quot;Russell&quot;</span><span class="p">,</span><span class="ss">&quot;Brown&quot;</span><span class="p">,</span><span class="ss">&quot;rbrownq@nifty.com&quot;</span><span class="p">);</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="o">`</span><span class="n">members</span><span class="o">`</span><span class="p">(</span><span class="o">`</span><span class="n">firstname</span><span class="o">`</span><span class="p">,</span> <span class="o">`</span><span class="n">lastname</span><span class="o">`</span><span class="p">,</span> <span class="o">`</span><span class="n">email</span><span class="o">`</span><span class="p">)</span> <span class="k">VALUES</span> <span class="p">(</span><span class="ss">&quot;Ryan&quot;</span><span class="p">,</span><span class="ss">&quot;Burton&quot;</span><span class="p">,</span><span class="ss">&quot;rburton18@foxnews.com&quot;</span><span class="p">);</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="o">`</span><span class="n">members</span><span class="o">`</span><span class="p">(</span><span class="o">`</span><span class="n">firstname</span><span class="o">`</span><span class="p">,</span> <span class="o">`</span><span class="n">lastname</span><span class="o">`</span><span class="p">,</span> <span class="o">`</span><span class="n">email</span><span class="o">`</span><span class="p">)</span> <span class="k">VALUES</span> <span class="p">(</span><span class="ss">&quot;Roy&quot;</span><span class="p">,</span><span class="ss">&quot;Campbell&quot;</span><span class="p">,</span><span class="ss">&quot;rcampbell1@geocities.com&quot;</span><span class="p">);</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="o">`</span><span class="n">members</span><span class="o">`</span><span class="p">(</span><span class="o">`</span><span class="n">firstname</span><span class="o">`</span><span class="p">,</span> <span class="o">`</span><span class="n">lastname</span><span class="o">`</span><span class="p">,</span> <span class="o">`</span><span class="n">email</span><span class="o">`</span><span class="p">)</span> <span class="k">VALUES</span> <span class="p">(</span><span class="ss">&quot;Russell&quot;</span><span class="p">,</span><span class="ss">&quot;Campbell&quot;</span><span class="p">,</span><span class="ss">&quot;rcampbell17@eventbrite.com&quot;</span><span class="p">);</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="o">`</span><span class="n">members</span><span class="o">`</span><span class="p">(</span><span class="o">`</span><span class="n">firstname</span><span class="o">`</span><span class="p">,</span> <span class="o">`</span><span class="n">lastname</span><span class="o">`</span><span class="p">,</span> <span class="o">`</span><span class="n">email</span><span class="o">`</span><span class="p">)</span> <span class="k">VALUES</span> <span class="p">(</span><span class="ss">&quot;Bonnie&quot;</span><span class="p">,</span> <span class="ss">&quot;Coleman&quot;</span><span class="p">,</span><span class="ss">&quot;bcoleman11@fc2.com&quot;</span><span class="p">);</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="o">`</span><span class="n">members</span><span class="o">`</span><span class="p">(</span><span class="o">`</span><span class="n">firstname</span><span class="o">`</span><span class="p">,</span> <span class="o">`</span><span class="n">lastname</span><span class="o">`</span><span class="p">,</span> <span class="o">`</span><span class="n">email</span><span class="o">`</span><span class="p">)</span> <span class="k">VALUES</span> <span class="p">(</span><span class="ss">&quot;Ernest&quot;</span><span class="p">,</span><span class="ss">&quot;Coleman&quot;</span><span class="p">,</span> <span class="ss">&quot;ecoleman15@businessweek.com&quot;</span><span class="p">);</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="o">`</span><span class="n">members</span><span class="o">`</span><span class="p">(</span><span class="o">`</span><span class="n">firstname</span><span class="o">`</span><span class="p">,</span> <span class="o">`</span><span class="n">lastname</span><span class="o">`</span><span class="p">,</span> <span class="o">`</span><span class="n">email</span><span class="o">`</span><span class="p">)</span> <span class="k">VALUES</span> <span class="p">(</span><span class="ss">&quot;Richard&quot;</span><span class="p">,</span><span class="ss">&quot;Cruz&quot;</span><span class="p">,</span><span class="ss">&quot;rcruz7@unc.edu&quot;</span><span class="p">);</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="o">`</span><span class="n">members</span><span class="o">`</span><span class="p">(</span><span class="o">`</span><span class="n">firstname</span><span class="o">`</span><span class="p">,</span> <span class="o">`</span><span class="n">lastname</span><span class="o">`</span><span class="p">,</span> <span class="o">`</span><span class="n">email</span><span class="o">`</span><span class="p">)</span> <span class="k">VALUES</span> <span class="p">(</span><span class="ss">&quot;Sean&quot;</span><span class="p">,</span><span class="ss">&quot;Cruz&quot;</span><span class="p">,</span> <span class="ss">&quot;scruz10@answers.com&quot;</span><span class="p">);</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="o">`</span><span class="n">members</span><span class="o">`</span><span class="p">(</span><span class="o">`</span><span class="n">firstname</span><span class="o">`</span><span class="p">,</span> <span class="o">`</span><span class="n">lastname</span><span class="o">`</span><span class="p">,</span> <span class="o">`</span><span class="n">email</span><span class="o">`</span><span class="p">)</span> <span class="k">VALUES</span> <span class="p">(</span><span class="ss">&quot;Rebecca&quot;</span><span class="p">,</span><span class="ss">&quot;Cunningham&quot;</span><span class="p">,</span><span class="ss">&quot;rcunninghamd@mac.com&quot;</span><span class="p">);</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="o">`</span><span class="n">members</span><span class="o">`</span><span class="p">(</span><span class="o">`</span><span class="n">firstname</span><span class="o">`</span><span class="p">,</span> <span class="o">`</span><span class="n">lastname</span><span class="o">`</span><span class="p">,</span> <span class="o">`</span><span class="n">email</span><span class="o">`</span><span class="p">)</span> <span class="k">VALUES</span> <span class="p">(</span><span class="ss">&quot;Margaret&quot;</span><span class="p">,</span><span class="ss">&quot;Evans&quot;</span><span class="p">,</span><span class="ss">&quot;mevansh@pcworld.com&quot;</span><span class="p">);</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="o">`</span><span class="n">members</span><span class="o">`</span><span class="p">(</span><span class="o">`</span><span class="n">firstname</span><span class="o">`</span><span class="p">,</span> <span class="o">`</span><span class="n">lastname</span><span class="o">`</span><span class="p">,</span> <span class="o">`</span><span class="n">email</span><span class="o">`</span><span class="p">)</span> <span class="k">VALUES</span> <span class="p">(</span><span class="ss">&quot;Jeffrey&quot;</span><span class="p">,</span> <span class="ss">&quot;Ford&quot;</span><span class="p">,</span> <span class="ss">&quot;jford14@cnet.com&quot;</span><span class="p">);</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="o">`</span><span class="n">members</span><span class="o">`</span><span class="p">(</span><span class="o">`</span><span class="n">firstname</span><span class="o">`</span><span class="p">,</span> <span class="o">`</span><span class="n">lastname</span><span class="o">`</span><span class="p">,</span> <span class="o">`</span><span class="n">email</span><span class="o">`</span><span class="p">)</span> <span class="k">VALUES</span> <span class="p">(</span><span class="ss">&quot;Andrea&quot;</span><span class="p">,</span><span class="ss">&quot;Gardner&quot;</span><span class="p">,</span> <span class="ss">&quot;agardnerv@woothemes.com&quot;</span><span class="p">);</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="o">`</span><span class="n">members</span><span class="o">`</span><span class="p">(</span><span class="o">`</span><span class="n">firstname</span><span class="o">`</span><span class="p">,</span> <span class="o">`</span><span class="n">lastname</span><span class="o">`</span><span class="p">,</span> <span class="o">`</span><span class="n">email</span><span class="o">`</span><span class="p">)</span> <span class="k">VALUES</span> <span class="p">(</span><span class="ss">&quot;Deborah&quot;</span><span class="p">,</span><span class="ss">&quot;George&quot;</span><span class="p">,</span> <span class="ss">&quot;dgeorge6@furl.net&quot;</span><span class="p">);</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="o">`</span><span class="n">members</span><span class="o">`</span><span class="p">(</span><span class="o">`</span><span class="n">firstname</span><span class="o">`</span><span class="p">,</span> <span class="o">`</span><span class="n">lastname</span><span class="o">`</span><span class="p">,</span> <span class="o">`</span><span class="n">email</span><span class="o">`</span><span class="p">)</span> <span class="k">VALUES</span> <span class="p">(</span><span class="ss">&quot;Sean&quot;</span><span class="p">,</span> <span class="ss">&quot;Gibson&quot;</span><span class="p">,</span> <span class="ss">&quot;sgibsony@alexa.com&quot;</span><span class="p">);</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="o">`</span><span class="n">members</span><span class="o">`</span><span class="p">(</span><span class="o">`</span><span class="n">firstname</span><span class="o">`</span><span class="p">,</span> <span class="o">`</span><span class="n">lastname</span><span class="o">`</span><span class="p">,</span> <span class="o">`</span><span class="n">email</span><span class="o">`</span><span class="p">)</span> <span class="k">VALUES</span> <span class="p">(</span><span class="ss">&quot;Virginia&quot;</span><span class="p">,</span><span class="ss">&quot;Graham&quot;</span><span class="p">,</span> <span class="ss">&quot;vgrahamk@aol.com&quot;</span><span class="p">);</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="o">`</span><span class="n">members</span><span class="o">`</span><span class="p">(</span><span class="o">`</span><span class="n">firstname</span><span class="o">`</span><span class="p">,</span> <span class="o">`</span><span class="n">lastname</span><span class="o">`</span><span class="p">,</span> <span class="o">`</span><span class="n">email</span><span class="o">`</span><span class="p">)</span> <span class="k">VALUES</span> <span class="p">(</span><span class="ss">&quot;Steven&quot;</span><span class="p">,</span><span class="ss">&quot;Hamilton&quot;</span><span class="p">,</span> <span class="ss">&quot;shamiltonu@state.tx.us&quot;</span><span class="p">);</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="o">`</span><span class="n">members</span><span class="o">`</span><span class="p">(</span><span class="o">`</span><span class="n">firstname</span><span class="o">`</span><span class="p">,</span> <span class="o">`</span><span class="n">lastname</span><span class="o">`</span><span class="p">,</span> <span class="o">`</span><span class="n">email</span><span class="o">`</span><span class="p">)</span> <span class="k">VALUES</span> <span class="p">(</span><span class="ss">&quot;Virginia&quot;</span><span class="p">,</span> <span class="ss">&quot;Hawkins&quot;</span><span class="p">,</span> <span class="ss">&quot;vhawkinsf@ehow.com&quot;</span><span class="p">);</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="o">`</span><span class="n">members</span><span class="o">`</span><span class="p">(</span><span class="o">`</span><span class="n">firstname</span><span class="o">`</span><span class="p">,</span> <span class="o">`</span><span class="n">lastname</span><span class="o">`</span><span class="p">,</span> <span class="o">`</span><span class="n">email</span><span class="o">`</span><span class="p">)</span> <span class="k">VALUES</span> <span class="p">(</span><span class="ss">&quot;Edward&quot;</span><span class="p">,</span> <span class="ss">&quot;Hicks&quot;</span><span class="p">,</span> <span class="ss">&quot;ehicksc@pcworld.com&quot;</span><span class="p">);</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="o">`</span><span class="n">members</span><span class="o">`</span><span class="p">(</span><span class="o">`</span><span class="n">firstname</span><span class="o">`</span><span class="p">,</span> <span class="o">`</span><span class="n">lastname</span><span class="o">`</span><span class="p">,</span> <span class="o">`</span><span class="n">email</span><span class="o">`</span><span class="p">)</span> <span class="k">VALUES</span> <span class="p">(</span><span class="ss">&quot;Mark&quot;</span><span class="p">,</span> <span class="ss">&quot;Johnson&quot;</span><span class="p">,</span> <span class="ss">&quot;mjohnsonj@hostgator.com&quot;</span><span class="p">);</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="o">`</span><span class="n">members</span><span class="o">`</span><span class="p">(</span><span class="o">`</span><span class="n">firstname</span><span class="o">`</span><span class="p">,</span> <span class="o">`</span><span class="n">lastname</span><span class="o">`</span><span class="p">,</span> <span class="o">`</span><span class="n">email</span><span class="o">`</span><span class="p">)</span> <span class="k">VALUES</span> <span class="p">(</span><span class="ss">&quot;Ruth&quot;</span><span class="p">,</span><span class="ss">&quot;Jordan&quot;</span><span class="p">,</span> <span class="ss">&quot;rjordan1a@smugmug.com&quot;</span><span class="p">);</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="o">`</span><span class="n">members</span><span class="o">`</span><span class="p">(</span><span class="o">`</span><span class="n">firstname</span><span class="o">`</span><span class="p">,</span> <span class="o">`</span><span class="n">lastname</span><span class="o">`</span><span class="p">,</span> <span class="o">`</span><span class="n">email</span><span class="o">`</span><span class="p">)</span> <span class="k">VALUES</span> <span class="p">(</span><span class="ss">&quot;Antonio&quot;</span><span class="p">,</span> <span class="ss">&quot;Kim&quot;</span><span class="p">,</span> <span class="ss">&quot;akim4@odnoklassniki.ru&quot;</span><span class="p">);</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="o">`</span><span class="n">members</span><span class="o">`</span><span class="p">(</span><span class="o">`</span><span class="n">firstname</span><span class="o">`</span><span class="p">,</span> <span class="o">`</span><span class="n">lastname</span><span class="o">`</span><span class="p">,</span> <span class="o">`</span><span class="n">email</span><span class="o">`</span><span class="p">)</span> <span class="k">VALUES</span> <span class="p">(</span><span class="ss">&quot;Jennifer&quot;</span><span class="p">,</span> <span class="ss">&quot;Marshall&quot;</span><span class="p">,</span> <span class="ss">&quot;jmarshallt@gnu.org&quot;</span><span class="p">);</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="o">`</span><span class="n">members</span><span class="o">`</span><span class="p">(</span><span class="o">`</span><span class="n">firstname</span><span class="o">`</span><span class="p">,</span> <span class="o">`</span><span class="n">lastname</span><span class="o">`</span><span class="p">,</span> <span class="o">`</span><span class="n">email</span><span class="o">`</span><span class="p">)</span> <span class="k">VALUES</span> <span class="p">(</span><span class="ss">&quot;Eric&quot;</span><span class="p">,</span> <span class="ss">&quot;Matthews&quot;</span><span class="p">,</span> <span class="ss">&quot;ematthews5@independent.co.uk&quot;</span><span class="p">);</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="o">`</span><span class="n">members</span><span class="o">`</span><span class="p">(</span><span class="o">`</span><span class="n">firstname</span><span class="o">`</span><span class="p">,</span> <span class="o">`</span><span class="n">lastname</span><span class="o">`</span><span class="p">,</span> <span class="o">`</span><span class="n">email</span><span class="o">`</span><span class="p">)</span> <span class="k">VALUES</span> <span class="p">(</span><span class="ss">&quot;Raymond&quot;</span><span class="p">,</span><span class="ss">&quot;Mcdonald&quot;</span><span class="p">,</span> <span class="ss">&quot;rmcdonald2@ihg.com&quot;</span><span class="p">);</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="o">`</span><span class="n">members</span><span class="o">`</span><span class="p">(</span><span class="o">`</span><span class="n">firstname</span><span class="o">`</span><span class="p">,</span> <span class="o">`</span><span class="n">lastname</span><span class="o">`</span><span class="p">,</span> <span class="o">`</span><span class="n">email</span><span class="o">`</span><span class="p">)</span> <span class="k">VALUES</span> <span class="p">(</span><span class="ss">&quot;Eric&quot;</span><span class="p">,</span><span class="ss">&quot;Miller&quot;</span><span class="p">,</span> <span class="ss">&quot;emillere@creativecommons.org&quot;</span><span class="p">);</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="o">`</span><span class="n">members</span><span class="o">`</span><span class="p">(</span><span class="o">`</span><span class="n">firstname</span><span class="o">`</span><span class="p">,</span> <span class="o">`</span><span class="n">lastname</span><span class="o">`</span><span class="p">,</span> <span class="o">`</span><span class="n">email</span><span class="o">`</span><span class="p">)</span> <span class="k">VALUES</span> <span class="p">(</span><span class="ss">&quot;Jonathan&quot;</span><span class="p">,</span><span class="ss">&quot;Morales&quot;</span><span class="p">,</span> <span class="ss">&quot;jmoralesa@ovh.net&quot;</span><span class="p">);</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="o">`</span><span class="n">members</span><span class="o">`</span><span class="p">(</span><span class="o">`</span><span class="n">firstname</span><span class="o">`</span><span class="p">,</span> <span class="o">`</span><span class="n">lastname</span><span class="o">`</span><span class="p">,</span> <span class="o">`</span><span class="n">email</span><span class="o">`</span><span class="p">)</span> <span class="k">VALUES</span> <span class="p">(</span><span class="ss">&quot;Marie&quot;</span><span class="p">,</span><span class="ss">&quot;Morgan&quot;</span><span class="p">,</span> <span class="ss">&quot;mmorganb@cloudflare.com&quot;</span><span class="p">);</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="o">`</span><span class="n">members</span><span class="o">`</span><span class="p">(</span><span class="o">`</span><span class="n">firstname</span><span class="o">`</span><span class="p">,</span> <span class="o">`</span><span class="n">lastname</span><span class="o">`</span><span class="p">,</span> <span class="o">`</span><span class="n">email</span><span class="o">`</span><span class="p">)</span> <span class="k">VALUES</span> <span class="p">(</span><span class="ss">&quot;Amanda&quot;</span><span class="p">,</span><span class="ss">&quot;Nelson&quot;</span><span class="p">,</span> <span class="ss">&quot;anelson13@indiatimes.com&quot;</span><span class="p">);</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="o">`</span><span class="n">members</span><span class="o">`</span><span class="p">(</span><span class="o">`</span><span class="n">firstname</span><span class="o">`</span><span class="p">,</span> <span class="o">`</span><span class="n">lastname</span><span class="o">`</span><span class="p">,</span> <span class="o">`</span><span class="n">email</span><span class="o">`</span><span class="p">)</span> <span class="k">VALUES</span> <span class="p">(</span><span class="ss">&quot;Lisa&quot;</span><span class="p">,</span> <span class="ss">&quot;Olson&quot;</span><span class="p">,</span> <span class="ss">&quot;lolsonr@telegraph.co.uk&quot;</span><span class="p">);</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="o">`</span><span class="n">members</span><span class="o">`</span><span class="p">(</span><span class="o">`</span><span class="n">firstname</span><span class="o">`</span><span class="p">,</span> <span class="o">`</span><span class="n">lastname</span><span class="o">`</span><span class="p">,</span> <span class="o">`</span><span class="n">email</span><span class="o">`</span><span class="p">)</span> <span class="k">VALUES</span> <span class="p">(</span><span class="ss">&quot;Alice&quot;</span><span class="p">,</span> <span class="ss">&quot;Ortiz&quot;</span><span class="p">,</span> <span class="ss">&quot;aortizw@histats.com&quot;</span><span class="p">);</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="o">`</span><span class="n">members</span><span class="o">`</span><span class="p">(</span><span class="o">`</span><span class="n">firstname</span><span class="o">`</span><span class="p">,</span> <span class="o">`</span><span class="n">lastname</span><span class="o">`</span><span class="p">,</span> <span class="o">`</span><span class="n">email</span><span class="o">`</span><span class="p">)</span> <span class="k">VALUES</span> <span class="p">(</span><span class="ss">&quot;Peter&quot;</span><span class="p">,</span><span class="ss">&quot;Phillips&quot;</span><span class="p">,</span> <span class="ss">&quot;pphillipss@1688.com&quot;</span><span class="p">);</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="o">`</span><span class="n">members</span><span class="o">`</span><span class="p">(</span><span class="o">`</span><span class="n">firstname</span><span class="o">`</span><span class="p">,</span> <span class="o">`</span><span class="n">lastname</span><span class="o">`</span><span class="p">,</span> <span class="o">`</span><span class="n">email</span><span class="o">`</span><span class="p">)</span> <span class="k">VALUES</span> <span class="p">(</span><span class="ss">&quot;Matthew&quot;</span><span class="p">,</span><span class="ss">&quot;Porter&quot;</span><span class="p">,</span> <span class="ss">&quot;mporter9@europa.eu&quot;</span><span class="p">);</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="o">`</span><span class="n">members</span><span class="o">`</span><span class="p">(</span><span class="o">`</span><span class="n">firstname</span><span class="o">`</span><span class="p">,</span> <span class="o">`</span><span class="n">lastname</span><span class="o">`</span><span class="p">,</span> <span class="o">`</span><span class="n">email</span><span class="o">`</span><span class="p">)</span> <span class="k">VALUES</span> <span class="p">(</span><span class="ss">&quot;Tammy&quot;</span><span class="p">,</span> <span class="ss">&quot;Ray&quot;</span><span class="p">,</span> <span class="ss">&quot;trayx@weather.com&quot;</span><span class="p">);</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="o">`</span><span class="n">members</span><span class="o">`</span><span class="p">(</span><span class="o">`</span><span class="n">firstname</span><span class="o">`</span><span class="p">,</span> <span class="o">`</span><span class="n">lastname</span><span class="o">`</span><span class="p">,</span> <span class="o">`</span><span class="n">email</span><span class="o">`</span><span class="p">)</span> <span class="k">VALUES</span> <span class="p">(</span><span class="ss">&quot;Mark&quot;</span><span class="p">,</span><span class="ss">&quot;Richardson&quot;</span><span class="p">,</span> <span class="ss">&quot;mrichardson1d@ihg.com&quot;</span><span class="p">);</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="o">`</span><span class="n">members</span><span class="o">`</span><span class="p">(</span><span class="o">`</span><span class="n">firstname</span><span class="o">`</span><span class="p">,</span> <span class="o">`</span><span class="n">lastname</span><span class="o">`</span><span class="p">,</span> <span class="o">`</span><span class="n">email</span><span class="o">`</span><span class="p">)</span> <span class="k">VALUES</span> <span class="p">(</span><span class="ss">&quot;Joan&quot;</span><span class="p">,</span> <span class="ss">&quot;Roberts&quot;</span><span class="p">,</span> <span class="ss">&quot;jroberts12@alibaba.com&quot;</span><span class="p">);</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="o">`</span><span class="n">members</span><span class="o">`</span><span class="p">(</span><span class="o">`</span><span class="n">firstname</span><span class="o">`</span><span class="p">,</span> <span class="o">`</span><span class="n">lastname</span><span class="o">`</span><span class="p">,</span> <span class="o">`</span><span class="n">email</span><span class="o">`</span><span class="p">)</span> <span class="k">VALUES</span> <span class="p">(</span><span class="ss">&quot;Kathleen&quot;</span><span class="p">,</span> <span class="ss">&quot;Rose&quot;</span><span class="p">,</span> <span class="ss">&quot;kroseg@pinterest.com&quot;</span><span class="p">);</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="o">`</span><span class="n">members</span><span class="o">`</span><span class="p">(</span><span class="o">`</span><span class="n">firstname</span><span class="o">`</span><span class="p">,</span> <span class="o">`</span><span class="n">lastname</span><span class="o">`</span><span class="p">,</span> <span class="o">`</span><span class="n">email</span><span class="o">`</span><span class="p">)</span> <span class="k">VALUES</span> <span class="p">(</span><span class="ss">&quot;Steve&quot;</span><span class="p">,</span> <span class="ss">&quot;Sanders&quot;</span><span class="p">,</span> <span class="ss">&quot;ssanders1b@wikispaces.com&quot;</span><span class="p">);</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="o">`</span><span class="n">members</span><span class="o">`</span><span class="p">(</span><span class="o">`</span><span class="n">firstname</span><span class="o">`</span><span class="p">,</span> <span class="o">`</span><span class="n">lastname</span><span class="o">`</span><span class="p">,</span> <span class="o">`</span><span class="n">email</span><span class="o">`</span><span class="p">)</span> <span class="k">VALUES</span> <span class="p">(</span><span class="ss">&quot;Shirley&quot;</span><span class="p">,</span> <span class="ss">&quot;Scott&quot;</span><span class="p">,</span> <span class="ss">&quot;sscottm@macromedia.com&quot;</span><span class="p">);</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="o">`</span><span class="n">members</span><span class="o">`</span><span class="p">(</span><span class="o">`</span><span class="n">firstname</span><span class="o">`</span><span class="p">,</span> <span class="o">`</span><span class="n">lastname</span><span class="o">`</span><span class="p">,</span> <span class="o">`</span><span class="n">email</span><span class="o">`</span><span class="p">)</span> <span class="k">VALUES</span> <span class="p">(</span><span class="ss">&quot;Lillian&quot;</span><span class="p">,</span> <span class="ss">&quot;Stephens&quot;</span><span class="p">,</span> <span class="ss">&quot;lstephens19@hugedomains.com&quot;</span><span class="p">);</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="o">`</span><span class="n">members</span><span class="o">`</span><span class="p">(</span><span class="o">`</span><span class="n">firstname</span><span class="o">`</span><span class="p">,</span> <span class="o">`</span><span class="n">lastname</span><span class="o">`</span><span class="p">,</span> <span class="o">`</span><span class="n">email</span><span class="o">`</span><span class="p">)</span> <span class="k">VALUES</span> <span class="p">(</span><span class="ss">&quot;Nicole&quot;</span><span class="p">,</span> <span class="ss">&quot;Thompson&quot;</span><span class="p">,</span> <span class="ss">&quot;nthompson3@admin.ch&quot;</span><span class="p">);</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="o">`</span><span class="n">members</span><span class="o">`</span><span class="p">(</span><span class="o">`</span><span class="n">firstname</span><span class="o">`</span><span class="p">,</span> <span class="o">`</span><span class="n">lastname</span><span class="o">`</span><span class="p">,</span> <span class="o">`</span><span class="n">email</span><span class="o">`</span><span class="p">)</span> <span class="k">VALUES</span> <span class="p">(</span><span class="ss">&quot;Marie&quot;</span><span class="p">,</span> <span class="ss">&quot;Thompson&quot;</span><span class="p">,</span> <span class="ss">&quot;mthompsonz@yelp.com&quot;</span><span class="p">);</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="o">`</span><span class="n">members</span><span class="o">`</span><span class="p">(</span><span class="o">`</span><span class="n">firstname</span><span class="o">`</span><span class="p">,</span> <span class="o">`</span><span class="n">lastname</span><span class="o">`</span><span class="p">,</span> <span class="o">`</span><span class="n">email</span><span class="o">`</span><span class="p">)</span> <span class="k">VALUES</span> <span class="p">(</span><span class="ss">&quot;Alan&quot;</span><span class="p">,</span> <span class="ss">&quot;Vasquez&quot;</span><span class="p">,</span> <span class="ss">&quot;avasquezo@miibeian.gov.cn&quot;</span><span class="p">);</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="o">`</span><span class="n">members</span><span class="o">`</span><span class="p">(</span><span class="o">`</span><span class="n">firstname</span><span class="o">`</span><span class="p">,</span> <span class="o">`</span><span class="n">lastname</span><span class="o">`</span><span class="p">,</span> <span class="o">`</span><span class="n">email</span><span class="o">`</span><span class="p">)</span> <span class="k">VALUES</span> <span class="p">(</span><span class="ss">&quot;Mildred&quot;</span><span class="p">,</span> <span class="ss">&quot;Watkins&quot;</span><span class="p">,</span> <span class="ss">&quot;mwatkins0@miibeian.gov.cn&quot;</span><span class="p">);</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="o">`</span><span class="n">members</span><span class="o">`</span><span class="p">(</span><span class="o">`</span><span class="n">firstname</span><span class="o">`</span><span class="p">,</span> <span class="o">`</span><span class="n">lastname</span><span class="o">`</span><span class="p">,</span> <span class="o">`</span><span class="n">email</span><span class="o">`</span><span class="p">)</span> <span class="k">VALUES</span> <span class="p">(</span><span class="ss">&quot;Eugene&quot;</span><span class="p">,</span> <span class="ss">&quot;Williams&quot;</span><span class="p">,</span> <span class="ss">&quot;ewilliamsi@deliciousdays.com&quot;</span><span class="p">);</span>
</code></pre></div>
</details>
<p>Beachten Sie, dass danach die <code>id</code>-Werte andere sind, da es sich um einen <code>AUTO INCREMENT</code>-Wert handelt. </p>
<div class="admonition success">
<p class="admonition-title">Success</p>
<p>Wir haben unser Backend erfolgreich als REST-Server implementiert, der alle CRUD-Funktionalitäten umsetzt. Wir werden im nächsten Schritt das Frontend nun so gestalten, dass es auf die REST-API zugreift und das Backend für die Datenverwaltung verwendet. </p>
</div>
<h3 id="cross-origin-resource-sharing-cors">Cross-Origin Resource Sharing (CORS)<a class="headerlink" href="#cross-origin-resource-sharing-cors" title="Permanent link">&para;</a></h3>
<p>Die <em>Same Origin Policy (SOP)</em> ist ein Sicherheitskonzept, das clientseitig Skriptsprachen (also z.B. JavaScript oder CSS) untersagt, Ressourcen aus verschiedenen Herkunften zu verwenden, also von verschiedenen Servern. Dadurch soll verhindert werden, dass fremde Skripte in die bestehende Client-Server-Kommunikation eingeschleust werden. Gleiche <em>Herkunft (origin)</em> bedeutet, dass das gleiche Protokoll (z.B. <code>http</code> oder <code>https</code>), von der gleichen Domain (z.B. <code>localhost</code> oder <code>htw-berlin</code>) sowie dem gleichen Port (z.B. <code>80</code> oder <code>4200</code>) verwendet werden. Es müssen alle drei Eigenschaften übereinstimmen. </p>
<p>Mit dem Aufkommen von Single Page Applications und dem darin benötigten AJAX kam jedoch der Bedarf auf, die SOP aufzuweichen. Es sollte möglich sein, dass z.B. JavaScript sowohl client-seitig das DOM ändert als auch einen Request an den Server (das Backend) sendet. Der Kompromiss, der dafür gefunden wurde, nennt sich <em>Cross-Origin Resource Sharing (CORS)</em>. Damit ist es möglich, für einige oder alle Anfragen zu definieren, dass sie im Sinne der SOP trotzdem erlaub sein sollen. </p>
<p>Um CORS für Ihr Backend zu aktivieren, wechseln Sie im Terminal in Ihren <code>backend</code>-Ordner und geben dort</p>
<div class="highlight"><pre><span></span><code>npm install cors
</code></pre></div>
<p>ein. Öffnen Sie dann die <code>server.js</code> und fügen Sie die hervorgehobenen Zeilen ein:</p>
<div class="tabbed-set" data-tabs="22:1"><input checked="checked" id="__tabbed_22_1" name="__tabbed_22" type="radio" /><label for="__tabbed_22_1">server.js</label><div class="tabbed-content">
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="kd">const</span> <span class="nx">express</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&quot;express&quot;</span><span class="p">);</span>
<span class="hll"><span class="kd">const</span> <span class="nx">cors</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;cors&#39;</span><span class="p">);</span>
</span><span class="kd">const</span> <span class="nx">bodyParser</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&quot;body-parser&quot;</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">app</span> <span class="o">=</span> <span class="nx">express</span><span class="p">();</span>

<span class="c1">// parse requests of content-type: application/json</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">bodyParser</span><span class="p">.</span><span class="nx">json</span><span class="p">());</span>

<span class="hll"><span class="c1">// enable cors for all requests</span>
</span><span class="hll"><span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">cors</span><span class="p">());</span>
</span>
<span class="c1">// parse requests of content-type: application/x-www-form-urlencoded</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">bodyParser</span><span class="p">.</span><span class="nx">urlencoded</span><span class="p">({</span> <span class="nx">extended</span><span class="o">:</span> <span class="kc">true</span> <span class="p">}));</span>

<span class="c1">// simple route</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="nx">res</span><span class="p">.</span><span class="nx">json</span><span class="p">({</span> <span class="nx">message</span><span class="o">:</span> <span class="s2">&quot;Hello FIW!&quot;</span> <span class="p">});</span>
<span class="p">});</span>

<span class="nx">require</span><span class="p">(</span><span class="s2">&quot;./app/routes/members.routes.js&quot;</span><span class="p">)(</span><span class="nx">app</span><span class="p">);</span>

<span class="c1">// set port, listen for requests</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">listen</span><span class="p">(</span><span class="mf">3000</span><span class="p">,</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;Server is running on port 3000.&quot;</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></div>
</td></tr></table>
</div>
</div>
<p>Wenn Sie z.B. nur die <code>get</code>-Anfrage teilen wollen, dann wählen Sie nicht <code>app.use(cors());</code>, sondern </p>
<div class="highlight"><pre><span></span><code><span class="nx">app</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">,</span> <span class="nx">cors</span><span class="p">(),</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
        <span class="nx">res</span><span class="p">.</span><span class="nx">json</span><span class="p">({</span> <span class="nx">message</span><span class="o">:</span> <span class="s2">&quot;Hello FIW!&quot;</span> <span class="p">});</span>
    <span class="p">});</span>
</code></pre></div>
<p>Mehr zum CORS-Paket von node.js bzw. express finden Sie <a href="https://expressjs.com/en/resources/middleware/cors.html">hier</a>.</p>
                
              
              
                


              
            </article>
          </div>
        </div>
        
      </main>
      
        
<footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="Footer">
      
        
        <a href="../routing/" class="md-footer__link md-footer__link--prev" aria-label="Zurück: Routing und Services" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Zurück
              </span>
              Routing und Services
            </div>
          </div>
        </a>
      
      
        
        <a href="../uebungen/" class="md-footer__link md-footer__link--next" aria-label="Weiter: Übungen" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Weiter
              </span>
              Übungen
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright &copy; 2021 Jörn Freiheit
          </div>
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
        
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "..", "features": ["navigation.instant", "navigation.tracking"], "translations": {"clipboard.copy": "In Zwischenablage kopieren", "clipboard.copied": "In Zwischenablage kopiert", "search.config.lang": "de", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Suche", "search.result.placeholder": "Suchbegriff eingeben", "search.result.none": "Keine Suchergebnisse", "search.result.one": "1 Suchergebnis", "search.result.other": "# Suchergebnisse", "search.result.more.one": "1 weiteres Suchergebnis auf dieser Seite", "search.result.more.other": "# weitere Suchergebnisse auf dieser Seite", "search.result.term.missing": "Es fehlt", "select.version.title": "Version ausw\u00e4hlen"}, "search": "../assets/javascripts/workers/search.409db549.min.js", "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.756773cc.min.js"></script>
      
    
  </body>
</html>